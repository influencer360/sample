import{c as Ce}from"./chunk-UFVHZVGQ.js";import{p as K}from"./chunk-7SULV3BY.js";import{b as z,e as X,g as Ie}from"./chunk-3N35XHLL.js";import{b as _,c as Te}from"./chunk-FW7QGJ5I.js";import{h as Z,i as we}from"./chunk-QYNB3KGD.js";import{b as I,c as Se}from"./chunk-BRMHBYYL.js";import{b as _e}from"./chunk-RRWPNPQ4.js";import{a as Pe}from"./chunk-CQWYXVIF.js";import{b as ve}from"./chunk-527EYBTV.js";import{a as U}from"./chunk-JMUJZFCQ.js";import{e as G,f as be,g as $,h as me}from"./chunk-WBPTDCVX.js";import{c as he}from"./chunk-SHTS4IQB.js";import{a as Y}from"./chunk-JRESDEDW.js";import{b as fe}from"./chunk-INSRYSWJ.js";import{a as ye,b as o,c as W}from"./chunk-RBJWJTV5.js";import{a as H}from"./chunk-5M6X2SDJ.js";import{f as P}from"./chunk-62VJZGPO.js";var h=P(Y()),ge=P(_e());W();var n=P(Y()),g=P(H()),ae=P(U()),oe=P(ve());var p=P(U()),B=P(Pe()),w=P(ye());var D=P(U());Te();var Ae="production",F="staging",E="dev",R=()=>{let e=Ee(),t=String(Fe().env||e.TARGET||e.NODE_ENV).toLowerCase();return t.includes("dev")?E:t.includes("stag")?F:Ae},Fe=()=>typeof hs<"u"?hs:{},Ee=()=>typeof process<"u"&&process.env?process.env:{};var Q=()=>{switch(R()){case E:case F:return"*";default:return"https://payments.hootsuite.com/"}},J=()=>{switch(R()){case E:case F:return"https://payments-staging.hootsuite.com/";default:return"https://payments.hootsuite.com/"}},ee=e=>{switch(R()){case E:case F:return`${J()}?language=${e}&sandbox=true`;default:return`${J()}?language=${e}`}},ie=e=>{switch(R()){case E:case F:return!0;default:return e==="https://payments.hootsuite.com"||e==="https://hootsuite.com"}};we();var te=Z.div`
  width: 100%;
  height: ${e=>e.iframeHeight}px;
`;var x=class extends D.default.Component{constructor(t){super(t),this.iFrame=null,this.setIframeRef=i=>{this.iFrame=i},this.render=()=>{let{iframeHeight:i}=this.state,{language:l,id:r}=this.props;return D.default.createElement(te,{iframeHeight:i},D.default.createElement("iframe",{id:r,frameBorder:"0",title:"Secure Payment Form",height:"100%",width:"100%",src:`${ee(l)}`,ref:this.setIframeRef,onLoad:this.onIframeLoad,allow:"payment"}))},this.state={iframeHeight:"210"},this.handleIncomingMessage=this.handleIncomingMessage.bind(this),this.onIframeLoad=this.onIframeLoad.bind(this)}componentDidMount(){window.addEventListener("message",this.handleIncomingMessage,!1)}onIframeLoad(){this.handleConfigChanged()}componentDidUpdate(t){let{configMessage:i,isFormSubmitted:l}=t;this.props.isFormSubmitted&&!l&&this.handleSubmit();let r=!1;Object.keys(i).forEach(a=>{t.configMessage[a]!==this.props.configMessage[a]&&(r=!0)}),r&&this.handleConfigChanged()}componentWillUnmount(){window.removeEventListener("message",this.handleIncomingMessage)}handleConfigChanged(){this.postMessageToIFrame("config",this.props.configMessage)}handleSubmit(){this.postMessageToIFrame("submit",!0)}handleIncomingMessage(t){let{data:i,origin:l}=t,r=i.data,a=i.type;if(!!ie(l))switch(a){case"isCreditCardValid":r?this.props.onValidCreditCard():this.props.onInvalidCreditCard();break;case"ariaIframePostComplete":this.props.onFormPostSuccess(r);break;case"height":this.setState({iframeHeight:r});break;case"GAEvent":this.props.logGAEvent(r);default:}}postMessageToIFrame(t,i){this.iFrame&&this.iFrame.contentWindow&&this.iFrame.contentWindow.postMessage({type:t,data:i},Q())}};x.propTypes={language:_.oneOf(["en","fr","de","es","it","pt_BR"]),onValidCreditCard:_.func,onInvalidCreditCard:_.func,onFormPostSuccess:_.func,configMessage:_.shape({clientNumber:_.string,collectionAmount:_.string,collectionGroupId:_.oneOfType([_.number,_.string]),mode:_.string,sessionId:_.string}),isFormSubmitted:_.bool,id:_.string,logGAEvent:_.func};x.defaultProps={language:"en",onValidCreditCard:()=>{},onInvalidCreditCard:()=>{},onFormPostSuccess:()=>{},configMessage:{clientNumber:"",collectionAmount:"0",collectionGroupId:0,mode:"",sessionId:""},isFormSubmitted:!1,id:"payments-iframe",logGAEvent:()=>{}};Ie();var j=class extends p.default.Component{constructor(t){super(t),this.state={showStateZip:!1,errorMessage:"",display:!0,isFormSubmitted:!1},this.onValidCreditCard=this.onValidCreditCard.bind(this),this.onInvalidCreditCard=this.onInvalidCreditCard.bind(this),this.handleSubmitClick=this.handleSubmitClick.bind(this),this.onFormPostSuccess=this.onFormPostSuccess.bind(this),this.reduce=this.reduce.bind(this),this.genericErrorMessage=w.default._("Error updating payment method: please check card details."),this.countriesRequiringStateZip=["CA","US","AU"]}handleSubmitClick(){if(!this.state.hasValidCreditCard){this.setState({errorMessage:this.genericErrorMessage},()=>{window.scrollTo(0,0)}),billing.removeThrobbers();return}this.setState({display:!1,errorMessage:""}),billing.submitPayment(t=>{t?this.setState({configMessage:this.props.configMessage},()=>{this.setState({isFormSubmitted:!0})}):this.setState({display:!0,errorMessage:w.default._("Error submitting form: invalid billing address.")})})}onValidCreditCard(){this.setState({hasValidCreditCard:!0})}onInvalidCreditCard(){this.setState({hasValidCreditCard:!1})}onFormPostSuccess(t){t.success||this.setState({errorMessage:this.genericErrorMessage,hasValidCreditCard:!1,isFormSubmitted:!1,display:!0})}reduce(t){return i=>{let l=i.target.value;this.setState({[t]:l}),t==="country"&&(this.countriesRequiringStateZip.includes(l)?this.setState({showStateZip:!0}):this.setState({showStateZip:!1}))}}renderBillingCountries(){var t=this.props.billingCountries.map((i,l)=>p.default.createElement("option",{key:l,value:i[0]},i[1]));return p.default.createElement("div",{className:"-formElement -billingCountry"},p.default.createElement("label",{htmlFor:"billingCountry",className:"title"},w.default._("Billing Address")),p.default.createElement("select",{name:"billing_country",id:"billingCountry",className:"_billingCountry",value:this.state.country,onChange:this.reduce("country")},p.default.createElement("option",null,w.default._("Select Country")),t))}renderStateZipContainer(){return p.default.createElement("div",null,p.default.createElement("div",{id:"billingStateContainer",className:"-formElement -billingState"},p.default.createElement("label",{htmlFor:"billingState",className:"title"},w.default._("State/Province")),p.default.createElement("input",{id:"billingState",className:"_billingState",type:"text",name:"billing_state",value:this.state.state,onChange:this.reduce("state")})),p.default.createElement("div",{id:"billingZipContainer",className:"-formElement -billingZip"},p.default.createElement("label",{htmlFor:"billingZip",className:"title"},w.default._("Zip/Postal Code:")),p.default.createElement("input",{type:"text",name:"billing_zip",id:"billingZip",className:"_billingZip",style:{width:"80px"},value:this.state.zip,onChange:this.reduce("zip")}),p.default.createElement("p",{className:"formError _postalCodeError",style:{color:"red"}})))}renderAddressFields(){return p.default.createElement("div",null,this.renderBillingCountries(),this.state.showStateZip?this.renderStateZipContainer():null)}renderError(){return p.default.createElement("div",{className:"-billingError"},p.default.createElement(X,{messageText:this.state.errorMessage,type:z}))}renderSubmitButton(){return p.default.createElement("div",{className:"-billingSubmit"},p.default.createElement("button",{id:"submitPaymentBtn",className:"btn-cta btn-type1 -submitPaymentBtn _submitPaymentBtn",onClick:this.handleSubmitClick},w.default._("Submit")))}renderPayframe(){return p.default.createElement(x,{configMessage:this.state.configMessage,language:this.props.language,onValidCreditCard:this.onValidCreditCard,onInvalidCreditCard:this.onInvalidCreditCard,onFormPostSuccess:this.onFormPostSuccess,isFormSubmitted:this.state.isFormSubmitted})}render(){return p.default.createElement("div",{className:"ui-form -billingAddress"},this.state.errorMessage?this.renderError():null,this.state.display?null:p.default.createElement("p",null,w.default._("Processing, please wait")+"..."),p.default.createElement("div",{style:{display:this.state.display?"initial":"none"}},this.renderPayframe(),p.default.createElement("p",{id:"addressError",className:"formError",style:{color:"red"}}),this.renderAddressFields(),p.default.createElement("br",null)),this.renderSubmitButton())}},{number:xe,string:O,array:Oe}=B.default;j.defaultProps={billingCountries:[]};j.propTypes={billingCountries:Oe,language:O,configMessage:B.default.shape({clientNumber:O.isRequired,collectionAmount:O.isRequired,collectionGroupId:B.default.oneOfType([O,xe]),mode:O.isRequired,sessionId:O.isRequired})};var ne=j;var m=P(H());he();var S=function(){this.pricingProfile={currency:S.defaultCurrency,billingInterval:S.defaultBillingInterval}};S.INTERVAL_MONTHLY="MONTHLY";S.INTERVAL_YEARLY="YEARLY";S.defaultCurrency="PRICING_USD";S.defaultBillingInterval=S.INTERVAL_MONTHLY;S.TIERED_FEATURES=["SEATS","PRIORITY_SUPPORT","MESSAGE_ARCHIVING","PUBLISHER_PRO"];m.default.extend(S.prototype,{resolvePricingProfile:function(e){return e?m.default.extend({},this.pricingProfile,e):this.pricingProfile},fetchPricingData:function(e){return(e||!this.isDataLoadStarted())&&(this.pricingDataPromise=ajaxCall({url:"/ajax/billing/get-pricing-data"},"qm").then(m.default.bind(this.loadedPricingData,this))),this.pricingDataPromise},isDataLoadStarted:function(){if(!this.pricingDataPromise)return!1;var e=this.pricingDataPromise.state();return e==="pending"||e==="resolved"},isDataLoaded:function(){return!!this.pricingData},loadedPricingData:function(e){this.pricingData=e;var t=this.pricingData.featurePricing[S.defaultCurrency];this.features=m.default.object(m.default.map(t,function(i,l){return[i.code,{id:l,name:i.name}]}))},calculateFeaturePricing:function(e,t){return t=this.resolvePricingProfile(t),m.default.object(m.default.map(e,function(i,l){return[l,this.getFeatureCost(l,i,t)]},this))},getFeatureData:function(e,t){t=this.resolvePricingProfile(t);var i=this.pricingData.featurePricing[t.currency];return m.default.findWhere(i,{code:e})},getFeatureCost:function(e,t,i){if(!t)return 0;i=this.resolvePricingProfile(i);var l=this.getFeatureData(e,i),r=i.billingInterval===S.INTERVAL_YEARLY?"costAnnual":"cost",a=parseFloat(l[r]),s=this.getPlanBaseValues(e).value;return t<=s?0:(s&&(t=t-s),this.isTieredFeature(e)?this.getCostForTieredFeature(e,t,i):a*t)},getCostForTieredFeature:function(e,t,i){var l=0,r;i=this.resolvePricingProfile(i);for(var a=1;a<=t;a++)r=this.getFeatureTier(e,a,i),r&&(l+=r.price);return l},getFeatureId:function(e){return this.features[e]?parseInt(this.features[e].id,10):null},getFeatureCode:function(e){var t=null;return m.default.each(this.features,function(i,l){i.id==e&&(t=l)}),t},getPlanBaseValues:function(e){return this.pricingData.planBaseFeatures[this.getFeatureId(e)]},isTieredFeature:function(e){return m.default.indexOf(S.TIERED_FEATURES,e)!==-1},getFeatureTier:function(e,t,i){if(!this.isTieredFeature(e))return null;i=this.resolvePricingProfile(i);var l=this.pricingData.featureTiers[i.billingInterval][i.currency][e],r=null;return m.default.each(l,function(a){t<=a.max&&(r||(r=a))}),r},getPlanCost:function(e){return e=this.resolvePricingProfile(e),parseFloat(this.pricingData.planPricing[e.billingInterval][e.currency])},getCouponDiscountsForFeaturePricing:function(e,t){var i=this,l,r={},a=function(s,c,d){!c||(r[d]?(r[d].discountType!==s.priceType?(r[d].discountType="mixed",r[d].discountAmount=null):r[d].discountAmount+=s.amount,r[d].subtotal+=i.getCouponDiscountForPrice(c,s)):r[d]={discountType:s.priceType,discountAmount:s.amount,subtotal:i.getCouponDiscountForPrice(c,s)})};return m.default.each(t.featureDiscounts,function(s){if(!s.featureId){m.default.each(e,m.default.bind(a,null,s));return}l=i.getFeatureCode(s.featureId),s.featureId==255&&(l="HOOTSUITE_PRO"),m.default.has(e,l)&&a(s,e[l],l)}),r},getCouponDiscountForPrice:function(e,t){return t.priceType==="flat"?Math.min(t.amount,e):e*t.amount/100},calculateTotalCouponDiscount:function(e,t,i){var l=m.default.reduce(t,function(v,C){return v+C},0),r=this.getCouponDiscountsForFeaturePricing(t,i),a=m.default.reduce(r,function(v,C){return v+C.subtotal},0),s=m.default.where(i.featureDiscounts,{featureId:0}),c=m.default.reduce(s,function(v,C){return v+this.getCouponDiscountForPrice(e,C)},0,this);a=parseFloat(a.toFixed(2)),c=parseFloat(c.toFixed(2));var d=a+c;return d>e+l&&(d=e+l),d}});var f=S;var k=P(Y()),T=P(H()),le=function(e,t){this.$el=e;var i=this.$el.data();this.name="slider"+(i.sliderName||new Date().getTime()),this._mouseMoveTriggered=!1,this._options={width:i.width||"100%",segments:i.segments||10,step:i.step||1,value:i.value||0,segmentMin:i.segmentMin||0,hideMarkers:i.hideMarkers||0,noAnimation:i.noAnimation||0,ariaLabelledBy:i.labelledBy||null},this._derived={segmentMax:10,segmentWidth:10,segmentBreakpoints:{0:.05,1:.15,2:.25,3:.35,4:.45,5:.55,6:.65,7:.75,8:.85,9:.95},valueMin:0,valueMax:10},this.$indicator=null,this.$control=null,t&&this._setOptions(t),this._updateDerivedValues(),this._render()};T.default.extend(le.prototype,{value:function(e){return!T.default.isUndefined(e)&&e!==this._options.value&&(this._setValue(e),this.$el.trigger({type:"sliderValueUpdated",value:e,initializing:!1,mouseMoving:this._mouseMoveTriggered})),this._options.value},segmentMax:function(){return this._derived.segmentMax},options:function(e){return T.default.isUndefined(e)||(this.destroy(),this._setOptions(e),this._updateDerivedValues(),this._render()),this._options},stopDrag:function(){(0,k.default)(document).trigger("mouseup."+this.name)},destroy:function(){this.$el.removeClass("modSlider").attr({tabindex:"-1","aria-hidden":!0}).off(),this.$control.off(),this.$el.empty()},_render:function(){var e="modSlider"+(this._options.noAnimation?" x-noAnimation":"");if(this.$el.addClass(e).css("width",this._options.width).attr({tabindex:"0","aria-hidden":!1}).on("click."+this.name,T.default.bind(this._updateSliderMouse,this)).on("keydown."+this.name,T.default.bind(this._updateSliderKeyboard,this)).data("sliderWidget",this),!this._options.hideMarkers)for(var t=this._options.segmentMin+1;t<=this._derived.segmentMax;t++)this._addSegment(t);this.$indicator=this._addIndicator(),this.$control=this._addControl(),this.$el.trigger({type:"sliderValueUpdated",value:this._options.value,initializing:!0,mouseMoving:!1}),this.$el.css("visibility","visible")},_addSegment:function(e){var t=(0,k.default)('<span class="-segment"></span>').attr("data-segment",e*this._options.step).css("width",this._derived.segmentWidth+"%");return e===this._options.segmentMin+1&&t.attr("data-start-index",this._derived.valueMin),t.appendTo(this.$el)},_addIndicator:function(){var e=(0,k.default)('<span class="-indicator _sliderIndicator"></span>').css("width",(this._options.value/this._options.step-this._options.segmentMin)*this._derived.segmentWidth+"%");return e.appendTo(this.$el)},_addControl:function(){var e=(0,k.default)('<span class="-control _sliderControl"></span>').css("left",(this._options.value/this._options.step-this._options.segmentMin)*this._derived.segmentWidth+"%").attr({role:"slider","aria-valuemin":this._derived.valueMin,"aria-valuemax":this._derived.valueMax,"aria-valuenow":this.value()});return this._options.ariaLabelledBy!==null&&e.attr("aria-labelledby",this._options.ariaLabelledBy),e.on("mousedown."+this.name,T.default.bind(this._initSliderUpdate,this)),e.appendTo(this.$el)},_initSliderUpdate:function(){this._mouseMoveTriggered=!1;var e=(0,k.default)(document).on("mousemove."+this.name,T.default.bind(function(t){this._mouseMoveTriggered=!0,this._updateSliderMouse(t)},this)).on("mouseup."+this.name,T.default.bind(function(){e.off("mousemove."+this.name),e.off("mouseup."+this.name),this.$el.trigger({type:"sliderValueUpdated",value:this._options.value,initializing:!1,mouseMoving:!1})},this))},_updateSliderMouse:function(e){if(this._mouseMoveTriggered&&e.type==="click"){this._mouseMoveTriggered=!1;return}for(var t=this.value(),i=this.$el.offset().left+(parseInt(this.$el.css("border-left-width"),10)||3),l=(e.pageX-i)/this.$el.width(),r=0,a;l>this._derived.segmentBreakpoints[r];)r++;a=(this._options.segmentMin+r)*this._options.step,a!==t&&this._updateSliderState(a)},_updateSliderKeyboard:function(e){var t=this.value(),i=t/this._options.step,l;switch(e.keyCode){case 38:case 39:e.preventDefault(),i++,i=Math.min(i,this._derived.segmentMax);break;case 37:case 40:e.preventDefault(),i--,i=Math.max(i,this._options.segmentMin);break}l=i*this._options.step,l!==t&&this._updateSliderState(l)},_updateSliderState:function(e){var t=this.value(e),i=(t/this._options.step-this._options.segmentMin)*this._derived.segmentWidth+"%";this.$indicator.css("width",i),this.$control.css("left",i)},_setValue:function(e){var t=this._options.segmentMin*this._options.step,i=this._derived.segmentMax*this._options.step;e<t&&(e=t),e>i&&(e=i),this._options.value=e,this.$control.attr("aria-valuenow",e),this._updateSliderState(e)},_setOptions:function(e){T.default.extend(this._options,e)},_updateDerivedValues:function(){this._derived.segmentMax=this._options.segmentMin+this._options.segments,this._derived.segmentWidth=100/this._options.segments,this._derived.valueMin=this._options.segmentMin*this._options.step,this._derived.valueMax=this._derived.segmentMax*this._options.step,this._derived.segmentBreakpoints={};for(var e=this._derived.segmentWidth/100/2,t=e*2,i=0;i<this._options.segments;i++)this._derived.segmentBreakpoints[i]=e+i*t}});var re=le;Se();var se=P(fe()),ue=P(Ce());W();be();me();window.billing=window.billing||{};G.init();$.init("body");var b=window.pricingService=new f;g.default.extend(b.pricingProfile,hs.memberPricingProfile);billing.state=billing.state||"undefinedStateOther";billing.trackingPrefix=billing.trackingPrefix||"web.billing.undefinedPrefix";location.pathname.indexOf("/dashboard")>-1&&(billing.trackingPrefix="web.dashboard");billing.activeCoupons=billing.activeCoupons||[];billing.signupPlanId=billing.signupPlanId||0;billing.currentCost=billing.currentCost||0;billing.chosenPlanId=billing.chosenPlanId||0;billing.ajaxPage=billing.ajaxPage||!1;billing.memberLoggedIn=billing.memberLoggedIn||!1;billing.checkCouponToken=billing.checkCouponToken||"";billing.coupons=billing.coupons||[];billing.signupErrorMessage=o._("Could not complete sign up. Please check form and try again.");billing.showSpinners=!0;billing.showDowngradeOfferPopup=!1;billing.countryList=billing.countryList||[];billing.stateList=billing.stateList||{};billing.features=billing.features||{};billing.features.PLAN="PLAN";billing.features.SEATS="SEATS";billing.features.PRIORITY_SUPPORT="PRIORITY_SUPPORT";billing.features.ARCHIVING="ARCHIVING";billing.features.HSU="HSU";billing.features.ADDITIONAL_SOCIAL_NETWORKS="ADDITIONAL_SOCIAL_NETWORKS";billing.features.PUBLISHER_PRO="PUBLISHER_PRO";billing.features.ANALYTICS_PRO="ANALYTICS_PRO";billing.productizedFeatures=[billing.features.PUBLISHER_PRO,billing.features.ANALYTICS_PRO];billing.currency=billing.currency||{};billing.isSignup=billing.isSignup||!1;billing.commaSeparatedCurrencies=["PRICING_JPY"];billing.setCountryList=function(e){return this.countryList=g.default.isArray(e)?e:[],this.countryList};billing.getCountryList=function(){return this.countryList};billing.setStateList=function(e){return this.stateList=g.default.isObject(e)?e:{},this.stateList};billing.getStateList=function(){return this.stateList};billing.setCurrencyDetails=function(e){return e=g.default.isObject(e)?e:{},g.default.defaults(e,{determined:"",defaultValue:"",localizedData:{}}),this.currency.determined=e.determined,this.currency.default=e.defaultValue,this.currency.data=e.localizedData,this.currency.formatting=e.currencyFormatting,this.currency};billing.getCurrencyDetails=function(){return this.currency};billing.setProDetails=function(e){return e=g.default.isObject(e)?e:{},g.default.defaults(e,{ajaxPage:!1,memberLoggedIn:0,showBillingHistory:0,updateBilling:0,chosenPlanId:void 0,ariaAcctValid:0,addHsuOption:0}),this.ajaxPage=e.ajaxPage,this.memberLoggedIn=e.memberLoggedIn,this.billingHistory=e.showBillingHistory,this.updateBilling=e.updateBilling,this.chosenPlanId=e.chosenPlanId,this.ariaAcctValid=e.ariaAcctValid,this.addHsuOption=e.addHsuOption,this.getProDetails()};billing.getProDetails=function(){return{ajaxPage:this.ajaxPage,memberLoggedIn:this.memberLoggedIn,showBillingHistory:this.billingHistory,updateBilling:this.updateBilling,chosenPlanId:this.chosenPlanId,ariaAcctValid:this.ariaAcctValid,addHsuOption:this.addHsuOption}};billing.setPlanFeatureDetails=function(e){return e=g.default.isObject(e)?e:{},g.default.defaults(e,{activeCoupons:[],isSignup:!1}),this.activeCoupons=e.activeCoupons,this.isSignup=e.isSignup,this.getPlanFeatureDetails()};billing.getPlanFeatureDetails=function(){return{activeCoupons:this.activeCoupons,isSignup:this.isSignup}};billing.setBillingPeriod=function(e){return this.billingPeriod=e||"YEARLY",this.billingPeriod};billing.getBillingPeriod=function(){return this.billingPeriod};billing.setDowngradeOfferPopup=function(e){return this.showDowngradeOfferPopup=e||!1,this.showDowngradeOfferPopup};billing.getDowngradeOfferPopup=function(){return this.showDowngradeOfferPopup};billing.spinnerHtml=function(){return"<div class='loading-content c-c'><h2>Loading...</h2><img src='"+hs.util.rootifyImage("/loader.gif")+"' /></div>"};billing.getSelectedCurrency=function(){return billing.currency.determined};billing.getCurrency=function(){return typeof billing.currency.data<"u"?billing.currency.data[billing.getSelectedCurrency()]||billing.currency.data[billing.currency.default]:{symbol:"$",code:"USD",zero:"0.00"}};billing.trackEvent=function(e,t,i){var l={state:billing.state,pathname:location.pathname};i=g.default.extend(l,i),$.trackCustom(e,t,i)};billing.roundCost=function(e){var t=parseFloat(e);return t<=0?t=billing.getCurrency().zero:t=t.toFixed(billing.getSelectedCurrency()==="PRICING_JPY"?0:2),t};var ke=function(e,t){return e=e.replace(/s/,""),e=e.replace(/-+/g,"-"),e=e.replace(/,/g,""),e=parseFloat(e).toFixed(t.decimalPoints),e=e.replace(/\./g,t.decimalType),e=K(e,t.decimalType,t.separatorType),t.symbolBeforeAmount+e+t.symbolAfterAmount};billing.getCurrencyAmountForDisplay=function(e,t,i){typeof e>"u"||e===null?e="0":e=e.toString(),typeof t>"u"&&(t=billing.getCurrency()),typeof i>"u"&&(typeof hs.language<"u"?i=hs.language:i="");var l=t.code+"_"+i,r=t.code,a={symbolBeforeAmount:t.symbol,symbolAfterAmount:"",decimalType:".",separatorType:",",decimalPoints:2};return typeof billing.currency.formatting<"u"&&(typeof billing.currency.formatting[l]<"u"?a=billing.currency.formatting[l]:typeof billing.currency.formatting[r]<"u"&&(a=billing.currency.formatting[r])),ke(e,a)};billing.getCurrencyFormatting=function(e,t){typeof e>"u"&&(e=billing.getCurrency()),typeof t>"u"&&(typeof hs.language<"u"?t=hs.language:t="");var i=e.code+"_"+t,l=e.code,r={symbolBeforeAmount:e.symbol,symbolAfterAmount:"",decimalType:".",separatorType:",",decimalPoints:2};return typeof billing.currency.formatting<"u"&&(typeof billing.currency.formatting[i]<"u"?r=billing.currency.formatting[i]:typeof billing.currency.formatting[l]<"u"&&(r=billing.currency.formatting[l])),r};billing.setSavePlanChangeButtonState=function(e){var t=(0,n.default)("._savePlanChangeButtons").find("._saveAddons");e=e||!1,e||billing.ajaxPage&&!billing.memberLoggedIn?t.addClass("x-disabled").prop("disabled",!0):t.removeClass("x-disabled").prop("disabled",!1)};billing.populateBillingHistorySection=function(e){var t=(0,n.default)(".billing #billinghistory");ajaxCall({type:"GET",url:"/ajax/billing/billing-history-section",success:function(i){i.success=="1"?(t.empty().html(i.output),n.default.isFunction(e)&&e()):hs.statusObj.update(o._("Error retrieving billing history."),"error",!0)}},"qmNoAbort")};billing.populateEnhancePlanSection=function(e,t,i){var l=(0,n.default)(".billing #enhanceplan");billing.showSpinners&&l.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/enhance-plan-section",data:"planId="+e+"&addHsuOption="+billing.addHsuOption,success:function(r){r.success=="1"?(billing.checkCouponToken=r.checkCouponToken,l.empty().html(r.output),(0,n.default)("#featuresForm").formValues(t),billing.updatePrice(),billing.setSavePlanChangeButtonState(),billing.showFreeTrial(),n.default.isFunction(i)&&i()):(l.empty(),hs.statusObj.update(o._("Error retrieving plan information."),"error",!0))}},"qmNoAbort")};billing.populateBillingSection=function(e,t,i,l){var r=(0,n.default)(".billing #billing-section");billing.showSpinners&&r.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/billing-section",data:"planId="+e+"&updateBilling="+t,success:function(a){if(!g.default.has(a,"success"))return document.location.reload(!0),!1;a.success=="1"?(r.empty().html(a.output),(0,n.default)("#seatUpperLimitErroMsg ._close").click(function(){(0,n.default)("#seatUpperLimitErroMsg").hide()}),billing.populateCountry(),(0,n.default)("#ccForm").formValues(i),(0,n.default)("#billingStateContainer").formValues(i),billing.showPaymentMethods(),billing.showFreeTrial(),n.default.isFunction(l)&&l()):(r.empty(),hs.statusObj.update(o._("Error retrieving billing section."),"error",!0))}},"qmNoAbort")};billing.submitPaymentNotLoggedIn=function(){if(!!billing.checkCCForm()){if((0,n.default)("._billingAddress ._billingZip").data("validated")===!1){billing.validationBlockedSignup();return}if(billing.memberLoggedIn){billing.hideLoginBillingSection(),billing.submitPayment();return}billing.signupPlanId=parseInt(n.default.cookie.read("signup_plan_id"),10)||0,billing.hideLoginBillingSection(),billing.autoSubmitCreateAccount(null,function(e,t){billing.submitPayment()})}};billing.postConfirmationLoadedCallback=function(){!billing.ajaxPage||((0,n.default)("#createaccount").empty(),(0,n.default)("#enhanceplan").empty(),billing.hidePaymentMethods(),billing.clearSubTitle(),(0,n.default)("html, body").animate({scrollTop:0},"fast"),n.default.isFunction(billing.callbacks.postConfirmationLoaded)&&billing.callbacks.postConfirmationLoaded())};billing.showPaymentMethods=function(){(0,n.default)("#paymentMethods").show()};billing.hidePaymentMethods=function(){(0,n.default)("#paymentMethods").hide()};billing.showFreeTrial=function(){(0,n.default)("#freeTrial").show()};billing.hideFreeTrial=function(){(0,n.default)("#freeTrial").hide()};billing.setPageTitle=function(e){(0,n.default)("h1.pageTitle").html(e)};billing.billingNextHook=function(){if((0,n.default)("._passwordField").length==0||hs.util.validatePassword((0,n.default)("._passwordField"))){var e=I.checkPasswordStrength((0,n.default)("._passwordField").val(),"ProSignup");e.then(function(t){billing.callbacks.billingNext()},function(t){billing.callbacks.billingNext()})}else(0,n.default)("html, body").animate({scrollTop:(0,n.default)("._ajax-signup").offset().top},500),billing.trackEvent(billing.trackingPrefix+".user_details","invalid_user_details_entered",{value:"password"})};billing.enhancePlanNextHook=function(){(0,n.default)("html, body").animate({scrollTop:0},"fast"),billing.callbacks.enhancePlanNext()};billing.createAccountNextHook=function(){(0,n.default)("html, body").animate({scrollTop:0},"fast"),billing.callbacks.createAccountNext()};billing.confirmationEnhancePlan=function(){billing.ajaxPage&&n.default.isFunction(billing.callbacks.confirmationEnhancePlan)?billing.callbacks.confirmationEnhancePlan():window.location="https://hootsuite.com/billing"};billing.titles={subtitle:{billing:o._("Enter your billing information - Secure")+'&nbsp;<span class="t-s link _feature _feature_why_credit_card">'+o._("Why do we need this?")+"</span>","enhance-plan":o._("Enhance your plan to take advantage of more Pro features."),"create-account":o._("Free for 30 days, then starting at %s/month"),"sidebar-price":o._("then starting at %s/month")},confirmation:{"thank-you":o._("Thank You")}};billing.getMonthlyPlanCharge=function(){var e=billing.getSelectedCurrency();if((typeof e>"u"||e===null)&&(e="PRICING_USD"),typeof b.pricingData<"u"){var t=b.pricingData.planPricing.YEARLY[e];return t/12}else return};billing.setSubTitle=function(e){var t=billing.titles.subtitle[e],i=billing.getMonthlyPlanCharge();if(typeof i<"u"){t=t.replace("%s",billing.getCurrencyAmountForDisplay(i));var l=(0,n.default)("#sub-title");l.html(t).removeClass("u-displayNoneWeak")}billing.setSidebarPrice()};billing.setSidebarPrice=function(){var e=billing.titles.subtitle["sidebar-price"],t=billing.getMonthlyPlanCharge();typeof t<"u"&&(e=e.replace("%s",billing.getCurrencyAmountForDisplay(t)),(0,n.default)("._sidebarPrice").html(e))};billing.clearSubTitle=function(){(0,n.default)("#sub-title").empty()};billing.setConfirmationBanner=function(e){(0,n.default)("._setBillingConfirmationBanner").html(billing.titles.confirmation[e])};billing.loadBillingStep=function(e){billing.populateBillingSection(billing.chosenPlanId,billing.updateBilling,e,function(){(0,n.default)("#billing-section").show()}),billing.setPageTitle(o._("Billing Information")),billing.setSubTitle("billing")};billing.loadEnhancePlanStep=function(e){billing.setPageTitle(o._("Enhance Plan")),billing.setSubTitle("enhance-plan"),billing.populateEnhancePlanSection(void 0,e,function(){(0,n.default)("#enhanceplan").show()})};billing.saveNextState=function(e){n.default.cookie.create("billingstate",e,30)};billing.callbacks={billingStepNumber:1,enhancePlanStepNumber:2,postLoad:function(){billing.setPageTitle(o._("Create Account in 3 Easy Steps")),billing.saveNextState("billing"),billing.showSpinners=!1,(0,n.default)("#billing-please-wait").show(),billing.populateAllSections(billing.chosenPlanId,billing.updatebiling,void 0,function(){g.default.contains(billing.productizedFeatures,n.default.cookie.read("signup_flow"))||billing.setSubTitle("create-account"),(0,n.default)(".billing #createaccount, .billing #enhanceplan, .billing #billing-section").show(),(0,n.default)("#billing-please-wait").hide(),(0,n.default)("#memberSignupForm #email").focus()})},createAccountNext:function(){},billingNext:function(){billing.submitPaymentNotLoggedIn()},postConfirmationLoaded:function(){billing.setPageTitle(o._("Start Using Hootsuite")),billing.setConfirmationBanner("thank-you")},confirmationEnhancePlan:function(){(0,n.default)("#billing-section").hide(),billing.loadEnhancePlanStep(void 0)}};billing.postLoadHook=function(){if(billing.memberLoggedIn){var e=n.default.cookie.read("billingstate");if(billing.billingHistory)billing.populateBillingHistorySection();else if(billing.updateBilling)billing.populateBillingSection(billing.chosenPlanId,billing.updateBilling),(0,n.default)(".billing #billing-section").show();else if(e!==null)switch(e){case"billing":billing.loadBillingStep(void 0);break;case"enhance":billing.loadEnhancePlanStep(void 0);break}else billing.ariaAcctValid?billing.populateEnhancePlanSection(billing.chosenPlanId,void 0,function(){(0,n.default)(".billing #enhanceplan").show()}):billing.populateBillingSection(billing.chosenPlanId,billing.updateBilling,void 0,function(){(0,n.default)(".billing #billing-section").show()})}else billing.callbacks.postLoad()};billing.ajaxSignUp=function(e){var t=(0,n.default)(".billing #createaccount"),i=(0,n.default)("#featuresForm").formValues(),l=(0,n.default)("#ccForm").formValues(),r=(0,n.default)("#memberSignupForm").serialize(),a=billing.currency.determined;(0,n.default)(".ajax-signup .formError").empty(),r+="&addHsuOption="+billing.addHsuOption,a&&(r+="&currency="+a),r+="&planBillingPeriod="+billing.billingPeriod+"&member%5BariaBillingPeriod%5D="+billing.billingPeriod,ajaxCall({type:"POST",url:"/ajax/member/ajax-signup",data:r,success:function(s){s.success=="1"?(s.output&&t.empty().html(s.output),n.default.isFunction(e)&&e(i,l),(0,n.default)("input[name=inSessionID]").val(s.ariaSessionCode),i=l=null,billing.memberLoggedIn=!0):(billing.showLoginBillingSection(),billing.removeThrobbers(),(0,n.default)("#memberSignupForm input[name='token']").val(s.token),s.error&&(s.errorCode==403&&I.doRedirect("/security/unusual-activity"),s.memberInvalid?((0,n.default)(".ajax-signup input[id=email]").siblings(".formError").html(s.error),billing.trackEvent(billing.trackingPrefix+".user_details","email_address_already_registered")):(0,n.default)(".ajax-signup .formError.generalError").html(s.error)),(0,n.default)("html, body").animate({scrollTop:(0,n.default)(".ajax-signup").offset().top},500))}},"qmNoAbort")};billing.autoSubmitCreateAccount=function(e,t){e?.stopPropagation(),(0,n.default)(".ajax-signup .formError").empty();var i=(0,n.default)(".ajax-signup input[id=email]").val(),l=(0,n.default)(".ajax-signup input[id=fullName]").val(),r=(0,n.default)(".ajax-signup input[id=password]").val(),a=!1,s=[];if(hs.util.isEmailValid(i)||((0,n.default)(".ajax-signup input[id=email]").siblings(".formError").html(o._("Please check e-mail address")),s.push("email"),a=!0),l===""&&((0,n.default)(".ajax-signup input[id=fullName]").siblings(".formError").html(o._("Name cannot be empty")),s.push("fullname"),a=!0),r===""?((0,n.default)(".ajax-signup input[id=password]").siblings(".formError").html(o._("Password cannot be empty")),s.push("password"),a=!0):(r.length<6||r.length>64)&&((0,n.default)(".ajax-signup input[id=password]").siblings(".formError").html(o._("Please enter 6 to 64 characters")),s.push("password"),a=!0),a)billing.trackEvent(billing.trackingPrefix+".user_details","invalid_user_details_entered",{value:s.join(", ")});else return billing.ajaxSignUp(t),!0;return billing.showLoginBillingSection(),billing.removeThrobbers(),(0,n.default)("html, body").animate({scrollTop:(0,n.default)(".ajax-signup").offset().top},500),!1};billing.populateAllSections=function(e,t,i,l){var r=(0,n.default)("._allSectionsAjax");billing.showSpinners&&r.html(billing.spinnerHtml()).show(),ajaxCall({type:"GET",url:"/ajax/billing/all-create-account-sections",data:"planId="+e+"&addHsuOption="+billing.addHsuOption,success:function(a){a.success=="1"?(a.output&&(r.empty().html(a.output),window.initSignupForm((0,n.default)("#memberSignupForm"),["input#password._passwordField","input#confirmPassword._confirmPasswordField"],function(){hs.isFeatureEnabled("SIGNUP_CAPTCHA")&&((0,n.default)("div#captchaContainer").appendTo("form#memberSignupForm"),(0,n.default)("div#captchaContainer").show())})),billing.checkCouponToken=a.checkCouponToken,billing.memberLoggedIn=a.isMemberLoggedIn,billing.showFreeTrial(),billing.showPaymentMethods(),billing.setSavePlanChangeButtonState(),billing.populateCountry(),billing.initPlanBillingPeriodSelectors(),billing.initPaymentType(),billing.updatePrice(),(0,n.default)("#ccForm").formValues(i),(0,n.default)("#billingStateContainer").formValues(i),n.default.isFunction(l)&&l()):(r.empty(),hs.statusObj.update(o._("Error retrieving create account forms."),"error",!0))}},"qmNoAbort")};billing.updateSeatsFeature=function(e){var t=(0,n.default)(this).data("sliderWidget"),i=t.segmentMax();hs.bubblePopup.isOpen()&&(hs.bubblePopup.close(),billing.setSavePlanChangeButtonState()),billing.checkSeatRequirement(t.value()),t.value()===i?(0,n.default)("._seatsFeatureAlert").attr("aria-hidden",!1).show():(0,n.default)("._seatsFeatureAlert").attr("aria-hidden",!0).hide();var l=(0,n.default)("#seatsFeature").find('input[name="seats"]');l.val(parseInt(t.value(),10)),billing.updatePrice(),e.type==="sliderValueUpdated"&&!e.initializing&&!e.mouseMoving&&billing.trackEvent(billing.trackingPrefix+".plan_features_section.additionalUsers","addon_value_changed",{value:e.value})};billing.initSliders=function(){var e;e=(0,n.default)("._sliderSeats"),e.length&&(e.on("sliderValueUpdated",billing.updateSeatsFeature),new re(e))};billing.initAddonTracking=function(){(0,n.default)(document).on("change.addonTracking","._featuresForm input[type=radio], ._featuresForm select, ._featuresForm input[type=checkbox]",function(e){var t=(0,n.default)(e.target),i=t.attr("name"),l="addon_value_changed",r=e.target.value;switch(i){case"analyticsPro":i="analytics_pro";break;case"publisherPro":i="publisher_pro";break;case"prioritySupport":i="hootcare";break;case"owly":i="custom_vanity_url";break;case"additionalSocialNetworks":i="additional_social_profiles";break;case"hsuSeats[]":i="enroll_in_hsu",r=(0,n.default)("#hsuSeatsFeature input:checked:enabled").length;break}billing.trackEvent(billing.trackingPrefix+".plan_features_section."+i,l,{value:r})})};billing.init=function(){se.default.on("frontend.logging",function(t,i,l,r){(0,ue.default)({method:"POST",url:"/ajax/error/frontend-logging",data:{level:t,category:i,message:l,additionalData:r}},"qm")}),billing.countryList.length&&!g.default.isEmpty(billing.stateList)&&billing.populateCountry(),(0,n.default)("._slider").length&&billing.initSliders(),billing.initAddonTracking(),(0,n.default)("._toggleAddOnsBtn").on("click",function(){(0,n.default)(this).toggleClass("x-active"),(0,n.default)("._toggleAddOnsContent").toggleClass("u-displayNoneWeak")}),billing.state=(0,n.default)("._mainContentArea").data("state")||"undefinedState",billing.trackingPrefix="web.billing."+billing.state,billing.initPlanBillingPeriodSelectors(),billing.initPaymentType();var e=(0,n.default)("#seatsFeature").find('input[name="seats"]').val();g.default.isUndefined(e)||billing.checkSeatRequirement(e),billing.updatePrice(),(0,n.default)("#seatUpperLimitErroMsg").find("._close").click(function(){(0,n.default)("#seatUpperLimitErroMsg").hide()}),q.initFeatureInfoPopup()};billing.checkSeatRequirement=function(e){e=parseInt(e,10);var t=!0,i=(0,n.default)("#seatsFeature").find('input[name="seats"]'),l=i.data(),r=parseInt(l.minimumRequired,10),a=parseInt(l.featureLimit,10);if(r>a)e>a&&((0,n.default)("#seatUpperLimitErroMsg").show(),i.val(a)),billing.manageSeats(),t=!1;else if(e>a)i.val(a),(0,n.default)("#seatUpperLimitErroMsg").show(),t=!1;else if(e<r){i.val(r);var s=(0,n.default)("._sliderSeats").data("sliderWidget");s!==void 0&&(s.stopDrag(),s.value(r)),billing.manageSeats(),t=!1}return t};billing.showBillingSection=function(){(0,n.default)("#billingSection").show(),(0,n.default)("#featuresSummary").show(),(0,n.default)("._featuresSection").hide()};billing.hideBillingSection=function(){(0,n.default)("#billingSection").hide(),(0,n.default)("#featuresSummary").hide(),(0,n.default)("._featuresSection").show()};billing._getIntValue=function(e){e.prop("tagName")==="SELECT"&&(e=e.find("option:selected"));var t=parseInt(e.val(),10);return e.length&&!isNaN(t)?t:0};billing.setFeatureSubtotal=function(e,t,i){var l={SEATS:["#seatsFeature ._subtotal","#seatsFeature ._numericPrice"],HSU_SEATS:["#hsuSeatsFeature ._subtotal","#hsuSeatsFeature ._numericPrice"],PRIORITY_SUPPORT:["#hootcareFeature ._subtotal","#hootcareFeature ._numericPrice"],PUBLISHER_PRO:["#publisherProFeature ._subtotal","#publisherProFeature ._numericPrice"],ANALYTICS_PRO:["#analyticsProFeature ._subtotal","#analyticsProFeature ._numericPrice"],OWLY_PRO:["#brandFeature ._subtotal","#brandFeature ._numericPrice"],MESSAGE_ARCHIVING:["#archiveFeature ._subtotal","#archiveFeature ._numericPrice"],ADDITIONAL_SOCIAL_NETWORKS:["#additionalSocialNetworkFeature ._subtotal","#additionalSocialNetworkFeature ._numericPrice"]},r=(0,n.default)(l[e][0]),a=(0,n.default)(l[e][1]);i?r.html(billing.getCurrencyAmountForDisplay(billing.roundCost(1*i))):r.html(billing.getCurrencyAmountForDisplay(billing.getCurrency.zero)),a.html(billing.getCurrencyAmountForDisplay(billing.roundCost(1*t)))};billing.getSelectedFeatures=function(){var e;return e={SEATS:this._getIntValue((0,n.default)('#seatsFeature input[name="seats"]')),HSU_SEATS:(0,n.default)("#hsuSeatsFeature input:checked:enabled").length,OWLY_PRO:(0,n.default)("#brandFeature").find('input[name="owly"]').prop("checked"),MESSAGE_ARCHIVING:this._getIntValue((0,n.default)('#archiveFeature select[name="messageArchiving"]')),ADDITIONAL_SOCIAL_NETWORKS:this._getIntValue((0,n.default)('#additionalSocialNetworkFeature select[name="additionalSocialNetworks"]'))},e.ANALYTICS_PRO=(0,n.default)("._feature_analyticsPro").find('input[name="analyticsPro"]').prop("checked")?1:0,g.default.each(e,function(t,i){billing.featureAmountOffsets[i]&&(e[i]+=billing.featureAmountOffsets[i])}),(0,n.default)("._feature_publisherPro").find('input[name="publisherPro"]').prop("checked")&&e[billing.features.SEATS]?e[billing.features.PUBLISHER_PRO]=e[billing.features.SEATS]-1:e[billing.features.PUBLISHER_PRO]=0,(0,n.default)("#hootcareFeature").find('input[name="prioritySupport"]').prop("checked")&&e[billing.features.SEATS]?e[billing.features.PRIORITY_SUPPORT]=e[billing.features.SEATS]-1:e[billing.features.PRIORITY_SUPPORT]=0,e};billing.updateFeaturePrices=function(e,t){var i,l,r,a={billingInterval:billing.billingPeriod};g.default.each(e,function(s,c){r=b.getPlanBaseValues(c).value,a.billingInterval===f.INTERVAL_YEARLY?(i=t[f.INTERVAL_YEARLY][c]/12,b.isTieredFeature(c)?l=b.getFeatureTier(c,s-r,{billingInterval:f.INTERVAL_YEARLY}).price/12:l=b.getFeatureCost(c,1,{billingInterval:f.INTERVAL_YEARLY})/12):(i=t[f.INTERVAL_MONTHLY][c],l=b.getFeatureCost(c,s+1,{billingInterval:f.INTERVAL_MONTHLY})-i),billing.setFeatureSubtotal(c,l,i)})};billing.featureAmountOffsets={SEATS:2,MESSAGE_ARCHIVING:1,ADDITIONAL_SOCIAL_NETWORKS:5};billing.showOnlySelectedDynamicFeatures=function(e){if(!!(0,n.default)("#dynamicFeatures").length){var t={SEATS:"#dynamicFeatures ._seats",PRIORITY_SUPPORT:"#dynamicFeatures ._hootcare",OWLY_PRO:"#dynamicFeatures ._owlyPro",OWLY_ENTERPRISE:"#dynamicFeatures ._owlyEnterprise"};g.default.each(t,function(i,l){e[l]-billing.featureAmountOffsets[l]?(0,n.default)(i).show():(0,n.default)(i).hide()})}};billing.updateFeaturePricingTotals=function(e,t,i){var l;if(e===billing.features.PUBLISHER_PRO?l=(0,n.default)("._planAddonPublisherPro"):e===billing.features.ANALYTICS_PRO&&(l=(0,n.default)("._planAddonAnalyticsPro")),g.default.contains(["create_pro_account","current_free_upgrade"],billing.state))if(billing.billingPeriod===f.INTERVAL_YEARLY){var r;b.isTieredFeature(e)?r=b.getFeatureTier(e,1,{billingInterval:f.INTERVAL_YEARLY}).price:r=b.getFeatureCost(e,1,{billingInterval:f.INTERVAL_YEARLY});var a=r/12;t.annualMonthlifiedPlanCost+=a,t.annualMonthlifiedTotalCost=t.annualMonthlifiedPlanCost,t.annualTotalCost=t.annualPlanCost+r}else{var s;b.isTieredFeature(e)?s=b.getFeatureTier(e,1,{billingInterval:f.INTERVAL_MONTHLY}).price:s=b.getFeatureCost(e,1,{billingInterval:f.INTERVAL_MONTHLY}),t.monthlyPlanCost+=s,t.monthlySubtotal=t.monthlyPlanCost,t.monthlyTotalCost=t.monthlyPlanCost}else if(billing.state==="account_feature_addons"){var c=i[billing.billingPeriod][e];billing.billingPeriod===f.INTERVAL_YEARLY&&(c=c/12),l.find("._subTotal").html(billing.getCurrencyAmountForDisplay(billing.roundCost(c)))}};billing.updatePrice=function(){if(!b.isDataLoaded()){b.fetchPricingData().then(g.default.bind(billing.updatePrice,billing)),billing.showOnlySelectedDynamicFeatures(billing.featureAmountOffsets);return}g.default.extend(b.pricingProfile,{currency:billing.currency.determined,billingInterval:billing.billingPeriod});var e=billing.getSelectedFeatures(),t={};t[f.INTERVAL_MONTHLY]=b.calculateFeaturePricing(e,{billingInterval:f.INTERVAL_MONTHLY}),t[f.INTERVAL_YEARLY]=b.calculateFeaturePricing(e,{billingInterval:f.INTERVAL_YEARLY}),billing.updateFeaturePrices(e,t),billing.showOnlySelectedDynamicFeatures(e);var i={};i.planCost=0,i.monthlySubtotal=0,i.grandTotal=0,i.totalCouponDiscount=0,i.totalTaxRate=(0,n.default)("#totalTaxRate").val(),i.monthlyPlanCost=b.getPlanCost({billingInterval:f.INTERVAL_MONTHLY}),i.monthlyFeatureSubtotal=g.default.reduce(t[f.INTERVAL_MONTHLY],function(N,V){return N+V},0),i.monthlyTotalCost=i.monthlyPlanCost+i.monthlyFeatureSubtotal,i.annualPlanCost=b.getPlanCost({billingInterval:f.INTERVAL_YEARLY}),i.annualMonthlifiedPlanCost=i.annualPlanCost/12,i.annualFeatureCost=g.default.reduce(t[f.INTERVAL_YEARLY],function(N,V){return N+V},0),i.annualTotalCost=i.annualPlanCost+i.annualFeatureCost,i.annualMonthlifiedFeatureSubtotal=i.annualFeatureCost/12,i.annualMonthlifiedTotalCost=i.annualMonthlifiedPlanCost+i.annualMonthlifiedFeatureSubtotal,i.monthlySubtotal=i.monthlyFeatureSubtotal+i.monthlyPlanCost;var l=n.default.cookie.read("signup_flow");g.default.contains(billing.productizedFeatures,l)&&billing.updateFeaturePricingTotals(l,i,t),billing.billingPeriod===f.INTERVAL_YEARLY?i.planCost=i.annualMonthlifiedPlanCost:i.planCost=i.monthlyPlanCost;var r=(0,n.default)("._totalCouponContainer"),a=r.find("._totalCoupons");if(t[billing.billingPeriod].HOOTSUITE_PRO=i.planCost,g.default.each(billing.activeCoupons,function(N){i.totalCouponDiscount+=b.calculateTotalCouponDiscount(i.planCost,t[billing.billingPeriod],N)}),i.totalCouponDiscount>0&&(r.show(),a.html("-"+billing.getCurrencyAmountForDisplay(billing.roundCost(i.totalCouponDiscount)))),i.monthlySubtotal-=i.totalCouponDiscount,billing.billingPeriod===f.INTERVAL_YEARLY){var s=i.totalCouponDiscount*12;i.grandTotal=i.annualTotalCost-s}else i.grandTotal=i.monthlyTotalCost-i.totalCouponDiscount+billing.getMonthlyAppsSubtotal();if(i.totalTaxRate){var c=i.grandTotal*i.totalTaxRate;i.grandTotal+=c,(0,n.default)("#totalTax").html(billing.getCurrencyAmountForDisplay(billing.roundCost(c))),(0,n.default)("#totalTax2").html(billing.getCurrencyAmountForDisplay(billing.roundCost(c)))}var d=(0,n.default)("#dynamicFeatures"),v=o._("Monthly sub-total"),C=d.find("._subtotalTitle"),L=d.find("._totalTitle"),M;if(billing.billingPeriod===f.INTERVAL_YEARLY){var y=o._("(save %s1)").replace("%s1",C.data("annualDiscount"));v+=' <span class="-highlighted">'+y+"</span>",L.html("<strong>"+o._("Annual total")+"</strong>"),M=" annually"}else L.html("<strong>"+o._("Monthly total")+"</strong>"),M=" monthly";C.html(v),(0,n.default)("#providedSeatsFeature ._planCost").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.planCost))),d.find("._totalCost").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.grandTotal))),(0,n.default)("#monthlySubTotal").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.monthlySubtotal))),(0,n.default)("#monthlySubTotal2").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.annualMonthlifiedTotalCost))),(0,n.default)("#totalCost").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.grandTotal))),(0,n.default)("#totalCost2").html(billing.getCurrencyAmountForDisplay(billing.roundCost(i.grandTotal)));var de=billing.getCurrencyAmountForDisplay(billing.roundCost(i.grandTotal)),pe=o._("%s1"+M).replace("%s1",de);(0,n.default)("._legalPricing").html(pe)};billing.switchToAnnual=function(){return(0,n.default)("._bundleSelector ._planSelectionAnnual").trigger({type:"click",excludeTracking:!0}),!1};billing.initPlanBillingPeriodSelectors=function(){var e;e=(0,n.default)("._bundleSelector"),e.on("click","._planSelection",function(t){var i,l=(0,n.default)(t.target).data("planId");i=e.find("._planBillingPeriod"),i.val(l),billing.updatePlanBillingPeriod(i[0]),e.find("._planSelection").removeClass("selected"),(0,n.default)(t.target).addClass("selected"),t.excludeTracking!==!0&&billing.trackEvent(billing.trackingPrefix+".billing_cycle","billing_cycle_clicked",{value:l.toLowerCase()})}),billing.state==="current_free_upgrade"&&billing.switchToAnnual()};billing.initPaymentType=function(){(0,n.default)('#ccForm input[name="paymentType"]').click(function(e){billing.trackEvent(billing.trackingPrefix+".payment_details","payment_method_clicked",{value:e.target.value})})};billing.showHistoryInvoice=function(e){var t=window.open(hs.c.rootUrl+"/show-history-invoice?id="+e,"Invoice","height=700,width=790,toolbar=no,menubar=yes,status=no,location=no,directories=no");window.focus&&t.focus()};billing.showPaidCampaign=function(e,t){var i=hs.c.rootUrl+"/show-paid-campaign?id="+e;t&&(i+="&viewPostProcessed=1");var l=window.open(i,"Invoice","height=700,width=800,toolbar=no,menubar=yes,status=no,location=no,directories=no");window.focus&&l.focus()};billing.manageSeats=function(){var e=(0,n.default)("#featuresForm input[name='planId']").val();ajaxCall({type:"GET",url:"/ajax/billing/billing-manage-seats?planId="+e+"&n="+(0,n.default)("#seatsFeature input[name='seats']").val(),success:function(t){var i;billing.setSavePlanChangeButtonState(!0),i=(0,n.default)("._sliderSeats"),i.length&&hs.bubblePopup.open(i,null,null,function(){hs.bubblePopup.setContent(t.output),(0,n.default)("._billingManageSeatAlert ._close").click(function(){hs.bubblePopup.close(),billing.setSavePlanChangeButtonState()})},{width:300,autoclose:!1})},error:function(){billing.setSavePlanChangeButtonState(),hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")};billing.cancelPayment=function(){return confirm("Are you sure you want to cancel this payment? Your account will be set back to Free plan!")&&(window.location=hs.c.rootUrl+"/member/cancel-payment"),!1};billing.addFeature=function(e,t,i,l,r){ajaxCall({type:"POST",url:"/ajax/billing/billing-change-feature",data:"featureId="+e+"&value="+t+"&itemId="+l,success:function(a){a.success=="1"?((0,n.default)("#featureAccessDeniedPopup").dialog("close"),r=r||o._("Added feature"),hs.statusObj.update(r,"success",!0),n.default.isFunction(i)&&i()):hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")};billing.deleteOrganization=function(e,t){ajaxCall({type:"DELETE",url:"/ajax/organization/delete?organizationId="+e,success:function(i){i.success=="1"?(hs.statusObj.update(o._("Deleted organization"),"info",!0),n.default.isFunction(t)&&t()):hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"qmNoAbort")};billing.focusCC=function(){(0,n.default)('#ccForm input[name="paymentType"][value="cc"]').attr("checked","checked")};billing.checkCCNum=function(e){var t=(0,n.default)(e),i=t.val(),l=t.closest("form").find("._ccNumError");i=i.replace(/[ -]/g,""),billing.testCCNum(i)?l.html(""):l.html(o._("Invalid Credit Card Number"))};billing.testCCNum=function(e){for(var t=!1,i=/^4\d{15}$/,l=/^5[1-5]\d{14}$/,r=/^3[4,7]\d{13}$/,a=/^6011\d{12}$/,s=/^(?:2131|1800|35\d{3})\d{11}$/,c=new Array(i,l,r,a,s),d=0;d<c.length;d++)if(e.match(c[d])){t=!0;break}return t};billing.validateCCExpiryDate=function(){var e=(0,n.default)("._ccExpiryDateError");e.html(""),billing.isCCExpiryDateValid()||e.html(o._("Credit Card date cannot be in the past"))};billing.isCCExpiryDateValid=function(){var e=parseInt((0,n.default)("#cc_exp_mm").val(),10),t=parseInt((0,n.default)("#cc_exp_yyyy").val(),10);if(!g.default.isNaN(e)&&!g.default.isNaN(t)){var i=new Date,l=i.getMonth()+1,r=i.getFullYear();if(e<l&&t===r)return!1}return!0};billing.checkCVV=function(e){var t=(0,n.default)(e),i=t.val(),l=t.closest("form").find("._cvvError");l.html(""),i.length>0&&(i.length<3||i.length>4||isNaN(i))&&l.html(o._("CVV code must be 3 or 4 digits"))};billing.populateHsuLink=function(e){e!=null&&(0,n.default)("span.hsulink").show()};billing.removeThrobbers=function(){hs.throbberMgrObj.remove("#ccForm span.btn-cmt"),hs.throbberMgrObj.remove("#ccForm span.btn-cta"),hs.throbberMgrObj.remove("#submitPaymentBtn"),hs.throbberMgrObj.remove("._submitSignup"),(0,n.default)("#submitPaymentBtn").removeClass("btn-cta-throbber")};billing.showBillingErrorMessages=function(e){var t=n.default.map(e,function(i){return'<li class="error">'+i+"</li>"}).join("");(0,n.default)("._billingErrorMessages").html(t).show()};billing.showLoginBillingSection=function(){(0,n.default)(".billing #createaccount, .billing #enhanceplan, .billing #billing-section").show(),this.showSpinners=!0,(0,n.default)("._loadingBillingTitle").show(),(0,n.default)("._waitLoadingMessageTitle, ._waitLoadingMessageDescription, #billing-please-wait").hide()};billing.hideLoginBillingSection=function(){(0,n.default)(".billing #createaccount, .billing #enhanceplan, .billing #billing-section").hide(),(0,n.default)("html, body").animate({scrollTop:0},"fast"),this.showSpinners=!1,(0,n.default)("._loadingBillingTitle").hide(),(0,n.default)("._waitLoadingMessageTitle, ._waitLoadingMessageDescription, #billing-please-wait").show()};billing.confirmationLoaded=function(e){if(e.errorMessages&&e.errorMessages.length>0){e.validationFailed&&(0,n.default)("#billingZipContainer").show(),e.errorTrackEvents&&e.errorTrackEvents.length>0&&n.default.map(e.errorTrackEvents,function(r){hs.trackEvent(r)});var t=(0,n.default)("._billingErrorMessages");t.length&&(billing.showBillingErrorMessages(e.errorMessages),billing.removeThrobbers(),billing.showLoginBillingSection(),(0,n.default)("html,body").animate({scrollTop:t.offset().top},500))}else if(e.success){var i=e,l=billing.readCookie("partner_pro_trial_billing_start");l==1?ajaxCall({type:"POST",url:"/ajax/member/partner-pro-trial-billing-complete",success:function(r){r.success=="1"&&billing.createCookie("partner_pro_trial_billing_start","",-1)},complete:function(){billing.doAddonsRedirect(i)||billing.doPostConfirmationCleanup(i)}},"qmNoAbort"):billing.doAddonsRedirect(i)||billing.doPostConfirmationCleanup(i)}};billing.doPostConfirmationCleanup=function(e){(0,n.default)("html, body").animate({scrollTop:0},"fast"),(0,n.default)("#ccForm").hide(),(0,n.default)("._payment").hide(),(0,n.default)("#ccSuccess").show(),(0,n.default)("._bundleSelector").hide(),billing.hidePaymentMethods(),n.default.isFunction(billing.postConfirmationLoadedCallback)&&billing.postConfirmationLoadedCallback(),billing.ariaAcctValid=1,billing.populateHsuLink(e.hsuData)};billing.doAddonsRedirect=function(e){if(!billing.signupPlanId)return!1;if(billing.signupPlanId===e.plans.free){hs.track("/ga/signup-complete/pro-upgrade");var t=I.parseQueryString(window.location.search);t.c?I.doRedirect("/billing"):I.doRedirect("/account-feature-addons?origin=billing_free_to_pro")}else hs.track("/ga/signup-complete/pro-immediate"),I.doRedirect("/account-feature-addons?origin=billing_pro_signup");return!0};billing.recordPaymentAction=function(){billing.ajaxPage};billing.recordBillingCancel=function(){billing.ajaxPage};billing.recordEnhancePlanCancel=function(){billing.ajaxPage};billing.checkCCForm=function(){var e=[],t=(0,n.default)("._billingForm"),i=t.find('input[name="paymentType"]:checked').val();if(i==="paypal")return!0;var l=(0,n.default)("._billingAddress"),r=l.find("._billingZip"),a,s,c,d,v,C,L;a=t.find("#cc_no").val(),s=t.find("#cc_exp_mm").val(),c=t.find("#cc_exp_yyyy").val(),d=t.find("#cvv").val(),v=l.find("._billingCountry").val(),C=r.val(),L=l.find("._billingState").val();var M=/^[\d\s]+$/,y={};return y.payment=[],y.address=[],(a.length<15||!a.match(M))&&(e.push(o._("Please enter a valid credit card number.")),y.payment.push("cc_number")),s===""&&(e.push(o._("Please choose credit card expiry month.")),y.payment.push("cc_month")),c===""&&(e.push(o._("Please choose credit card expiry year.")),y.payment.push("cc_year")),billing.isCCExpiryDateValid()||(e.push(o._("Please enter a valid credit card date.")),y.payment.push("cc_date")),(d.length<3||d.length>4||isNaN(d))&&(e.push(o._("Please enter a valid CVV.")),y.payment.push("cc_cvv")),v===""&&(e.push(o._("Please choose a Country.")),y.address.push("country")),L===""&&(e.push(o._("Please choose a State or Province.")),y.address.push("state_province")),(v==="US"||v==="CA")&&C===""&&(e.push(o._("Please enter a valid Zip/Postal code.")),y.address.push("zip_postal_code")),e.length>0?((0,n.default)("html, body").animate({scrollTop:(0,n.default)("#billingSection").offset().top},"fast"),y.payment.length&&billing.trackEvent(billing.trackingPrefix+".payment_details","invalid_payment_details_entered",{value:y.payment.join(", ")}),y.address.length&&billing.trackEvent(billing.trackingPrefix+".address_details","invalid_address_details_entered",{value:y.address.join(", ")}),billing.showBillingErrorMessages(e),!1):!0};billing.submitPayment=function(e){if(!(0,n.default)("#submitPaymentBtn").hasClass("btn-cta-throbber")){if((0,n.default)("._billingAddress ._billingZip").data("validated")===!1){billing.validationBlockedSignup();return}var t=(0,n.default)("._billingCountry"),i=(0,n.default)("._billingState"),l=(0,n.default)("._billingZip"),r=(0,n.default)("._addressValidated"),a=(0,n.default)("._billingForm").length;if(!(a&&!billing.checkCCForm())){(0,n.default)("#submitPaymentBtn").addClass("btn-cta-throbber"),hs.throbberMgrObj.add("#submitPaymentBtn"),billing.signupPlanId=parseInt(n.default.cookie.read("signup_plan_id"),10)||0,billing.createCookie("new_billing_period",billing.billingPeriod,1/24),billing.recordPaymentAction();var s={country:t.val(),state:i.val(),zip:l.val(),v:r.val()};ajaxCall({type:"POST",url:"/ajax/billing/billing-save-address",data:s,success:function(d){var v=d.success==1;if(e){e(v),v||billing.removeThrobbers();return}v?((0,n.default)("#addressError").html(""),(0,n.default)("#paypalRadio:checked").length>0?billing.startPaypal():e?e():((0,n.default)("#AriaPay").submit(),(0,n.default)("#featuresForm").length&&(0,n.default)("#featuresForm").submit())):(billing.removeThrobbers(),(0,n.default)("#addressError").html(o._("Please verify that you have selected a valid Country.")))},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later. Your credit card was not charged."),"error",!0)}},"q1");var c="Billing Signup Flow";(0,n.default)("#ccRadio:checked").length>0&&(c="Start Free Trial"),hs.trackEvent({category:c,action:t.val()+"/"+i.val(),label:l.val(),value:(0,n.default)("#authAttempts").val()})}}};billing.initializeBillingFormAction=function(){hs.env==="production"?n.default.getScript("https://secure.ariasystems.net/api/ariaCHD.js",function(){window.aria.environmentId="prod",window.aria.submitPayment()}):n.default.getScript("https://secure.future.stage.ariasystems.net/api/ariaCHD.js",function(e){window.aria.environmentId="future.stage",window.aria.submitPayment()})};billing.injectPciIframe=function(e){var t=document.getElementById("pciPayFrame"),i={language:hs.prefs.language,configMessage:{clientNumber:(e.clientNumber||0).toString(),collectionAmount:(e.appPrice||0).toString(),collectionGroupId:parseInt(e.collectionGroupId)||"",mode:e.ariaMode,sessionId:e.ariaSession},billingCountries:billing.countryList};oe.default.render(ae.default.createElement(ne,i),t)};billing.startPaypal=function(){ajaxCall({type:"GET",url:"/ajax/billing/billing-start-paypal",success:function(e){e.success=="1"?(billing.saveNextState("billing"),document.location.href=e.returnUrl+e.token):hs.statusObj.update(o._("An error occurred while processing your request, please try again later. Your PayPal account was not charged."),"error",!0)},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later. Your PayPal account was not charged."),"error",!0)}},"qmNoAbort")};billing.populateCountry=function(){var e=(0,n.default)("._billingCountry");e.length<1||(e.find("option").length<=0&&e.append((0,n.default)("<option/>").attr("value","").html(o._("Select Country"))).val(""),(0,n.default)(billing.countryList).each(function(t,i){e.append((0,n.default)("<option/>").attr("value",i[0]).html(i[1]))}),e.val(e.attr("currval")),e.off("change").on("change",billing.countryChanged),billing.countryChanged(null))};billing.countryChanged=function(e){var t=(0,n.default)("._billingCountry"),i=(0,n.default)("._billingState"),l=i.closest("p").find("label");t.val()=="US"?l.html(o._("State")):t.val()=="CA"?l.html(o._("Province")):l.html(o._("State/Province"));var r;return billing.stateList[t.val()]?(r=(0,n.default)('<select class="_billingState"/>'),n.default.each(billing.stateList[t.val()],function(a,s){r.addClass("-select").append((0,n.default)("<option/>").attr("value",s[0]).html(s[1]))})):r=(0,n.default)('<input type="text" class="_billingState -text" />'),i.length>0&&r.attr("name",i.attr("name")).attr("id",i.attr("id")).val(i.val()),i.replaceWith(r),t.val()!==""&&((0,n.default)("#billingStateContainer").show(),t.val()==="US"||t.val()==="CA"?(0,n.default)("#billingZipContainer").show():(0,n.default)("#billingZipContainer").hide()),e&&e.type==="change"&&billing.trackEvent(billing.trackingPrefix+".address_details","country_selected",{value:t.val()}),!0};billing.showCvvPopup=function(){open("https://secure.ariasystems.net/webclients/HootSuitePay/whatisCVV.php","displayWindow","top=40,left=50,width=480,height=200,scroll=auto"),hs.trackEvent({category:"Billing Signup Flow",action:"Why CVV"})};billing.submitCoupon=function(){(0,n.default)("._submitCoupon").hasClass("btn-cta-throbber")||((0,n.default)("._submitCoupon").addClass("btn-cta-throbber"),hs.throbberMgrObj.add("._submitCoupon",'<span class="btn-ts">'+o.c.LOADING+"</span>"),(0,n.default)("#couponForm").submit())};billing.getAriaSessionInfo=function(){ajaxCall({type:"GET",url:"/ajax/billing/billing-get-aria-session-info",success:function(e){e.success=="1"?e.isAriaSessionValid?(billing.initializeBillingFormAction(),(0,n.default)('input[name="inSessionID"]').val(e.ariaSession),(0,n.default)('input[name="mode"]').val(e.ariaMode),(0,n.default)('input[name="client_no"]').val(e.clientNumber),e.ccSuffix&&(0,n.default)("#cc_no").val("XXXXXXXXXXXX"+e.ccSuffix),e.ccExpireMonth&&(0,n.default)("#cc_exp_mm").val(e.ccExpireMonth),e.ccExpireYear&&(0,n.default)("#cc_exp_yyyy").val(e.ccExpireYear),e.billingCountry&&((0,n.default)("._billingCountry").val(e.billingCountry),billing.countryChanged(null),e.billingState&&(0,n.default)("._billingState").val(e.billingState)),e.billingZip&&(0,n.default)("._billingZip").val(e.billingZip),(0,n.default)(".disabled").removeAttr("disabled").removeClass("disabled"),(0,n.default)(".fieldLoader").hide(),(0,n.default)("._billingCountry").on("change",billing.countryChanged),(0,n.default)("#submitPaymentBtn").bind("click",function(){return billing.submitPayment(),!1})):((0,n.default)("#ccForm").hide(),(0,n.default)("#footer").hide(),(0,n.default)("#invalidAriaSession").show()):((0,n.default)("#ccForm").hide(),(0,n.default)("#footer").hide(),(0,n.default)("#invalidAriaSession").show())},error:function(){(0,n.default)("#ccForm").hide(),(0,n.default)("#footer").hide(),(0,n.default)("#invalidAriaSession").show()}},"q1")};billing.readCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),l=0;l<i.length;l++){for(var r=i[l];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(t)===0)return r.substring(t.length,r.length)}return null};billing.createCookie=function(e,t,i){var l;if(i){var r=new Date;r.setTime(r.getTime()+i*24*60*60*1e3),l="; expires="+r.toGMTString()}else l="";document.cookie=e+"="+t+l+"; path=/"};billing.updatePlanBillingPeriod=function(e){var t=e.value;billing.billingPeriod=t,billing.updatePrice();var i=(0,n.default)("div._grandfatherYearlyNotification"),l;t=="YEARLY"?((0,n.default)("div._billingTotalsMonthly").hide(),(0,n.default)("div._billingTotalsYearly").show(),i.show(),l=(0,n.default)("#totalCost2").text()+" annually"):(billing.billingPeriod="MONTHLY",(0,n.default)("div._billingTotalsMonthly").show(),(0,n.default)("div._billingTotalsYearly").hide(),i.hide(),l=(0,n.default)("#totalCost").text()+" monthly");var r=o._(l);(0,n.default)("._legalPricing").html(r)};billing.switchProBillingPeriod=function(e){ajaxCall({type:"POST",url:"/ajax/billing/switch-pro-billing-period",data:"billingPeriod="+billing.billingPeriod,success:function(t){t.success!="1"&&(billing.removeThrobbers(),hs.statusObj.update(o._("An error occurred while setting your billing interval. Select 'Enhance Your Plan' to verify the correct billing interval is set, and update if necessary."),"error",!0)),parent.location=e},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later. Your credit card was not charged."),"error",!0)}},"q1")};billing.initChangePlanTypePopup=function(){(0,n.default)("._upgradeDowngradeLinks, ._changePlanTypePopup").on("click","._downgradeToFree",function(){I.recordAction("billingPageDowngradeClick");var e=1;q.downgradePlan(e)})};billing.validationBlockedSignup=function(){billing.trackEvent(billing.trackingPrefix+".address_details","validation_blocked_signup",{value:"country: "+(0,n.default)("._billingCountry").val()+", province: "+(0,n.default)("._billingState").val()+", postalCode: "+(0,n.default)("._billingZip").val()})};billing.getMonthlyAppsSubtotal=function(){return Number((0,n.default)("._monthlyAppsTotal").val())||0};var ce=billing;window.plans=window.plans||{};var u=window.plans;u.switchToTeamsPricingToken=u.switchToTeamsPricingToken||"";u.setTeamsPricingToken=function(e){return this.switchToTeamsPricingToken=e||"",this.switchToTeamsPricingToken};u.getTeamsPricingToken=function(){return this.switchToTeamsPricingToken};var A={onFeatureTipShow:function(e){var t="",i,l;t=A.getFeatureClass((0,h.default)(this).get(0).className),i=(0,h.default)(e.target),l="._featureTooltip",i.is(l)||(i=i.closest(l)),i.next("._featureContent").attr("aria-hidden","false"),u.featureInfoTimeout&&clearTimeout(u.featureInfoTimeout),A.showFeatureHighlight(t,i)},onFeatureTipHide:function(e){var t,i;t=A.getFeatureClass((0,h.default)(this).get(0).className),i=(0,h.default)(e.target),i.next("._featureContent").attr("aria-hidden","true"),u.featureInfoTimeout&&clearTimeout(u.featureInfoTimeout),u.featureInfoTimeout=setTimeout(function(){A.hideFeatureHighlight(t,i)},200)},getFeatureClass:function(e){var t=/_feature_([^\s]+)/.exec(e);return t&&t.length>1?t[1]:null},showFeatureHighlight:function(e,t){var i=t.next("._featureContent");if(!(!i.length&&!e)){var l=(0,h.default)("#featureInfoPopup").length?(0,h.default)("#featureInfoPopup"):(0,h.default)('<div id="featureInfoPopup" style="display: none;"></div>'),r;i.length&&(r=i.html(),r+='<span class="arrow left" />'),l.html(r),r.length?setTimeout(function(){(0,h.default)("#featureInfoPopup").length||l.appendTo("body");var a=t.offset().top-l.outerHeight(!0)/2+10,s=t.offset().left+t.outerWidth(!0);s+l.outerWidth(!0)>(0,h.default)(window).width()&&(s-=100),l.css({top:a,left:s,position:"absolute"}).fadeIn(100)},1):l.fadeOut(100)}},hideFeatureHighlight:function(){(0,h.default)("#featureInfoPopup").fadeOut(100)}};u.initFeatureInfoPopup=function(){var e="._featureTooltip";(0,h.default)(document).on("hover, focus",e,A.onFeatureTipShow).on("mouseleave",e,A.onFeatureTipHide).on("blur, focusout",e,A.onFeatureTipHide).on("mouseenter","#featureInfoPopup",function(){u.featureInfoTimeout&&clearTimeout(u.featureInfoTimeout)}).on("mouseleave","#featureInfoPopup",function(){u.featureInfoTimeout&&clearTimeout(u.featureInfoTimeout),u.featureInfoTimeout=setTimeout(function(){A.hideFeatureHighlight()},200)})};u.startFeatureFreeTrial=function(e,t){ajaxCall({url:"/ajax/member/start-feature-free-trial?featureId="+e,success:function(i){i.success==1?(h.default.isFunction(t)&&t(),hs.statusObj.update(o._("Free trial started"),"success",!0)):hs.statusObj.update(o._("Sorry, you are not eligible to start a free trial for this feature."),"error",!0)}},"q1")};u.downgradePlan=function(e){hs.statusObj.update(o._("Checking feature usage..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/downgrade-plan?planId="+e,success:function(t){if(hs.statusObj.reset(),t.loggedOut&&(window.location=hs.c.rootUrl+"/login"),t.invalidPlan&&(window.location=hs.c.rootUrl),t.downgradeAnnualPlan){var i=confirm(o._("Your account will be downgraded once your billing cycle ends on %s. Do you wish to continue?").replace("%s",t.accountExpiration));i&&ajaxCall({type:"POST",url:"/ajax/member/downgrade-annual-billing?planId="+e,success:function(l){hs.statusObj.reset(),l.loggedOut&&(window.location=hs.c.rootUrl+"/login"),l.invalidPlan&&(window.location=hs.c.rootUrl),l.downgradeSuccess?(hs.statusObj.update(o._("Your account will be downgraded on %s").replace("%s",l.accountExpiration),"success",!0),location.reload(!1)):hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")}u.numAllowedSocialNetworksForFreePlan=t.numAllowedSocialNetworksForFreePlan},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")};u.forceDowngradeToFree=function(){var e=o._("Are you sure you want to downgrade to a Free account? Doing so will immediately remove all Custom Analytics Reports, all Team Members and all but %s of your Social Profiles."),t=confirm(e.replace("%s",u.numAllowedSocialNetworksForFreePlan));t&&(hs.statusObj.update(o._("Plan downgrade in progress..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/force-downgrade-to-free",success:function(i){hs.statusObj.reset(),i.loggedOut&&(window.location=hs.c.rootUrl+"/login"),i.success&&u.save(1)},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1"))};u.initDowngradePlanPopup=function(){var e=(0,h.default)("._downgradePlanFancyBox");(0,h.default)("#changePlanActionButtons ._continue").click(function(){return u.save(e.find("#planChangeContent").attr("newPlanId")),!1}),(0,h.default)("#changePlanActionButtons ._forceDowngrade").click(function(){return u.forceDowngradeToFree(),!1}),(0,h.default)("#changePlanSection ._removeFeature").click(function(){var t=(0,h.default)(this).closest("._featureSection").attr("featurecode"),i=e.find("#planChangeContent").attr("newPlanId"),l=function(){u.downgradePlan(i)},r=(0,h.default)(this).closest("._featureSection").attr("featuredata");if(t=="ORGANIZATIONS"){var a=r;ce.deleteOrganization(a,l)}return!1}),(0,h.default)("#changePlanSectionErrorMsg").hide()};u.save=function(e){(0,h.default)('._changePlan [name="planId"]').val(e),(0,h.default)("._changePlan").submit()};u.enterprise=u.enterprise?u.enterprise:{};u.enterprise.init=function(){u.initFeatureInfoPopup()};u.showTeamsPricingPopup=function(){(0,ge.logInfo)("billing","teams-pricing-popup called",{memberId:window.hs.memberId,url:window.location.toString()}),ajaxCall({type:"POST",url:"/ajax/member/teams-pricing-popup",success:function(e){if(hs.statusObj.reset(),e.loggedOut&&(window.location=hs.c.rootUrl+"/login"),e.output){var t=(0,h.default)("._fancyTeamsPricingPopup");t.html(e.output)}},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")};u.switchToTeamsPricing=function(){hs.statusObj.update(o._("Switching pricing plan..."),"info"),ajaxCall({type:"POST",url:"/ajax/member/start-teams-pricing?token="+u.switchToTeamsPricingToken,success:function(e){e.loggedOut&&(window.location=hs.c.rootUrl+"/login"),e.success?window.location.reload(!0):hs.statusObj.reset()},error:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)},abort:function(){hs.statusObj.update(o._("An error occurred while processing your request, please try again later"),"error",!0)}},"q1")};var q=u;export{q as a};
//# sourceMappingURL=chunk-KK5IMJJP.js.map
