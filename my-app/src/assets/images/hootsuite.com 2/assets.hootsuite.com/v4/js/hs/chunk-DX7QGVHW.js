import{a as u}from"./chunk-5M6X2SDJ.js";import{b as c,f as l}from"./chunk-62VJZGPO.js";var i,o,h,p=c(()=>{i=l(u()),o={defaultMsInterval:1e4,ajaxReportURL:"/ajax/error/report-js-error",consecutiveReportMax:3,nonConsecutiveReportMax:10,consecutiveReport:0,nonConsecutiveReport:0,stackMaxLines:30,buffer:function(t){this.isLoggable(t)&&(t=this._truncateStack(t),t=this._addElapsedTime(t),this.errorsData.push(t))},isAlreadyLogged:function(t){return i.default.some(this.errorsData,function(e){return e.errorMsg===t.errorMsg})},isLoggable:function(t){if(!i.default.isObject(t)||!Object.prototype.hasOwnProperty.call(t,"errorMsg")||!i.default.isString(t.errorMsg))return!1;var e=t.errorMsg;if(!Object.prototype.hasOwnProperty.call(t,"file")||!i.default.isString(t.file))return!1;var r=t.file;if(this.isAlreadyLogged(t)||/^Expected identifier/.test(e)||/^Invalid character/.test(e)||/Permission denied to access property/.test(e)||e==":"||/AMCore is not defined/.test(e)||e=="Error loading script"||/NS_ERROR_/.test(e)||/^Unspecified error/.test(e)||/NPObject/.test(e)||e==="Automation server can't create object"||/^Script error\.*$/i.test(e)||/^Could not complete the operation due to error 8070000c/.test(e)||e=="Invalid procedure call or argument")return!1;var s="https://comet.hootsuite.com/comet?callback";return!(e.indexOf(s)!==-1||r.indexOf(s)!==-1||!/^http/.test(r)||r.indexOf("http://www.balkannews24.info")===0)},init:function(t){var e=this;return this.delay=t||this.defaultMsInterval,this.errorsData=[],window.setTimeout(function(){e.report(),e.start()},4e3),this},start:function(){var t=this;this.intervalID=window.setInterval(function(){t.report()},this.delay)},stop:function(){window.clearInterval(this.intervalID)},report:function(){if(this.errorsData.length){var t={jsErrors:this.errorsData};this.errorsData=[],ajaxCall({type:"POST",url:this.ajaxReportURL,data:t},"qm"),(++this.nonConsecutiveReport>=this.nonConsecutiveReportMax||++this.consecutiveReport>=this.consecutiveReportMax)&&this.stop()}else this.consecutiveReport=0},_truncateStack:function(t){return i.default.isString(t.stack)&&(t.stack=t.stack.split(`
`).splice(0,this.stackMaxLines).join(`
`)),t},_addElapsedTime:function(t){return i.default.isObject(window.performance)&&i.default.isFunction(window.performance.now)&&(t.elapsedTime=Math.floor(window.performance.now()/1e3)),t}};o.init();window.onerror=function(t,e,r,s,n){var f=hs.memberId&&hs.isReportJsErrors;if(hs.isFeatureEnabled("LOG_JS_ERRORS_LANDING_PAGES")&&(hs.memberId||(f=!0)),f&&t){var a={errorMsg:t,file:e,lineNumber:r,hash:window.location.hash,jsVersion:hs.c.staticVersion,timeStamp:new Date().getTime()};i.default.isNumber(s)&&(a.colNumber=s),i.default.isObject(n)&&i.default.isString(n.stack)&&(a.stack=n.stack),o.buffer(a)}return!1};h=o});export{h as a,p as b};
//# sourceMappingURL=chunk-DX7QGVHW.js.map
