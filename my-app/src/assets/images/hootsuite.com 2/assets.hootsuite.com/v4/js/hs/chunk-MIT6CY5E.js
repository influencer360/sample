import{d as F}from"./chunk-3PMCMRGN.js";import{Ha as Ht,U as Je,Ua as Dt,Va as Bt,W as Ut,Za as Qe,db as Gt,ib as Y,kb as et,ma as Xe,o as Ze,p as Ft,qa as Ee}from"./chunk-KPNUX65N.js";import{d as Ke,e as Ye,f as ye,g as Ve,h as Ce,l as ke,m as pe,r as re}from"./chunk-7SULV3BY.js";import{c as jt}from"./chunk-G2AGVLYW.js";import{b as fe,c as Lt}from"./chunk-BRMHBYYL.js";import{h as k,i as $e}from"./chunk-H7SY6GNV.js";import{b as Rt}from"./chunk-527EYBTV.js";import{a as Te}from"./chunk-JMUJZFCQ.js";import{g as C,h as We}from"./chunk-WBPTDCVX.js";import{a as S,b as Ge}from"./chunk-5D3K6GYC.js";import{a as Nt}from"./chunk-JRESDEDW.js";import{b as Ie}from"./chunk-INSRYSWJ.js";import{a as ze,b as g,c as qe}from"./chunk-RBJWJTV5.js";import{a as Be}from"./chunk-5M6X2SDJ.js";import{c as G,f as w}from"./chunk-62VJZGPO.js";var nt=G((Xt,tt)=>{tt.exports={render:function(s){var e,t="",r=Array.prototype.join;function a(){t+=r.call(arguments,"")}var n=null,i=null,l,o=s&&s.message?s.message:{};if(_.has(o,"-_-")&&o["-_-"].action&&_.has(o["-_-"].action,"verb")&&o["-_-"].action.verb!="posted"&&o["-_-"].action.verb!="scheduled"){var o=o["-_-"],d;switch(o.action.actor.username?d=o.action.actor.username:o.action.actor.name?d=o.action.actor.name:d="Someone in your network",o.action.actor.id?l="<button class='_username _userInfoPopup _userInfoPopupHere _standardized link' title='"+d+"' userid='"+o.action.actor.id+"'>"+d+"</button>":l=d,o.action.verb){case"replied":n=translation._("%s commented on this").replace("%s",l),i="comment";break;case"liked":n=translation._("%s liked this").replace("%s",l),i="unLike";break;case"shared":n=translation._("%s retweeted").replace("%s",l),i="retweet";break;default:n=translation._("%s interacted with this").replace("%s",l),i="notFavorite";break}}return!!n&&!!i&&(t+=`
  <div class="-messageMetadata">
    <div class="-attribution">
      <span class="icon-19 `+((e=i)==null?"":e)+`"></span>
      `+((e=n)==null?"":e)+`
    </div>
  </div>
`),t+=`
`,t}}});var at=G((Qt,st)=>{st.exports={render:function(s){var e,t="",r=Array.prototype.join;function a(){t+=r.call(arguments,"")}return t+='<div id="response_'+((e=s.teamId)==null?"":e)+"_"+((e=s.socialNetworkType)==null?"":e)+"_"+((e=stream.box.formatMessageIdForHtml(s.originalSnMessageId))==null?"":e)+`" class="messageResponse _response">
  <div class="tasks">
    <div class="task _header">
      <span class="icon-19 reply"></span>
      <span class="taskDate _relativeTime" data-timestamp="`+((e=s.timestamp)==null?"":e)+'" title="'+((e=s.formattedDate)==null?"":e)+`"></span>
      <div class="taskAssignment">`+((e=translation._("Replied to by"))==null?"":e)+" "+((e=hsEjs.cleanPage(s.responseMemberName))==null?"":e)+` </div>
      `,s.responseSnMessage&&(t+=`
        <div class="taskMessage _oldMessages">
          "`+((e=s.responseSnMessage)==null?"":e)+`"
        </div>
      `),t+=`
    </div>
  </div>
</div>
`,t}}});var it=G((en,rt)=>{rt.exports={render:function(s){var e,t="",r=Array.prototype.join;function a(){t+=r.call(arguments,"")}var n=s.tmplData,i=s.attributionTemplate;if(t+=`
<div
  `,n.htmlId&&(t+=`
    id="`+((e=n.htmlId)==null?"":e)+`"
  `),t+=`

  class="_message message `,n.moreMessageClasses&&(t+=(e=n.moreMessageClasses)==null?"":e),t+=" ",n.isNewMessage&&(t+="newMessage"),t+=" ",n.hasAssignment?t+="hasAssignment _hasAssignment":n.hasResponse&&(t+=" hasResponse _hasResponse"),t+=" ",n.hasResolvedAssignment&&(t+="resolved _resolved"),t+=`"

  `,n.socialNetworkId&&(t+=`
    snid="`+((e=n.socialNetworkId)==null?"":e)+`"
  `),t+=`

  `,n.externalUserId&&(t+=`
    externaluserid="`+((e=hsEjs.cleanPage(n.externalUserId))==null?"":e)+`"
  `),t+=`

  `,n.realname&&(t+=`
    realname="`+((e=hsEjs.cleanPage(n.realname))==null?"":e)+`"
  `),t+=`

  `,n.externalPostId&&(t+=`
    externalpostid="`+((e=hsEjs.cleanPage(n.externalPostId))==null?"":e)+`"
  `),t+=`

  `,n.recipientId&&(t+=`
    recipientId="`+((e=hsEjs.cleanPage(n.recipientId))==null?"":e)+`"
  `),t+=`

  `,n.mostRecentPostId&&(t+=`
    mostrecentpostid="`+((e=hsEjs.cleanPage(n.mostRecentPostId))==null?"":e)+`"
  `),t+=`

  `,n.kind&&(t+=`
    kind="`+((e=hsEjs.cleanPage(n.kind))==null?"":e)+`"
  `),t+=`

  `,n.canDeleteComment&&(t+=`
    usercandelete="`+((e=hsEjs.cleanPage(n.canDeleteComment))==null?"":e)+`"
  `),t+=`

  `,n.isCommentable&&(t+=`
    iscommentable="`+((e=n.isCommentable?1:0)==null?"":e)+`"
  `),t+=`

  `,n.externalThreadId&&(t+=`
    externalthreadid="`+((e=hsEjs.cleanPage(n.externalThreadId))==null?"":e)+`"
  `),t+=`

  `,n.isPromotable&&(t+=`
     ispromotable="`+((e=n.isPromotable?1:0)==null?"":e)+`"
  `),t+=`
>

  <!-- Metadata Attribution -->
  `+((e=i.render({message:n}))==null?"":e)+`

  <div class="-messageBody">

    <span class="_moreMenu actions"><span class="icon-13 arrowDown"></span></span>

      <a
        href="#"
        class="networkAvatarLink `,n.externalUserId&&(t+="_userInfoPopupHere _userInfoDropdown"),t+=`"

        `,n.realname&&(t+=`
          title="`+((e=hsEjs.cleanPage(n.realname))==null?"":e)+`"
        `),t+=`

        `,n.externalUserId&&(t+=`
          userid="`+((e=hsEjs.cleanPage(n.externalUserId))==null?"":e)+`"
        `),t+=`
      >
      </a>
      <img
        class="networkAvatar"

        `,n.avatarHref?(t+=`
          `,n.lazyLoadingOff?t+=`
            src="`+((e=n.avatarHref)==null?"":e)+`"
          `:t+=`
            lazysrc="`+((e=n.avatarHref)==null?"":e)+`"
          `,t+=`
          onerror="this.onerror=null;this.src='https://assets.hootsuite.com/v2/images/dashboard/avatars/member-default-100.8e9a4075.png';"
        `):t+=`
          src="https://assets.hootsuite.com/v2/images/dashboard/avatars/member-default-100.8e9a4075.png"
        `,t+=`
      />
    <div class="networkName">

      <a href="#" class="_username _userInfoPopup `,n.externalUserIdInfoLookup&&(t+="_userInfoPopupHere"),t+=`"

        `,n.realname&&(t+=`
          title="`+((e=hsEjs.cleanPage(n.realname))==null?"":e)+`"
        `),t+=`

        `,n.externalUserId&&(t+=`
          userid="`+((e=hsEjs.cleanPage(n.externalUserIdInfoLookup))==null?"":e)+`"
        `),t+=`
      >
        `+((e=hsEjs.cleanPage(n.realname))==null?"":e)+`
      </a>

      `,n.recipientName&&n.recipientId&&(t+=` &#9656;
      <a href="#" class="_username _userInfoPopup `,n.recipientIdInfoLookup&&(t+="_userInfoPopupHere"),t+=`"
        `,n.recipientId&&(t+=`
          userid="`+((e=hsEjs.cleanPage(n.recipientIdInfoLookup))==null?"":e)+`"
        `),t+=`
      >
        `,n.recipientName&&(t+=`
          `+((e=hsEjs.cleanPage(n.recipientName))==null?"":e)+`
        `),t+=`
      </a>
      `),t+=`

    </div>

      `,n.attachedImageCount&&(t+=`
      <span class="nameAction"> added `+((e=n.attachedImageCount)==null?"":e)+" image"+((e=n.attachedImageCount>1?"s":"")==null?"":e)+`</span>
      `),t+=`

      <div class="messageDetails">


        `,n.isNewMessage&&(t+=`
          <span class="icon-13 status"></span>
        `),t+=`

        `,n.latitude&&n.longitude&&(t+=`
          <a href="#" class="_tLocationInfo locale icon-13" rel="`+((e=n.latitude)==null?"":e)+"|"+((e=n.longitude)==null?"":e)+"|"+((e=n.locationName)==null?"":e)+`"></a>
        `),t+=`

        `,_.has(n,"-_-")&&!!n["-_-"].metadata.url?t+=`
          <a class="postTime clearLeft _postTime _postPermalink" href="`+((e=n["-_-"].metadata.url)==null?"":e)+'" target="_blank" datetime="'+((e=new Date(n.postTimestamp).format("isoDateTime"))==null?"":e)+`">
            `+((e=hsEjs.cleanPage(n.postDateText))==null?"":e)+`
          </a>
        `:(t+=`
          `,n.postPermalink?(t+=`
            <a class="postTime clearLeft _postTime _postPermalink" href="`+((e=n.postPermalink)==null?"":e)+'" target="_blank" ',n.postTimestamp&&(t+='datetime="'+((e=new Date(n.postTimestamp).format("isoDateTime"))==null?"":e)+'"'),t+=`>
          `):(t+=`
            <span class="postTime clearLeft _postTime" `,n.postTimestamp&&(t+='datetime="'+((e=new Date(n.postTimestamp).format("isoDateTime"))==null?"":e)+'"'),t+=`>
          `),t+=`
          `,n.postDateText&&(t+=`
            `+((e=hsEjs.cleanPage(n.postDateText))==null?"":e)+`
          `),t+=`
          `,n.postPermalink?t+=`
            </a>
          `:t+=`
            </span>
          `,t+=`
        `),t+=`



        `,n.permissionLabel){t+=`
          <span class="permissionLabel">
            `;var l="{{permission}}";t+=`
            `,n.permissionLabel==="Public"&&(l='<span class="_jsTooltip" title="'+translation._("Visible to anyone (public on the web).")+'">{{permission}}</span>'),t+=`
            - `+((e=l.replace("{{permission}}",hsEjs.cleanPage(n.permissionLabel)))==null?"":e)+`
          </span>
        `}if(t+=`

      </div>

    `,n.targetHref&&n.targetLabel&&(t+=`
      <div class="messageContent messageSource">On <a href="`+((e=hsEjs.cleanPage(n.targetHref))==null?"":e)+'" target="_blank">'+((e=hsEjs.cleanPage(n.targetLabel))==null?"":e)+`</a>&#39;s wall:</div>
    `),t+=`

    `,(n.content&&n.content.length||typeof title<"u"&&title.length)&&(t+=`

      <p class="_baseTweetText _postText messageContent">
        `+((e=n.content)==null?"":e)+`
      </p>
    `),t+=`
    `,n.attachments&&n.attachments.length){t+=`
      `;for(var o=0;o<n.attachments.length;o++)t+=`

      <div class="_postAttachment postAttachment `,n.attachments[o].attachmentBox&&(t+="x-attachmentBox"),t+=`">

        `+((e=n.attachments[o].attachmentRenderedHtml)==null?"":e)+`

        `,n.attachments[o].attachmentTitle&&(t+=`
        <div class="_postAttachmentTitle title">
          `,n.attachments[o].attachmentHref&&(t+='<a href="'+((e=n.attachments[o].attachmentHref)==null?"":e)+'" target="_blank">'),t+=`
            `+((e=hsEjs.cleanPage(n.attachments[o].attachmentTitle))==null?"":e)+`
            `,n.attachments[o].attachmentHref&&(t+="</a>"),t+=`
        </div>
        `),t+=`

        `,n.attachments[o].attachmentCaption&&(t+=`
        <div class="caption">`+((e=hsEjs.cleanPage(n.attachments[o].attachmentCaption))==null?"":e)+`</div>
        `),t+=`

        `,n.attachments[o].attachmentDescription&&(t+=`
        <div class="description">`+((e=hsEjs.cleanPage(n.attachments[o].attachmentDescription))==null?"":e)+`</div>
        `),t+=`

        `,n.attachments[o].attachmentExtraRenderedHtml&&(t+=`
        `+((e=n.attachments[o].attachmentExtraRenderedHtml)==null?"":e)+`
        `),t+=`

      </div>
      `;t+=`
    `}t+=`

  </div>

  `;var d=!!n.numLikes&&n.numLikes>0;t+=`
  `;var c=!!n.numComments&&n.numComments>0;if(t+=`
  `,n.isCommentable&&!n.hackIsCommentPost?(t+=`

    `,(typeof n.hideComments>"u"||!n.hideComments)&&(t+=`
    `),t+=`

  `):n.hackIsCommentPost&&(t+=`
    `,n.IsCommentPost?(t+=`
      <div class="_postComments messageComments">
        <div class="_commentList commentList" style="display:none;"></div>

        `,!n.noCommentBox&&n.canComment==!0&&(t+=`
          <div class="_commentEntry commentBox comment">
            <div class="commentEntry">
              <div class="ui-input ui-textarea">
                <textarea class="_commentEntryArea clean" data-placeholder="`+((e=translation._("Add a reply..."))==null?"":e)+`" title="Press enter &#8629; to submit"></textarea>
              </div>
            </div>
            <div class="_btns btns btns-right" style="display:none;">
              <a class="btn-cmt _submitComment submitComment"
                 data-tracking-action="replied_comment"
              >
                `+((e=translation._("Add"))==null?"":e)+`
              </a>
            </div>
          </div>
        `),t+=`
      </div>
    `):(t+=`
      `,(d||c)&&(t+=`
        <div class="messageComments">
        </div>
      `),t+=`
    `),t+=`
  `),t+=`

</div>
`,n.displayCommentsBeneath&&n.isCommentable){var p=n.commentsBeneathPlaceholder||translation._("Add a comment...");t+=`
  `;var u=n.withinReplyWindow,v=7;t+=`
  `,u?(t+=`
    <div class="message commentBox _commentEntryBeneath">
      <div class="_commentEntry commentEntry comment">
        `,n.noCommentBox||(t+=`
        <div class="message-comments">
          <div class="ui-input ui-textarea">
            <textarea class="_commentEntryArea clean" data-placeholder="`+((e=p)==null?"":e)+`" title='`+((e=translation._("Press (Shift+Enter) to submit"))==null?"":e)+`'></textarea>
          </div>
        </div>
        <div class="_btns btns btns-right" style="display:none;">
          <a class="btn-cmt _submitComment submitComment"
            data-tracking-action="replied_comment">
            `+((e=translation._("Add"))==null?"":e)+`
          </a>
        </div>
        `),t+=`
      </div>
    </div>
  `):t+=`
    <div class="message commentBox _commentEntryBeneath" style="padding-left: 7px" >
      <div class="warning-banner-container">
        <div class="warning-icon-container">
          <div class="warning-banner-icon">
            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
              <path d="M19.02,16.91 L11.1,2.06 C10.63,1.18 9.36,1.18 8.89,2.06 L0.98,16.91 C0.53,17.74 1.13,18.75 2.08,18.75 L17.91,18.75 C18.86,18.75 19.46,17.74 19.02,16.91 Z M10,16.25 C9.31,16.25 8.75,15.69 8.75,15 C8.75,14.31 9.31,13.75 10,13.75 C10.69,13.75 11.25,14.31 11.25,15 C11.25,15.69 10.69,16.25 10,16.25 Z M11.25,12.5 L8.75,12.5 L8.75,7.5 L11.25,7.5 L11.25,12.5 Z"></path>
            </svg>
          </div>
        </div>
        <div class="warning-banner-text">
          <p style="margin-bottom: 4px"><strong>`+((e=translation._("You can no longer reply to this person"))==null?"":e)+`</strong></p>
          <p>`+((e=translation._("Facebook does not allow replies after "+v+" days since the last message was received."))==null?"":e)+`</p>
        </div>
      </div>
    </div>
  `,t+=`
`}return t+=`
`,t}}});var lt=G((tn,ot)=>{ot.exports={render:function(s){var e,t="",r=Array.prototype.join;function a(){t+=r.call(arguments,"")}return hs.isFeatureEnabled("NGE_18348_SHARE_SEARCH_STREAM_MIGRATION")?t+=`
  <div id="stream-migration-share-stream-popup"></div>
`:t+=`
  <div class="ui-dialog-section">
    <input type="hidden" class="_teamId"/>
    <p>`+((e=translation._("Choose a team to share this stream with"))==null?"":e)+`</p>
    <div class="_teamSelectorWidgetBtn btn-dropdown">
      <span class="_dropdownbtntext">`+((e=translation._("Select a team"))==null?"":e)+`&hellip;</span><span class="icon-13 expanded"></span>
    </div>
  </div>
  <div class="btns-right">
    <a class="btn-del _cancel" data-tracking-origin="web.dashboard.streams.share_stream" data-tracking-action="cancel_share">`+((e=translation._("Cancel"))==null?"":e)+`</a>
    <a class="btn-cmt _submit" data-tracking-origin="web.dashboard.streams.share_stream" data-tracking-action="share_stream">`+((e=translation._("Share"))==null?"":e)+`</a>
  </div>
`,t+=`
`,t}}});var pt=G(ie=>{"use strict";var qt=ie&&ie.__makeTemplateObject||function(s,e){return Object.defineProperty?Object.defineProperty(s,"raw",{value:e}):s.raw=e,s};Object.defineProperty(ie,"__esModule",{value:!0});ie.default=function(s){var e=s.html;return e(ft||(ft=qt([`
  <path
    d="M10,0 C4.5,0 0,4.5 0,10 C0,15.5 4.5,20 10,20 C15.5,20 20,15.5 20,10 C20,4.5 15.5,0 10,0 Z M8.75,14.25 L4.5,10 L6.25,8.25 L8.75,10.75 L13.75,5.75 L15.5,7.5 L8.75,14.25 Z"
  />
`],[`
  <path
    d="M10,0 C4.5,0 0,4.5 0,10 C0,15.5 4.5,20 10,20 C15.5,20 20,15.5 20,10 C20,4.5 15.5,0 10,0 Z M8.75,14.25 L4.5,10 L6.25,8.25 L8.75,10.75 L13.75,5.75 L15.5,7.5 L8.75,14.25 Z"
  />
`])))};var ft});var bt=G((vn,vt)=>{"use strict";Ut();var ht=w(Bt()),_t=w(pt()),gt=w(Ht()),Se=Te(),Ae=Ze(),Oe=ze(),$t=jt(),ee=class extends Se.Component{constructor(e){super(e),this.state={showHover:!1},this._onClick=this._onClick.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseOver=this._onMouseOver.bind(this)}UNSAFE_componentWillReceiveProps(){this.setState({showHover:!1})}_onClick(){this.props.onClick(this.props.socialNetworkId,this.props.subscribed)}_onMouseOut(){this.setState({showHover:!1})}_onMouseOver(){this.props.subscribed&&this.setState({showHover:!0})}render(){var e=ht.default,t=Oe._("Subscribe");return this.props.subscribed&&(e=_t.default,t=Oe._("Subscribed")),this.state.showHover&&(t=Oe._("Unsubscribe")),Se.createElement($t,{btnStyle:"standard",className:"-subscribeButton",onClick:this._onClick,onMouseOut:this._onMouseOut,onMouseOver:this._onMouseOver},Se.createElement(Je,{fill:"#000",size:14,glyph:this.state.showHover?gt.default:e})," ",t)}};ee.displayName="SubscribeButton";ee.propTypes={onClick:Ae.func,socialNetworkId:Ae.string,subscribed:Ae.bool};ee.defaultProps={subscribed:!1};vt.exports=ee});var wt=G((bn,Kt)=>{Kt.exports={}});var Tt=G((wn,It)=>{"use strict";var te=Te(),_e=Ze(),Yt=Dt(),Vt=bt(),Zt=Ie(),oe=ze(),{USER:Jt}=Ee();wt();var le=class extends te.Component{constructor(e){super(e);var t=Object.keys(e.subscriptionStates).map(r=>{var a=e.socialNetworks[r];return{isLoading:!1,avatar:a.avatar,label:a.username,value:r,selected:e.subscriptionStates[r]}});this.state={currentSubscriptions:t},this._onToggle=this._onToggle.bind(this),this._onClick=this._onClick.bind(this),this._toggleIsLoading=this._toggleIsLoading.bind(this),this._toggleSubscribedState=this._toggleSubscribedState.bind(this),this._updateSubscribedState=this._updateSubscribedState.bind(this),this._renderButton=this._renderButton.bind(this),this._renderSubscribers=this._renderSubscribers.bind(this)}_toggleIsLoading(e){this.setState({currentSubscriptions:this.state.currentSubscriptions.map(t=>(t.value===e&&(t.isLoading=!t.isLoading),t))})}_toggleSubscribedState(e,t){var r=t?oe._("Subscription successful."):oe._("Unsubscription successful.");Zt.emit("status:success",{message:r,autoHide:!0}),this.setState({currentSubscriptions:this.state.currentSubscriptions.map(a=>(a.value===e&&(a.selected=t,a.isLoading=!1),a))})}_updateSubscribedState(e,t){this._toggleIsLoading(e),this.props.flux.getActions(Jt).toggleSubscription(e,this.props.profileId,t).then(()=>this._toggleSubscribedState(e,t)).catch(()=>this._toggleIsLoading(e))}_onClick(e,t){this._updateSubscribedState(e,!t)}_onToggle(e,t,r){this._updateSubscribedState(t,r)}_renderSubscribers(){var e=oe._("Subscribed with %1$s"),t=this.state.currentSubscriptions.filter(r=>r.selected===!0).map(r=>r.label).join(", ");if(t.length>0)return te.createElement("div",{className:"-subscribers"},e.replace("%1$s",t))}_renderButton(){return this.state.currentSubscriptions.length===1?te.createElement(Vt,{onClick:this._onClick,socialNetworkId:this.state.currentSubscriptions[0].value,subscribed:this.state.currentSubscriptions[0].selected}):te.createElement("div",null,this._renderSubscribers(),te.createElement(Yt,{className:"-multipleSubscribeButton",items:this.state.currentSubscriptions,menuType:"MultiMenu",onToggle:this._onToggle,subTitle:oe._("Channels to subscribe with")},oe._("Manage Subscriptions")))}render(){return te.createElement("div",{className:"rc-SubscriptionManagerContainer"},this._renderButton())}};le.displayName="SubscriptionManagerContainer";le.propTypes={flux:_e.object,profileId:_e.string,socialNetworks:_e.object,subscriptionStates:_e.object};It.exports=le});var f=w(Nt()),E=w(Be()),Q=w(Ie());qe();Lt();$e();var dt=w(Xe());We();var A=w(Qe()),O=w(Ee());var he=w(nt());var ct=w(Gt());Ge();var ut=w(at()),xe=w(it()),mt=w(lt()),Wt="composer.open",h={};h.formatTweetText=ye;h.formatTweet=function(s){var e=s.entities,t=s.full_text?s.full_text:s.text,r=s.full_text?s.full_text:s.text;if(!e||typeof e.urls>"u")return h.formatTweetText(t);var a=[],n=typeof e.user_mentions<"u",i="<a href='[[url]]' target='_blank'  rel='noopener noreferrer'>[[text]]</a>",l='<button class="_quickSearchPopup hash" title="[[text]]">#[[text]]</button>',o="@<button class='_userInfoPopup _twitter' title='[[text]]'>[[text]]</button>",d=function(D,j,J,be){var B="";switch(D){case"url":case"media":J=J.replace(/('|")/g," "),B=i,B=B.replace(/\[\[url\]\]/g,J).replace(/\[\[text\]\]/g,j);break;case"hash":B=l.replace(/\[\[text\]\]/g,j);break;case"user":B=o.replace(/\[\[text\]\]/g,j);break;default:break}return B},c=0,p=function(D){return E.default.map(D,function(j){return j-c})},u,v;if(n&&e.user_mentions.length){var I=e.user_mentions[0],b=t.substring(I.indices[0],I.indices[1]);b.toLowerCase()!=="@"+I.screen_name.toLowerCase()&&(c=6+I.screen_name.length);for(var x=0;x<e.user_mentions.length;x++)u=e.user_mentions[x],c=re(t,u,x),a.push({type:"user",indices:p(u.indices),data:u.screen_name})}if(typeof e.urls<"u")for(var T=0;T<e.urls.length;T++)u=e.urls[T],c=re(t,u,T),v=u.display_url||u.url,a.push({type:"url",indices:p(u.indices),data:u.url.indexOf("http")===0?u.url:"http://"+u.url,text:v});if(typeof e.media<"u")for(var M=0;M<e.media.length;M++)u=e.media[M],c=re(t,u,M),v=u.display_url||u.url,a.push({type:"media",indices:p(u.indices),data:u.url,text:v,media:u.media_url});if(typeof e.hashtags<"u")for(var U=0;U<e.hashtags.length;U++)u=e.hashtags[U],c=re(t,u,U),a.push({type:"hash",indices:p(u.indices),data:u.text});if(a.length)a=a.sort(function(D,j){return j.indices[0]-D.indices[0]});else return t=t.replace(/\n/g,"<br/>"),Ce(t);for(var W=[],z=0,V=a.length;z<V;z++){u=a[z];var Z=u.indices,de=r.substring(Z[0],Z[1]),ne=parseInt(Z[0],10),ve=parseInt(Z[1],10),L=t.substring(0,ne),ce=t.substring(ve),q="";u.type=="media"?q=d(u.type,u.text,u.data,u.media):u.type=="url"?q=d(u.type,u.text,u.data):q=d(u.type,u.data,de),E.default.contains(W,ne)||(W.push(ne),t=L+q+ce)}return t=t.replace(/\n/g,"<br/>"),n?t:Ce(t)};h.formatTweetSource=function(s){return!s||!s.length?"":s.toLowerCase()=="web"?"Web":(s.indexOf("&amp;")>-1&&(s=Ke(s)),s.indexOf("&lt;")>-1&&(s=Ye(s)),s=s.replace(/<[^>]+>/g,""),s)};h.generateResponseHtml=function(s){h.generateResponseHtml.template=h.generateResponseHtml.template?h.generateResponseHtml.template:ut.default;let e=(0,ct.default)(s.responseDate).utc(),t=e.unix(),r=e.tz(hs.timezoneName).format("MMM DD, YYYY, h:mma"),a=E.default.escape(s.responseSnMessage);return h.generateResponseHtml.template.render({...s,timestamp:t,formattedDate:r,responseSnMessage:a})};h.generateAttachmentHtmlPhotoOrVideo=function(s,e){if(s.type)switch(s.type){case"photo":return h.generateAttachmentHtmlPhoto(s,e);case"video":return h.generateAttachmentHtmlVideo(s,e);default:break}};h.generateAttachmentHtmlPhoto=function(s,e){var t={tmplData:s,totalItemsBeingRendered:e},r=k.getEjs("stream/attachment/photo").render(t);return r};h.generateAttachmentHtmlCheckin=function(s){var e={tmplData:s},t=k.getEjs("stream/attachment/checkin").render(e);return t};h.generateAttachmentHtmlPhotoAlbum=function(s){var e={tmplData:s},t=k.getEjs("stream/attachment/photoalbum").render(e);return t};h.generateAttachmentHtmlBlockquote=function(s){var e={tmplData:s,nl2br:pe},t=k.getEjs("stream/attachment/blockquote").render(e);return t};h.generateAttachmentHtmlVideo=function(s,e){var t={tmplData:s,totalItemsBeingRendered:e},r=k.getEjs("stream/attachment/video").render(t);return r};h.generateMessagesHtml=function(s){var e=s.box.socialNetworkType,t="";switch(e.toLowerCase()){case"facebook":t=h.initFacebookMessagesHtml(s);break;default:e=e.replace(/(.)(.*)/,function(a,n,i){return n+i.toLowerCase()});var r="generateMessagesHtml"+e;return h[r](s)}return t};h.generateMessagesHtmlFacebook=function(s){var e=[];f.default.each(s.messages,function(r,a){var n="";a.response&&(n+=h.generateResponseHtml(a.response));var i=window.stream.facebook.massageMessageDatum(a,s);if(i.tmplData.contentType&&i.tmplData.content){var l=i.tmplData.contentType,o=i.tmplData.content;l==="htmlish"?o=pe(o):l!=="html"&&(o=pe(ye(o))),i.tmplData.content=o}i.isFacebook=!0,i.renderComments=!1;var d=f.default.extend(!0,i,{attributionTemplate:he.default,tmplData:{lazyLoadingOff:!0}}),c=xe.default.render(d);n+=c;var p=(0,f.default)(dt.default.parse((0,f.default)("<div>").html(n).get(0))).children();if(p.data("fav",a.favorited),p.data("userId",a.actorType+"|"+a.uid),p.data("timestamp",a.created),p.data("can-be-shared",a.canBeShared),E.default.has(a,"-_-")&&E.default.has(a["-_-"],"entities")&&!!a["-_-"].entities){var u=a["-_-"].entities.reduce(function(v,I){return["image","video","gif"].indexOf(I.type)!==-1&&v.push(I),v},[]);p.data("attached-images",zt(u))}Array.prototype.push.apply(e,p.get()),p.data("msgData",a["-_-"]),p.data("commentsData",a.commentsData)});var t=(0,f.default)(e);return window.stream.facebook.initCommentTextarea(t.find("._commentEntryArea")),t};h.initFacebookMessagesHtml=s=>s.messages.map(e=>{let t=window.stream.facebook.massageMessageDatum(e,s);t.isFacebook=!0,t.renderComments=!0,Object.assign(t.tmplData,{lazyLoadingOff:!0});let r=document.createElement("div");return F("facebookPrivateMessage",{containerElement:r,id:t.htmlId,data:t,assignment:e.assignment,response:e.response}),r});var zt=function(s){return!E.default.isArray(s)||!s.length?s:E.default.map(s,function(e){var t={src:e.url};return e.source&&(t.linkSource=e.source,t.linkHref=e.sourceUrl?e.sourceUrl:null,t.linkText="View on "+e.source.charAt(0).toUpperCase()+e.source.slice(1)),t})};h.bindShareStreamPopupFunctionality=function(s,e,t){e.find("._teamSelectorWidgetBtn").hsDropdownTeams("populate",E.default.values(t.teams),{change:function(r){e.find("._teamId").val(r.teamId)}}),e.find("._submit").click(function(){var r=e.find("._teamId").val();if(!r){hs.statusObj.update(g._("Please select a team to share this stream"),"warning",!0);return}ajaxCall({url:"/ajax/stream/save-team-stream",data:{teamId:r,boxId:s},success:function(a){if(a.success){hs.statusObj.update(g._("Success!"),"success",!0),e.dialog("close");var n=k.getEjs("stream/streamhelper/sharedstreamrow"),i=(0,f.default)("#boxAddStream"),l=i.find("._sharedList");l.append(n.render({...a.teamSharedBox,u_escape:E.default.escape}))}else hs.statusObj.update(a.errorMsg,"error",!0)}},"qm")}).end().find("._cancel").click(function(){e.dialog("close")})};h.showSharingPopup=function(s,e){hs.statusObj.update(g.c.LOADING,"info"),ajaxCall({type:"GET",url:"/ajax/stream/get-sharable-teams",data:{socialNetworkId:e},success:function(t){if(hs.statusObj.reset(),t.success){var r={modal:!0,resizable:!1,draggable:!0,closeOnEscape:!0,width:500,title:g._("Share stream with team"),position:["center",100],content:mt.default.render({})},a=f.default.dialogFactory.create("shareStreamPopup",r);S.isFeatureEnabled("NGE_18348_SHARE_SEARCH_STREAM_MIGRATION")?F("shareStreamPopup",{}).then(()=>{h.bindShareStreamPopupFunctionality(s,a,t)}):h.bindShareStreamPopupFunctionality(s,a,t)}else hs.statusObj.update(t.errorMsg,"warning",!0,5e3)}},"q1")};h.showMessageTagPopup=function(s){var e=(0,f.default)(s),t,r,a;t=e.attr("externaluserid"),r=e.attr("externalpostid"),a=e.closest("._box").attr("data-boxid");var n=function(){var i={externalMessageId:r,externalUserId:t,boxId:a,productArea:"streams"};A.default.getActions(O.MESSAGE).addMessageTag(i,"q1").then(function(l){hs.bubblePopup.setContent(l.output),h.initializeMessageTagPopup(l.organizations)})};hs.bubblePopup.open(e,null,null,n)};h.initializeMessageTagPopup=function(s){var e=(0,f.default)("#messageTagPopup"),t=[];f.default.each(s,function(n,i){t.push(i)});var r=null;if(t.length==1)e.find("._orgId").val(t[0].organizationId).end().find("._tagInputContainer").show().end().find("._submitAddMessageTagForm").removeClass("disabled"),h.messageTag.createTagSelector(e);else if(t.length>1){e.find("._orgPickerContainer").show(),r=new hs.DropdownList({data:{items:t},adapter:{title:"name"},change:function(n,i){e.find("._hasDefaultData").length?e.find("._hasDefaultData").remove():e.find('input[name="messageTags"]').val(""),e.find("._orgPickerContainer ._orgPicker ._dropDownTxt").text(n.name).end().find("._orgId").val(n.organizationId),h.messageTag.createTagSelector(e),e.find("._submitAddMessageTagForm").removeClass("disabled")}}),e.find("._orgPicker").bind("click",function(){r.hsDropdownList("open",e.find("._orgPicker"))});var a=n=>{(n.originalEvent.code==="Space"||n.originalEvent.code==="Enter")&&r.hsDropdownList("open",e.find("._orgPicker"))};e.find("._orgPicker").bind("keydown",a),e.find("._hasDefaultData").length&&r.hsDropdownList("selectElement",e.find("._hasDefaultData").attr("orgId"),"organizationId")}e.find("._cancel").click(function(){hs.bubblePopup.close(),C.trackCustom("web.dashboard.message_tagging_inbound.add_tags_popup","message_tagging_inbound_add_tags_popup_closed")}).end().find("._submitAddMessageTagForm").click(function(){if((0,f.default)(this).is(".disabled"))return!1;var n=e.find("._tagWidgetContainer").hsTagSelector("tags"),i=[];f.default.each(n,function(o,d){i.push(d.value)}),i=E.default.values(i).length?JSON.stringify(i):"",e.find('input[name="messageTags"]').val(i);var l=fe.serializeObject(e.find("#addMessageTagForm"));if(l.assignmentId){Q.default.emit("message:tag:add:popup:close",l);return}A.default.getActions(O.MESSAGE).saveMessageTag(l,"qm").then(function(o){o.success?(hs.statusObj.update(g._("Message Tags have been updated"),"info",!0),C.trackCustom("web.dashboard.message_tagging_inbound.add_tags_popup","message_tagging_inbound_message_tagged")):hs.statusObj.update(g._("Unable to tag the message","error",!0)),hs.bubblePopup.close()})})};h.messageTag={};h.messageTag.createTagSelector=function(s){var e=s.find("._orgId").val(),t={orgId:e};A.default.getActions(O.MESSAGE).getMessageTag(t,"qm").then(function(n){if(C.trackCustom("web.dashboard.message_tagging_inbound.add_tags_popup","message_tagging_inbound_organization_selected"),n.tags){var i=s.find("._tagWidgetContainer");n.tags.forEach(function(d){d.id&&d.name&&(d.value=d.id,d.label=d.name)}),i.hsTagSelector({tags:n.tags,canCreate:n.isManageTags,canDelete:n.isManageTags,create:a,src:"streams"});var l=s.find('input[name="messageTags"]').val();if(l){var o=JSON.parse(l);i.hsTagSelector("addTags",o,"value")}s.find("._tagInputContainer").show(),r()}});var r=function(){var n=(0,f.default)("#bubblePopPane");if(!!n.length){var i=parseInt(n.css("left")),l=parseInt(n.css("top")),o=n.outerHeight(),d=n.outerWidth(),c=(0,f.default)(window),p=c.height(),u=c.width(),v=0,I=u-d;i<v?i=v:i>I&&(i=I);var b=0,x=p-o;l<b?l=b:l>x&&(l=x),n.css({left:i,top:l})}},a=function(n,i){var l=s.find("._orgId").val(),o={tagName:n,orgId:l};A.default.getActions(O.MESSAGE).createMessageTag(o,"qm").then(function(d){d&&d.tag&&(d.tag.id&&d.tag.name&&(d.tag.value=d.tag.id,d.tag.label=d.tag.name),C.trackCustom("web.dashboard.message_tagging_inbound.add_tags_popup","message_tagging_inbound_tag_created"),i(d.tag))})}};h.showPromotedMessage=function(s){if(!!s){var e=(0,f.default)("#"+s);e.addClass("promoted")}};h.updateRespondedMessage=function(s,e){var t=h.formatMessageIdForHtml(s).replace(/(\$)/g,"\\$1"),r=(0,f.default)("div[id$=_"+t+"], div[commentid$="+t+"]");if(!r.length)return!1;var a=r.filter("._message, ._comment"),n=r.filter("._response"),i=!!r.closest("._assignmentMessage").length;if(!i){n.length&&n.remove();var l=h.generateResponseHtml(e);a.addClass("hasResponse _hasResponse").before(l),window.updateRelativeTimes(a.prev())}return!0};h.toggleFilter=function(s,e){var t=(0,f.default)("#box"+s),r=t.find("._boxFilter"),a=r.find("._followersRangeSlider"),n=h.toggleFilter,i=function(){r.find("._values :input").each(function(){(0,f.default)(this).val("")}),a.length&&a.slider("value",0),window.stream.stream.removeFilter(s)};if(r.is(":visible"))r.hide(),i(),window.stream.stream.resetFilter(s),window.stream.stream.saveFilters(s);else if(i(),t.find("._body").scrollTop(0),a.length&&a.slider({max:5e3,min:0,value:0,slide:function(o,d){var c=d.value;d.value===5e3?c="5000+":c=d.value-d.value%250+"+",(0,f.default)(d.handle).closest("._followers").find("input").val(c).trigger("keyup")}}),r.show().find(":input").unbind(),r.find("select._filters").bind("change",function(){var o=(0,f.default)(this).val();if(!r.find("._"+o).length){(0,f.default)(this).val("keyword");return}r.find("._values > span").hide().end().find("._"+o).show().find(":input").focus(),o==="followers"&&a.show(),i(),window.stream.stream.saveFilters(s)}),r.find("._values :input").bind("keyup",function(){n.r_timeout&&clearTimeout(n.r_timeout),n.r_timeout=setTimeout(function(){window.stream.stream.applyFilter(s),window.stream.stream.saveFilters(s)},500)}).end().find("._values span:visible :input").focus(),!E.default.isEmpty(e)){var l="";e.followers&&a.length&&(l="followers",E.default.defer(function(){a.slider("option","value",parseInt(e.followers,10))})),e.keyword&&(l="keyword"),r.find("select._filters").val(l).trigger("change"),r.find("._values :input").each(function(){l==="followers"?(0,f.default)(this).val(e[l]+"+"):(0,f.default)(this).val(e[l])}),window.stream.stream.applyFilter(s)}};h.parseMessageId=function(s){var e=(0,f.default)("#"+s.replace(/(\$)/g,"\\$1"));if(e.length&&e.attr("externalpostid"))return e.attr("externalpostid");var t=s.indexOf("_"),r=s.indexOf("_",t+1),a=r,n;r<0&&(a=t),n=s.substr(a+1);var i=n.split("-");return n=i[0],n};h.conversationPopupMessageOptionsButtonHandler=function(s,e){var t=(0,f.default)(s),r="FACEBOOK";if(t.hasClass("_more")){var a=t.closest("._conversationPopupOptions").find("._moreMenu");if(a.is(":visible"))a.hide();else{a.css("margin-top","").show();var n=a.outerHeight(),i=a.offset().top,l=(0,f.default)(window).height();i+n>l-10&&a.css("margin-top",(i+n-l+10)*-1+"px")}}else if(t.hasClass("_sendToEmail")){var o=e.find("._username").eq(0).attr("title"),d=f.default.trim(e.find("._baseTweetText").text().replace(/\s+/g," ")),c=e.find("._postAttachment ._attachmentItem").attr("href")||e.find("._postAttachment .attachedLink").attr("href")||"",p=f.default.trim(e.find("._postAttachment ._postAttachmentTitle").text().replace(/\s+/g," "))||"",u=f.default.trim(e.find("._postAttachment p").text().replace(/\s+/g," "))||"",v=e.find(".date").attr("href")||e.find("._postTime").attr("href");h.sendToEmail(d,v,r,o,{link:c,linkTitle:p,text:u})}else t.hasClass("_addMessageTags")&&h.showMessageTagPopup(e);return!1};h.messageOptionsButtonHandler=function(s,e){typeof e=="string"&&(e=(0,f.default)("#"+e));var t=e.attr("id"),r=h.parseMessageId(t),a=(0,f.default)(s),n=e.closest("._box"),i=n.box("get","type"),l=n.box("get","isAssignable"),o=e.data("impressionId"),d=n.data()||{},c=e.prev("._assignment").data("teamid")||null,p,u=d.box&&d.box.socialNetworkType?d.box.socialNetworkType:null,v=e.find("._username._twitter").length,I=v?"TWITTER":void 0,b=e.data("socialNetworkId")||n.box("get","socialNetworkId");!b&&e.closest(document.documentElement).length&&(b=e.siblings(".message-original").data("socialNetworkId"));var x="",T={},M,U,W,z,V;if(a.is("._retweet, ._reply, ._dm, ._replyAll, ._sendToEmail")&&(p=e.find("._username").eq(0).attr("title"),(l=="1"||l)&&a.is("._reply, ._dm, ._replyAll"))){et.init(c,u,r,p);var Z=function(P){var N=null;f.default.each(P.assignments,function(H,y){return y.notes.length&&(N=g._("There was a change in assignment for this message: ")+y.notes[0].systemNote),!1}),f.default.each(P.responses,function(H,y){return y.responseMemberName&&(N=g._("This message has been responded to by ")+y.responseMemberName),!1}),N&&hs.statusObj.update(N,"warning",!0)};z=null,e.is("._hasAssignment")&&(z=e.prev("._assignment").find("._latestNoteDate").val()),window.assignment.checkMessagesForAssignment("",u,[r],Z,z)}if(a.hasClass("_retweet")){var de=function(){if(u=="TWITTER"){if(!b){var P=E.default.keys(hs.socialNetworksKeyedByType[u]);if(P.length>0)b=hs.socialNetworksKeyedByType[u][P[0]].socialNetworkId;else{hs.statusObj.update(g._("No valid Twitter profiles to retweet from"),"error",!0);return}}var N="socialNetworkId="+b+"&messageId="+r;ajaxCall({type:"POST",url:"/ajax/network/get-message",data:N,success:function(X){if(X.success=="1"){let De=X.viewData.message;var ae="";switch(u){case"TWITTER":ae=ae+"RT @"+De.author.name+": ";break}ae=ae+f.default.trim(De.text.replace(/<&#91;^>&#93;*>/g,""))+hs.memberAutoInitial+" ",window.newActionTweet(b,ae,"","",void 0,void 0,void 0,I)}else hs.statusObj.update(X.error,"error",!0)},error:function(){hs.statusObj.update(g.c.ERROR_GENERIC,"error",!0)}},"qm")}else{var H=e.find("._baseTweetText").clone(),y;H.find("a:not(._previewLink, ._bubblePopup, ._userInfoPopup, ._quickSearchPopup)").each(function(){(0,f.default)(this).attr("href").indexOf("http://t.co/")===0&&(0,f.default)(this).text().indexOf("ow.ly/")!==0&&(0,f.default)(this).text((0,f.default)(this).attr("href"))});var K=(0,f.default)("<p>").html(H.html().replace(/<br>|<br\/>/g,`
`)).text();y=f.default.trim(K.replace(/<&#91;^>&#93;*>/g,"")),H.find("a:not(._bubblePopup, ._userInfoPopup)").each(function(){var X=(0,f.default)(this).text();/^(http:\/\/|https:\/\/|#|@)/.test(X)||(y=y.replace(X,"http://"+(0,f.default)(this).text()))}),e.data("attachedMediaUrl")&&(y=y+" "+e.data("attachedMediaUrl")),y=p+": "+y+hs.memberAutoInitial+" ",window.newActionTweet(b,y,"","","",void 0,void 0,void 0,I)}var me="web.dashboard.streams",Ot="streams_message_retweet",Mt={actionType:"edit",streamStyle:"old"};C.trackCustom(me,Ot,Mt)},ne=function(P){if(!b){var N=E.default.keys(hs.socialNetworksKeyedByType.TWITTER);if(N.length>0)b=hs.socialNetworksKeyedByType.TWITTER[N[0]].socialNetworkId;else{hs.statusObj.update(g._("No valid Twitter profiles to retweet from"),"error",!0);return}}var H="socialNetworkId="+b+"&messageId="+P;ajaxCall({type:"POST",url:"/ajax/network/get-message",data:H,success:function(y){if(y.success=="1"){let me=y.viewData.message;var K="RT @"+me.author.name+": "+me.text.replace(/<&#91;^>&#93;*>/g,"")+hs.memberAutoInitial+" ";window.newActionTweet(b,K,"","",void 0,void 0,void 0,void 0,I)}else hs.statusObj.update(y.error,"error",!0)},error:function(){hs.statusObj.update(g.c.ERROR_GENERIC,"error",!0)}},"qm")},ve=function(){let P=e.find("._postTime").attr("href");if(S.isFeatureEnabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")){let K={messageText:P,socialNetworkId:b};Q.default.emit(Wt,K)}else{let K=" "+P;window.newActionTweet(b,K,"","","",!1,!1,!0,I)}var N="web.dashboard.streams",H="streams_message_retweet",y={actionType:"quote",streamStyle:"old"};C.trackCustom(N,H,y)};hs.prefs.isNewRetweet?A.default.getActions(O.MESSAGE).retweetMessage({anchor:a,socialNetworkId:b,messageId:r,impressionId:o,fnOldRetweet:de,fnNewRetweet:ne,fnTwitterQuote:ve}):de(),e.data("advertiserName")&&hs.trackEvent("PromoTweets"+(i=="HOME"?"Home":""),hs.prefs.isNewRetweet?"retweet_new":"retweet_old",e.data("advertiserName")+" | @"+e.data("advertiserScreenName"))}else if(a.hasClass("_reply"))x="@"+p+hs.memberAutoInitial+" ",T={socialNetworkId:b,socialNetworkType:u,text:x,id:r,replyToUserName:p,teamId:c},T.socialNetworkContext=I,A.default.getActions(O.MESSAGE).respondTo(T),e.data("advertiserName")&&hs.trackEvent("PromoTweets"+(i=="HOME"?"Home":""),"reply",e.data("advertiserName")+" | @"+e.data("advertiserScreenName"));else if(a.hasClass("_dm"))x="d "+p+hs.memberAutoInitial+" ",T={socialNetworkId:b,text:x},T.socialNetworkContext=I,A.default.getActions(O.MESSAGE).createDirectMessage(T);else if(a.hasClass("_fav"))b&&b>0?window.stream.network.toggleFavorite(t,b,o):a.parent().hasClass("_instagram")?window.selectSocialNetworkPopup(function(P){window.stream.network.toggleFavorite(t,P,o)},g._("Instagram network to apply the action to:"),null,["INSTAGRAM"]):window.selectSocialNetworkPopup(function(P){window.stream.network.toggleFavorite(t,P,o)},g._("Which Twitter network should like this tweet?")),e.data("advertiserName")&&hs.trackEvent("PromoTweets"+(i=="HOME"?"Home":""),"favorite",e.data("advertiserName")+" | @"+e.data("advertiserScreenName"));else{if(a.hasClass("_deleteDMTweet"))return confirm(g._("Are you sure you want to permanently delete this DM from Twitter?"))&&(T={messageDivId:t,sid:b},A.default.getActions(O.MESSAGE).deleteDirectMessage(T)),!1;if(a.hasClass("_deletePostComment"))return confirm(g._("Are you sure you want to permanently delete this comment?"))&&window.stream.facebook.deleteComment(r,b,function(){window.fadeSlideRemove("#"+t,null,function(){})}),!1;if(a.hasClass("_more")){var L=a.closest("._options").find("._moreMenu");if(L.is(":visible"))L.hide();else{e.is("._isRetweet")?L.find("._promotePost").hide():L.find("._promotePost").show(),i||(i=n.children("input[name='type']").val()),window.appapi.helper.sendToAppBind(s,e),L.css("margin-top","").show();var ce=L.outerHeight(),q=L.offset().top,D=(0,f.default)(window).height();q+ce>D-10&&L.css("margin-top",(q+ce-D+10)*-1+"px")}}else if(a.hasClass("_replyAll")){V=e.find("._baseTweetText").text();var j=i&&i.match(/home|mention/i),J="";j&&(J=n.find("._handle .subTitle").text().replace(/[^\d\w]/g,""));var be="",B=/@([\w\d]+(\s|$))/g,se=V.match(B),ue="";if(se&&E.default.isArray(se)&&se.length)for(var we=0;we<se.length;we++)ue=f.default.trim(se[we].replace("@","")),ue.toLowerCase()!=p.toLowerCase()&&(!j||J!=ue)&&(be+=" @"+ue);x="@"+p+be+hs.memberAutoInitial+" ",T={socialNetworkId:b,socialNetworkType:u,text:x,id:r,replyToUserName:p,teamId:c},T.socialNetworkContext=I,A.default.getActions(O.MESSAGE).respondTo(T)}else if(a.hasClass("_follow"))M=e.find("._userInfoDropdown"),U=M.attr("title"),W=M.attr("userid"),u=="INSTAGRAM"&&window.stream.instagram.follow(W,U);else if(a.hasClass("_unfollow"))M=e.find("._userInfoDropdown"),U=M.attr("title"),W=M.attr("userid"),u=="INSTAGRAM"&&window.stream.instagram.unfollow(W,U);else if(a.hasClass("_sendToApp")){var Fe=(0,f.default)("#box"+a.attr("boxId"));if(Fe.length>0){var Ue=Fe.find("._body iframe"),He=Ue.attr("apikey"),Et=Ue.attr("pid");u=n.box("get","socialNetworkType"),He&&Y.sendToApp(He,Et,u+"|"+r,e.find("._baseTweetText").text())}}else if(a.hasClass("_sendToEmail")){V=f.default.trim(e.find("._baseTweetText").text().replace(/\s+/g," "));var xt=e.find("._postAttachment ._attachmentItem").attr("href")||e.find("._postAttachment .attachedLink").attr("href")||"",Pt=f.default.trim(e.find("._postAttachment ._postAttachmentTitle").text().replace(/\s+/g," "))||"",St=f.default.trim(e.find("._postAttachment p").text().replace(/\s+/g," "))||"",At=e.find(".date").attr("href")||e.find("._postTime").attr("href");h.sendToEmail(V,At,u,p,{link:xt,linkTitle:Pt,text:St})}else a.hasClass("_createCommentStream")?(h.setupCommentsBox(e),a.closest("._options").find("._moreMenu").hide(),fe.recordAction("streamFacebookCreateCommentStream")):a.hasClass("_editMessage")?(T={messageId:r,isGroupMode:!1,snIds:[b],isApproval:!1},A.default.getActions(O.MESSAGE).editPendingMessage(T)):a.hasClass("_deletePendingMessage")?(T={messageId:r,isGroupMode:!1,snIds:[b]},A.default.getActions(O.MESSAGE).deletePendingMessage(T)):a.hasClass("_addMessageTags")&&h.showMessageTagPopup(e)}return!1};h.setupCommentsBox=function(s){s=(0,f.default)(s),s.is("._message")||(s=s.closest("._message"));var e=s.closest("._box"),t=s.attr("id"),r=h.parseMessageId(t),a=s.attr("snid")||e.box("get","socialNetworkId"),n=(0,f.default)("#dashboardTabs ._tab.active").attr("id").replace(/[^\d]/g,""),i=s.closest("._messages").attr("createboxtype");i||s.hasClass("facebookMessage")&&(i="F_COMMENTS"),r=s.attr("externalpostid"),r&&s.data("nocomments")!="true"?(hs.statusObj.update(g._("Loading..."),"info"),window.addCommentBox(r,a,n,i)):alert(g._("Cannot create a comment stream on this post."))};h.initCommentTextarea=function(s,e,t){typeof t>"u"&&(t=!1),s.each(function(r,a){var n=(0,f.default)(a),i=n.data("placeholder"),l=n.closest("._commentEntry").find("._btns"),o=n.closest("._body");!i||n.val(i).focus(function(){f.default.trim(n.val())===f.default.trim(i)&&n.val("")}).focus(function(){n.addClass("focus"),l.show(),(n.closest("._inStreamCommentsBody").length===1||o.data("autoScrollOnFocus"))&&n.parent().parent().next().length===0&&o.scrollTop(o.prop("scrollHeight")-o.height())}).blur(function(){f.default.trim(n.val())===""&&n.val(i),setTimeout(function(){n.removeClass("focus"),l.hide()},200)}).bind("keypress",function(d){var c=window.event?window.event.keyCode:d.which,p=function(){return t?c==13&&d.shiftKey:c==13};if(p())return f.default.isFunction(e)&&e(n),!1})})};h.getSocialNetworkModule=function(s){var e;return s==="FACEBOOKPAGE"||s==="FACEBOOKGROUP"?e="facebook":s==="LINKEDINCOMPANY"?e="linkedin":e=s.toLowerCase(),e in window.stream&&window.stream[e]};h.generateTemporaryCommentHtml=function(s,e,t,r){var a=r||s.attr("snid"),n=hs.socialNetworks[a],i={avatarHref:n.avatar,commentId:"000",externalUserHref:"#",realname:n.username,contentType:"htmlish",content:E.default.escape(e),postDateText:g._("less than a minute ago")},l=t?Object.assign({},i,{attributionTemplate:he.default}):f.default.extend(!0,{tmplData:i},{attributionTemplate:he.default,tmplData:{lazyLoadingOff:!0,moreMessageClasses:"_temporaryComment"}});return xe.default.render(l)};h.formatMessageIdForHtml=function(s){return f.default.isFunction(s.replace)?hs.isFeatureEnabled("PLAT_13257_ENCODE_SLASHES_IN_MESSAGE_IDS")?s.replace(/(\.|:)/g,"_").replace("\\","__bslash__").replace("/","__fslash__"):s.replace(/(\.|:)/g,"_"):s};h.toggleImages=function(s,e,t,r,a){var n=(0,f.default)("#box"+s),i=window.stream.stream.getLayout(s);e==null&&(e=E.default.isBoolean(i.showImages)?!i.showImages:!!i.showImages);var l=e?"Text + Images":"Text Only";C.trackCustom("web.dashboard.streams.stream","layout_option_clicked",{selectedLayout:l,networkType:r,boxType:a}),i.showImages=e,n.find("._message ._close").trigger("click"),n.box("set","layout",i),window.stream.stream.saveLayout(s),n.find("._layoutOptionsGroup button").removeClass("optionSelected"),t&&(0,f.default)(t).addClass("optionSelected"),n.toggleClass("hideImages",!e).find(".mediaGallery").removeAttr("style").end().find(".-messageMetadata ._imageToggle").each(function(){var o=(0,f.default)(this);o.text(g._("Show image"+(o.data("count")==1?"":"s")))}).end(),Q.default.emit("streams:resize")};h.sendToEmail=function(s,e,t,r,a){var n="",i,l,o=a.link||"",d=a.linkTitle||"",c=1500;i=hs.memberName+" "+g._("wants to share this story"),!s&&d.length>0&&(s=d),l=r+": "+s,s.indexOf(r)===0&&(l=s),n=encodeURIComponent(l)+"%0A%0A",s="@"+r+': "'+s+'"',(n+i).length>c&&(n=encodeURIComponent(window.truncate(decodeURIComponent(n),500))+"%0A%0A"),e&&(n+=encodeURIComponent(e)+"%0A%0A"),o.length>0&&!e&&(n+=encodeURIComponent(o)+"%0A%0A"),hs.temporaryEmailWindow=window.open(hs.util.getUrlRoot()+"/network/network-popup-preloader","","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=800,height=450"),hs.temporaryEmailWindow.setTimeout(function(){hs.temporaryEmailWindow.close()},1e3),hs.temporaryEmailWindow.location="mailto:?body="+n+"&subject="+i,fe.recordAction("streamSocialShare",{snType:t})};Q.default.on("assignment:receive:error",function(s,e){if(s?hs.statusObj.update(s,"error",!0):hs.statusObj.update(g._("Error adding assignment, please try again"),"error",!0),e&&e.assignedSnMessage){var t=e.assignedSnMessage.apiKey,r=e.assignedSnMessageId;t&&Y.apps&&E.default.each(Y.apps[t],function(a,n){if(Y.apps[t][n].userbound&&Y.apps[t][n].userbound.sendassignmentupdates){var i={};i.action="ASSIGN",i.success=0,i.errorMessage=s||g._("Error adding assignment, please try again"),i.messageId=r,i.toMemberId=e.toMemberId,i.toMemberName=e.toMemberName,Y.sendAssignmentUpdates(t,n,JSON.stringify(i))}})}});Q.default.on("box:delete",function(s){s&&window.deleteBox(s)});window.stream=window.stream||{};window.stream.box=h;var fn=h;var R=w(Be()),Me=w(Xe());We();qe();var Ne=w(Te()),Re=w(Rt());Ge();var Le=w(Ie());$e();var Pe={DEFAULT:"https://assets.hootsuite.com/v2/images/dashboard/avatars/member-default-100.8e9a4075.png"};var ge=w(Qe()),je=w(Ee());var Ct=w(Ft()),kt=w(Tt()),m={},yt="composer.open";m.TWITTER="TWITTER";m.FACEBOOK="FACEBOOK";m.LINKEDIN="LINKEDIN";m.INSTAGRAM="INSTAGRAM";m.getBoxType=function(s){s=$(s);var e=m.TWITTER,t=s.closest("._box");if(t.length){var r=t.box("get","type");r.indexOf("L_")===0?e=m.LINKEDIN:r.indexOf("F_")===0?e=m.FACEBOOK:r.indexOf("I_")===0&&(e=m.INSTAGRAM)}return s.closest(".x-instagram").length?m.INSTAGRAM:e};m.showUserInfo=function(s,e){var t=s.pageX+30,r=this,a=$(r);t>$(window).width()-300&&(t-=300);var n=null,i=null,l=a.closest("._message"),o=l.data("impressionId"),d=$(s.target),c=null;try{c=m.getBoxType(r)}catch{$(r).hasClass("_instagram")?c=m.INSTAGRAM:$(r).hasClass("_twitter")&&(c=m.TWITTER)}a.hasClass("_userInfoPopupHere")||a.hasClass("_commentUserInfoPopup")||a.hasClass("_instagram")?(n=a.attr("userid"),i=a.attr("title")):e=="company"?n=d.attr("companyId")||d.data("companyId")||l.data("companyId"):c==m.TWITTER||a.hasClass("_twitter")?(i=a.attr("title"),n=a.attr("data-user-id")):(n=l.data("userId"),i=l.data("userName")),$("div._viewAssignments").length>0&&(!n||n==="")&&(n=$("input[name='userId']",a.closest("._box")).val()),(!n||n==="")&&(n=a.attr("title"));var p=a.closest("._box").data("box")&&a.closest("._box").box("get","socialNetworkId")||$("input[name='socialNetworkId']",a.closest("._box")).val()||a.data("socialnetworkid");if(!p&&$("#contactsManage").length&&(p=$("#contactsManage ._sectionFrame input._socialNetworkId").val()),!p&&a.closest("#commentsPopup").length&&(p=a.closest("#commentsPopup").find(".message-original").data("socialNetworkId")),!p&&c==m.FACEBOOK){var u=null;$.each(hs.socialNetworks,function(){if(this.type.match(/facebook/i))return u=this,!1}),p=u&&u.socialNetworkId}if(!p&&a.hasClass("_userInfoPopupHere")&&(p=a.attr("snid")),!p){var v=a.closest(".message");v&&(p=v.attr("snid"))}c!=m.TWITTER&&a.hasClass("_twitter")&&(p=null);var I=!1;a.hasClass("_standardized")&&(I=!0),c==="FACEBOOK"&&n.indexOf("|")>=0&&(n=n.split("|")[1]);var b={userId:n,socialNetworkId:p,socialNetworkType:c,xPos:t,ptwImpressionId:o,type:e,userName:i,standardized:I};return ge.default.getActions(je.MESSAGE).showSocialProfile(b),!1};m.initYoutubeRelationshipsDropdown=function(s){let e=$("#twitterUserInfoPopup");if(R.default.has(s,"youtubeRelationships")&&e.find("._relationshipInfo")[0]){var t={flux:ge.default,connectToStores:{socialNetworks:function(l){return{socialNetworks:l.getMultiple(R.default.keys(s.youtubeRelationships))}}}},r={profileId:s.apiResult.id,subscriptionStates:s.youtubeRelationships},a=e.find("._relationshipInfo")[0],n=Ne.default.createElement(kt.default,r),i=Ne.default.createElement(Ct.default,t,n);Re.default.render(i,a),e.dialog("option",{close:function(){Re.default.unmountComponentAtNode(a)}})}};m.bindPostsTabControls=function(s,e,t){let r=$("#twitterUserInfoPopup");r&&r.find("._streamTypeDropDown ._sddMenu button").click(function(a){var n=$(this);if(!n.is(".disabled, .active")){var i="<div class='large-loading'><span class='icon-anim x-radialLines'></span></div>";r.find("._content").hide(),n.is("._timeline")?(hs.trackEvent($.extend({action:"timeline"},e)),C.trackCustom("web.dashboard.user_info.streamDropDown","user_info_timeline_clicked",{socialNetworkType:t}),r.find("._contents ._timeline").show().find("._body").empty().html(i),window.stream.twitter.viewUserTweets(s,r.find("._contents ._timeline ._body"))):n.is("._mentions")?(hs.trackEvent($.extend({action:"mentions"},e)),C.trackCustom("web.dashboard.user_info.streamDropDown","user_info_mentions_clicked",{socialNetworkType:t}),r.find("._contents ._mentions").show().find("._body").empty().html(i),window.stream.twitter.viewUserMentions(s,r.find("._contents ._mentions ._body"))):n.is("._favorites")&&(hs.trackEvent($.extend({action:"favorites"},e)),C.trackCustom("web.dashboard.user_info.streamDropDown","user_info_favorites_clicked",{socialNetworkType:t}),r.find("._contents ._favorites").show().find("._body").empty().html(i),window.stream.twitter.viewUserFavorites(s,r.find("._contents ._favorites ._body")))}})};m.bindTwitterProfileComponents=function(s,e){let t=$("#twitterUserInfoPopup");t&&t.find("._view_followers").click(function(r){if(t.find("._contents ._showFollowers").is(":visible"))t.find("._contents ._showFollowers").hide();else{var a="<div class='icon-anim x-radialLines'></div>";t.find("._contents ._showFollowers").show().find("._body").empty().html(a)}window.stream.twitter.viewFollowers(s,e.apiResult.id_str,t.find("._contents ._showFollowers ._body")),t.find("._contents ._showFollowers").on("click","._doFollow",function(n){window.toggleFollow(1,$(this).data("screenname"),$(this).data("userid"),null,"",{fullname:$(this).data("fullname")})})})};m.bindTwitterDropdownControls=function(s,e){let t=$("#twitterUserInfoPopup");if(t){let{id_str:r,name:a,screen_name:n,socialProfileType:i}=e;t.find("._userInfoActions button").click(function(l){l.preventDefault();var o=i&&i.toUpperCase()===m.TWITTER||$(this).hasClass("_twitter"),d=o?"TWITTER":void 0,c;if($(this).hasClass("_follow"))window.toggleFollow(1,n,r,null,"",{fullname:a});else if($(this).hasClass("_unfollow"))window.toggleFollow(0,n,r,null,"",{fullname:a});else if($(this).hasClass("_reply"))if(c="@"+n+hs.memberAutoInitial+" ",S.isFeatureEnabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")){let p={messageText:c,socialNetworkId:s};Le.default.emit(yt,p)}else window.newActionTweet("",c,"","",void 0,void 0,void 0,void 0,d);else if($(this).hasClass("_dm"))if(c="d "+n+hs.memberAutoInitial+" ",S.isFeatureEnabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")){let p={messageText:c,socialNetworkId:s};Le.default.emit(yt,p)}else window.newActionTweet("",c,"","",void 0,void 0,void 0,void 0,d);else $(this).hasClass("_addToList")&&(window.stream.twitter.addUserToListPopup(r),C.trackCustom("web.dashboard.streams","stream_user_bio_add_to_list"))}),t.find("._muteAccount").click(function(l){l.preventDefault(),(!s||parseInt(s,10)<1)&&$("#streamsContainer, #contactsSection").length?window.selectSocialNetworkPopup(function(o){window.stream.twitter.muteAccount(n,o)},g._("Which Twitter profile should mute this user?")):window.stream.twitter.muteAccount(n,s)}),t.find("._blockAccount").click(function(l){l.preventDefault(),(!s||parseInt(s,10)<1)&&$("#streamsContainer, #contactsSection").length?window.selectSocialNetworkPopup(function(o){window.stream.twitter.blockUser(n,o)},g._("Which Twitter profile should block this user?")):window.stream.twitter.blockUser(n,s)}),t.find("._reportAccount").click(function(l){l.preventDefault(),(!s||parseInt(s,10)<1)&&$("#streamsContainer, #contactsSection").length?window.selectSocialNetworkPopup(function(o){window.stream.twitter.reportSpam(n,o)},g._("Which Twitter profile should report this user?")):window.stream.twitter.reportSpam(n,s)})}};m.bindCloseDialogControls=function(){let s=$("#twitterUserInfoPopup");s&&s.find("._closeDialog").click(function(){s.dialog("close")})};m.bindTabListeners=function(s,e,t,r){let a=$("#twitterUserInfoPopup");a&&a.find("._tabs ._tab").click(function(n){n.preventDefault();var i=$(this),l="<div class='large-loading'><img src='"+hs.util.rootifyImage("/dashboard/loaders/round-radial-lines-loader.gif")+"' /></div>";if(!i.is(".disabled, .active"))if(a.find("._tabs ._tab").removeClass("active"),i.addClass("active"),a.find("._content").hide(),i.is("._bio"))a.find("._contents ._bio").show();else if(i.is("._timeline"))hs.trackEvent($.extend({action:"timeline"},r)),C.trackCustom("web.dashboard.user_info.timeline","user_info_timeline_clicked",{socialNetworkType:e}),a.find("._contents ._timeline").show().find("._body").empty().html(l),window.stream.twitter.viewUserTweets(s.apiResult.screen_name,a.find("._contents ._timeline ._body"));else if(i.is("._mentions"))hs.trackEvent($.extend({action:"mentions"},r)),C.trackCustom("web.dashboard.user_info.mentions","user_info_mentions_clicked",{socialNetworkType:e}),a.find("._contents ._mentions").show().find("._body").empty().html(l),window.stream.twitter.viewUserMentions(s.apiResult.screen_name,a.find("._contents ._mentions ._body"));else if(i.is("._favorites"))hs.trackEvent($.extend({action:"favorites"},r)),C.trackCustom("web.dashboard.user_info.favorites","user_info_favorites_clicked",{socialNetworkType:e}),a.find("._contents ._favorites").show().find("._body").empty().html(l),window.stream.twitter.viewUserFavorites(s.apiResult.screenName,a.find("._contents ._favorites ._body"));else if(i.is("._history")){hs.trackEvent($.extend({action:"interactionhistory"},r)),C.trackCustom("web.dashboard.user_info.interaction_history","user_info_interaction_history_clicked",{socialNetworkType:e,from:t,to:s.apiResult.id});var o=a.find("._contents ._history");o.show(),e.toUpperCase()===m.TWITTER?hs.isFeatureEnabled("NGE_3295_INTERACTION_HISTORY_SERVICE_TWITTER")&&m.showInteractionHistorySNPicker(t,e,s.apiResult.id_str,o):hs.isFeatureEnabled("NGE_3295_INTERACTION_HISTORY_SERVICE")&&m.showInteractionHistorySNPicker(t,e,s.apiResult.id,o)}else i.is("._notes")&&(hs.trackEvent($.extend({action:"notes"},r)),C.trackCustom("web.dashboard.user_info.notes","user_info_notes_clicked",{socialNetworkType:e}),window.stream.twitter.viewNotes(s.apiResult.id,a.find("._contents ._notes")))})};m.populateUserInfoPopup=function(s,e,t,r,a,n){if(!!s.length){if(s.html(Me.default.parse($("<div>").html(r.output).get(0))),S.isFeatureEnabled("NGE_17053_USER_INFO_POPUP_MIGRATION")&&F("userInfoPopup",{userInfo:r.apiResult}),S.isFeatureEnabled("NGE_17664_USER_INFO_POPUP_PROFILE_MIGRATION")&&F("userInfoPopupProfile",{data:r}),S.isFeatureEnabled("NGE_17668_USER_INFO_POPUP_POSTS_MIGRATION")&&a.toUpperCase()===m.TWITTER){let d=r.apiResult.screen_name,c=r.apiResult.name;F("userInfoPopupPosts",{name:c,socialNetworkType:a,trackingParams:n,username:d})}S.isFeatureEnabled("NGE_17676_USER_INFO_POPUP_NOTES_MIGRATION")&&a.toUpperCase()===m.TWITTER&&F("userInfoPopupNotes",{}),S.isFeatureEnabled("NGE_17672_USER_INFO_POPUP_INTERACTIONS_MIGRATION")&&F("userInfoPopupInteractions",{socialProfileType:a}),r.apiResult&&window.stream.twitter.hasNotes(r.apiResult.id);var i=s.find("input[name='username']").val(),l=s.find("input[name='screenname']").val(),o=s.find("input[name='companyname']").val();l&&l.length&&(i+=" <em>("+l+")</em>"),!i&&o&&(i=o),i&&(i=$(Me.default.parse($("<div>").html(i).get(0))).html()),i&&s.dialog("option",{title:i}),m.bindTabListeners(r,a,t,n),a.match(/facebook/i)&&e.match(/page/i)&&s.find("._tabs ._tab._insight").addClass("disabled"),m.bindTwitterDropdownControls(t,r.apiResult),m.bindTwitterProfileComponents(t,r),m.initYoutubeRelationshipsDropdown(r),m.bindCloseDialogControls(),m.bindPostsTabControls(l,n,a)}};m.showInteractionHistorySNPicker=function(s,e,t,r){if(r.show(),r.find(".noContent").remove(),e.toUpperCase()!==m.FACEBOOK){var a=k.getEjs("stream/snpicker").render();r.find("._header ._socialNetworkDropdown").length===0&&r.find("._header").append(a)}var n=r.find("._socialNetworkDropdown"),i=[];e.toUpperCase().indexOf(m.FACEBOOK)===0?i=hs.socialNetworksKeyedByType.FACEBOOKPAGE:i=hs.socialNetworksKeyedByType[m.TWITTER];var l=[],o=!1,d;!n.length&&R.default.size(i)>0?R.default.each(i,function(c){c.socialNetworkId==s&&(r.find("._ihContent").empty(),m.getInteractionHistory(c.userId,e,t,r))}):R.default.size(i)>0?(R.default.each(i,function(c){c.userId!=t?l.push({title:c.username,optId:c.socialNetworkId,externalId:c.userId}):o=c.socialNetworkId}),l.length>0?(o===s||!s?d=l[0].optId:d=s,n.removeClass("disabled"),n.hsDropdown({data:{items:l},change:function(c){r.find("._ihContent").empty(),m.getInteractionHistory(c.externalId,e,t,r)}}).hsDropdown("selectElement",d,"optId")):n.hsDropdown({data:{items:[{title:g._("No profiles were found")}]}}).hsDropdown("selectFirstElement")):n.length&&n.hsDropdown({data:{items:[{title:g._("No profiles were found")}]}}).hsDropdown("selectFirstElement")};m.getInteractionHistory=function(s,e,t,r,a){var n=r.find("._ihContent"),i="";n.find(".x-error").remove(),a||n.css({display:"block"}).addClass("stream");var l={sourceUserId:s,targetUserId:t,socialNetworkType:e,cursor:a};ajaxCall({type:"GET",url:"/ajax/network/get-interaction-history",data:l,beforeSend:function(){n.append('<div class="ui-dialog-section ui-ghost c-c _ihLoading"><span class="icon-anim load-circular"></span></div>')},success:function(o){if($("._ihLoading").remove(),o.success===0&&o.errorMessage)i+=k.getEjs("stream/ih-error").render({message:o.errorMessage});else if(R.default.isArray(o.data))if(o.data.length===0)a?i+=k.getEjs("stream/ih-endofhistory").render():i+=k.getEjs("stream/ih-nohistory").render();else{var d=e.toUpperCase().indexOf(m.FACEBOOK)===0;R.default.each(o.data,function(c){var p="this.onerror = null; this.src = '"+Pe.DEFAULT+"';",u={anonUrl:Pe.DEFAULT,fallbackFunc:p};if(d){let v={avatar:u,urlClickable:Ve,formatDate:ke,message:c};c.id.substring(0,2)==="m_"?i+=k.getEjs("stream/facebook/interactionhistory/private_message").render(v):i+=k.getEjs("stream/facebook/interactionhistory/comment").render(v)}else{let v={formatDate:ke,interaction:c};c.type==="MENTION"?i+=k.getEjs("stream/twitter/interactionhistory/mention_via_ih").render(v):c.type==="DIRECT_MESSAGE"?i+=k.getEjs("stream/twitter/interactionhistory/directmessage_via_ih").render(v):c.type==="QUOTE"&&(i+=k.getEjs("stream/twitter/interactionhistory/quote_via_ih").render(v))}}),R.default.isEmpty(o.cursor)?i+=k.getEjs("stream/ih-endofhistory").render():i+=k.getEjs("stream/ih-loadmore").render()}n.append(i),$("._ihLoadMore").on("click",function(){$("._ihLoadMore").remove(),m.getInteractionHistory(s,e,t,r,o.cursor.next)})},error:function(){$("._ihLoading").remove();var o=g._("Failed to load Interaction History. Please try again.");i+=k.getEjs("stream/ih-error").render({message:o}),n.append(i)}},"qm")};m.showRelationshipInfoPopup=function(s){m.relationshipInfoOffset=0;var e=s.pageX+30;e>$(window).width()-300&&(e-=300),m.relationshipUser=$(this).attr("data-screenname")??$(this).closest("._contents").children("input[name=screenname]").val(),m.relationshipUserId=$(this).attr("data-userid")??$(this).closest("._contents").children("input[name=userId]").val();var t={height:"auto",width:380,position:[e,50],title:g.c.LOADING,modal:!1,draggable:!0,closeOnEscape:!0,content:"<div class='large-loading'><img src='"+hs.util.rootifyImage("/dashboard/loaders/round-radial-lines-loader.gif")+"' /></div>"},r={category:"bio",label:"relationships"};return m.$relationshipInfoPopup=$.dialogFactory.create("twitterRelationshipPopup",t),hs.trackEvent($.extend({action:"open"},r)),m.gatherRelationshipInfo(),!1};m.gatherRelationshipInfo=function(){var s=20,e=[];for(var t in hs.socialNetworks)hs.socialNetworks[t].type==="TWITTER"&&e.push(hs.socialNetworks[t]);for(var r=[],a=m.relationshipInfoOffset;a<m.relationshipInfoOffset+s&&a<e.length;a++)r.push(e[a].socialNetworkId);C.trackCustom("web.dashboard.stream","user_relationship_info_opened",{username:m.relationshipUser,userId:m.relationshipUserId,networksCount:r.length});var n={networks:r,username:m.relationshipUser,userId:m.relationshipUserId},i="/ajax/network/relationship-info";ajaxCall({type:"POST",data:n,url:i,success:function(l){m.$relationshipInfoPopup.dialog("option",{title:"Relationships"});var o=$(l.output);m.$relationshipInfoPopup.html(o),S.isFeatureEnabled("NGE_17054_RELATIONSHIP_POPUP")&&F("relationshipsPopup")}},"qm"),m.relationshipInfoOffset=m.relationshipInfoOffset+s};m.showUserInfoPopup=function(s,e,t,r,a,n,i,l){t=t||"",r=r||"center";var o={height:"auto",width:528,position:[r,50],title:g.c.LOADING,modal:!1,draggable:!0,closeOnEscape:!0,content:"<div class='large-loading'><img src='"+hs.util.rootifyImage("/dashboard/loaders/round-radial-lines-loader.gif")+"' /></div>"},d=$.dialogFactory.create("twitterUserInfoPopup",o),c={category:"bio",label:s};C.trackCustom("web.dashboard.stream","user_profile_opened",{socialNetworkType:t,from:e,to:s}),hs.trackEvent($.extend({action:"open"},c));var p="/ajax/network/user-info?userId="+(s?encodeURIComponent(s):"")+"&socialNetworkId="+(e?encodeURIComponent(e):"")+"&socialNetworkType="+encodeURIComponent(t);l&&(p+="&s=1"),i&&(p=p+"&userName="+encodeURIComponent(i)),ajaxCall({type:"GET",url:p,success:function(u){R.default.has(u,"apiResult")&&!!u.apiResult&&!!u.apiResult.id&&(window.stream.twitter.hasNotes(u.apiResult.id,function(v){v&&d.find("._tab._notes").addClass("hasContent")}),t.toUpperCase()==m.INSTAGRAM&&(s=u.apiResult.id)),m.populateUserInfoPopup(d,s,e,u,t,c)}},"single")};m.renderSteamOutsideBox=function(s,e,t,r,a,n,i){var l=$(s);i=typeof i>"u"?!0:i,l.empty().html('<div class="_body"><div class="_message stream"></div></div>');var o=l.find("._message"),d={messages:e,snAvatar:t,disableComments:i,box:{type:a,boxId:0,socialNetworkId:r}},c=n(d);c.find("img[lazysrc]").attr("src",function(){return $(this).attr("lazysrc")}).removeAttr("lazysrc"),c.find("[lazystyle]").attr("style",function(){return $(this).attr("lazystyle")}).removeAttr("lazystyle"),o.empty().html(c),l.data({type:a,socialNetworkId:r}),l.bind("scroll.updateStream",window.stream.stream.updateStreamOnScroll),window.stream.stream.updateStreamOnScroll(l),l.scrollTop(0)};m.toggleCommentFavorite=function(s,e){var t=$("._comment_"+s),r=t.find("._fav"),a=t.data("fav"),n=parseInt(a,10)===1||a==="true"||a===!0?"0":"1";ajaxCall({url:"/ajax/network/toggle-favorite",data:"id="+s+"&socialNetworkId="+e+"&on="+n,beforeSend:function(){n==="1"?hs.statusObj.update(g._("Liking comment..."),"info"):hs.statusObj.update(g._("Un-liking comment..."),"info")},success:function(i){return typeof i.status.error.code>"u"||i.status.error.code==null?(hs.statusObj.reset(),t.data("fav",n),r.children(".like, .unLike").swapClass("like","unLike")):hs.statusObj.update(i.status.error.message,"error",!0),!1},error:function(){hs.statusObj.reset()},abort:function(){hs.statusObj.reset()}},"q1")};m.toggleFavorite=function(s,e,t){var r=$("#"+s),a=r.data("fav");if(a=="-1")return!1;var n=r.closest("._body"),i=n.find("._options ._fav")||n.siblings("._options ._fav");i=i.find("span").length?i.find("span"):i;var l=null,o=i.is(".favorite, .notFavorite");l=r.attr("externalpostid");var d=parseInt(a,10)===1||a==="true"||a===!0?"0":"1",c={id:l,socialNetworkId:e,ptwImpressionId:t||"",metadata:{liked:d}};return ge.default.getActions(je.MESSAGE).toggleLike(c).then(function(){if(r.data("fav",d),o)i.swapClass("favorite","notFavorite");else{i.swapClass("like","unLike");var p=r.find("._likeCount span"),u=d===1||d===!0||d==="1"?1:-1,v=parseInt(p.html(),10)+u;v=v<0?0:v,p.html(v)}}),!1};m.jumpToMessage=function(s,e){var t=$("#"+s),r=t.prev("._assignment");r.length&&(t=r);var a=t.position().top;if(a===0&&$.isFunction(e)){e();return}var n=t.closest("._body"),i=n.scrollTop(),l=t.closest("._box").find("._header"),o=i+a-l.outerHeight();hs.stopMessageMenuEvent=!0,n.animate({scrollTop:o},750,null,function(){hs.stopMessageMenuEvent=!1,e()})};window.stream=window.stream||{};window.stream.network=m;var Pn=m;export{nt as a,it as b,fn as c,Pn as d};
//# sourceMappingURL=chunk-MIT6CY5E.js.map
