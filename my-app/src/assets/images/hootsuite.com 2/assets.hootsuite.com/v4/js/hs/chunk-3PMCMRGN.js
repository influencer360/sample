import{A as mu,Aa as rn,B as hu,Ba as ku,C as fu,Ca as Au,D as Wo,Da as Js,E as Ys,Ea as on,Fa as Xs,Ga as Lu,Ha as Pu,Ia as Mu,Ja as ei,K as gu,Ka as ti,L as _u,La as si,M as vu,Ma as nn,N as bu,Na as Ou,O as Cu,Oa as qu,P as yu,Q as Qi,Qa as Fu,R as Ko,Ra as Uu,S as Tu,Sb as an,T as wu,U as ne,V as Zi,W as xe,Za as ii,ga as Su,ha as Eu,i as pu,ib as Ji,ja as Yo,k as uu,l as Ks,la as Qo,na as xu,o as R,oa as Zo,p as Qe,pa as Jo,q as $o,qa as je,r as Go,ra as Nu,s as Ki,sa as Iu,t as Vo,ta as Qs,u as le,ua as Ze,v as Yi,va as Xo,wa as en,x as du,xa as tn,y as es,ya as sn,za as Zs}from"./chunk-KPNUX65N.js";import{a as dt}from"./chunk-XX2ISN2Z.js";import{a as Wi}from"./chunk-SYIZOLBI.js";import{a as Je}from"./chunk-2AJEVYRB.js";import{a as iu}from"./chunk-PGYGNGFN.js";import{a as Ao,b as Po}from"./chunk-F5CWFDHA.js";import{i as qo}from"./chunk-QG2RGRKZ.js";import{c as Uo,f as Ro,n as eu,o as tu,q as Gi,r as su}from"./chunk-XVCZZZAI.js";import{c as Fo,g as Zp}from"./chunk-S3IS3DRO.js";import{a as Lo}from"./chunk-OZL6K2YT.js";import{a as $p,c as Gp}from"./chunk-UFVHZVGQ.js";import{b as Jp,c as Xp}from"./chunk-5AZIKNEG.js";import{k as $s,l as Gs}from"./chunk-JSDZMTFG.js";import{a as Do,b as jo,d as ou}from"./chunk-P2CTOYBU.js";import{a as ru}from"./chunk-ZZDGULDR.js";import{f as Vp,g as Wp}from"./chunk-C3ATEAKX.js";import{d as Kp,e as Yp,g as Vs,h as Ws}from"./chunk-BUPZWSPL.js";import{b as nu,i as zo,n as Bo,q as Ho}from"./chunk-7SULV3BY.js";import{a as Hp}from"./chunk-LTCHZHOR.js";import{b as Ke}from"./chunk-TTZU5XJQ.js";import{a as Vi,b as Ye,c as au,f as lu,g as cu}from"./chunk-G2AGVLYW.js";import{a as Hs}from"./chunk-DGVLB63U.js";import{a as Ee}from"./chunk-PALMNRBQ.js";import{a as Qp,b as Oo}from"./chunk-TS4YQM2V.js";import{b as Mo}from"./chunk-HFRQAMG4.js";import{a as ut}from"./chunk-HWDIAN4C.js";import{h as Se,i as $i}from"./chunk-H7SY6GNV.js";import{a as Bp}from"./chunk-CQWYXVIF.js";import{a as zp}from"./chunk-LD4B64TT.js";import{b as Jt}from"./chunk-527EYBTV.js";import{a as O}from"./chunk-JMUJZFCQ.js";import{b as Bs,d as ko}from"./chunk-BLZ2UTLS.js";import{g as pt,h as Io}from"./chunk-WBPTDCVX.js";import{a as we,b as xo}from"./chunk-5D3K6GYC.js";import{a as jp,c as No}from"./chunk-SHTS4IQB.js";import{a as Zt}from"./chunk-JRESDEDW.js";import{b as Ce}from"./chunk-INSRYSWJ.js";import{a as V,b as E,c as Xt}from"./chunk-RBJWJTV5.js";import{a as ct}from"./chunk-GJN5ONR7.js";import{a as H}from"./chunk-5M6X2SDJ.js";import{b as Te,c as x,d as Hi,f as U,g as j}from"./chunk-62VJZGPO.js";var _n=x((Y_,Wu)=>{Wu.exports={}});var bn=x((Q_,vn)=>{"use strict";var Tt=O(),wt=R(),rr=V(),{Button:Ku,CTA:Yu}=(Gs(),j($s));_n();var or=function(i){return Tt.createElement("div",{className:"rc-CustomCtaMessage"},i.imgSrc&&Tt.createElement("img",{className:"-image",height:"148px",src:i.imgSrc,width:"145px"}),Tt.createElement("div",{className:"-copy"},Tt.createElement("h4",null,i.title),Tt.createElement("p",null,i.message)),i.ctaOnClick&&Tt.createElement(Ku,{onClick:i.ctaOnClick,isLoading:i.isLoading,type:Yu},i.ctaText))};or.propTypes={ctaOnClick:wt.func,ctaText:wt.string,imgSrc:wt.string,isLoading:wt.bool,message:wt.string,title:wt.string};or.defaultProps={ctaOnClick:null,ctaText:rr._("Start scheduling"),imgSrc:null,isLoading:!1,message:rr._("Scheduling a few posts a week is a great way to keep your followers engaged."),title:rr._("No scheduled posts yet...")};vn.exports=or});var Tn=x((Z_,yn)=>{"use strict";var nr=O(),Qu=R(),Cn=Zt(),Be=H();yn.exports=(i,e)=>{class t extends nr.Component{componentDidMount(){this._isMounted=!0,this._timeout=null}shouldComponentUpdate(){return this._component?this._component.shouldComponentUpdate.apply(this._component,arguments):!0}componentWillUnmount(){this._isMounted=!1,this._stopAnimation()}_animate(r,o){this._stopAnimation(),this._scheduleAnimation(r,o)}_runAnimation(r,o){this._shouldRunAnimation=!1,!(!this._isMounted||r==null)&&Cn(this._component.getDomNode()).animate(r,o)}_stopAnimation(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null,this._shouldRunAnimation=!1),Cn(this._component.getDomNode()).stop(!0,!1)}_scheduleAnimation(r,o){this._shouldRunAnimation||(this._shouldRunAnimation=!0,this._timeout=setTimeout(this._runAnimation.bind(this,r,o),0))}_produceAnimation(r,o){let a,p,f,{invokePreAnimation:C,invokePostAnimation:S,paramsAdapter:k}=r;this._component&&(C=C||!C&&!S,S=!C,f=Array.prototype.slice.call(arguments,2),p=Be.isFunction(o)?o.bind(null,...f):Be.identity,a=Be.isFunction(k)?k(this._component):{},Be.isObject(a)||(a={}),(C||!a.animation)&&p(),S&&(a.options=Be.extend({},a.options,{complete:p})),a.animation&&this._animate(a.animation,a.options))}_generateExtendedProps(){let r=Be.pick(this.props,Be.keys(e));return Be.each(e,(o,a)=>{r[a]=this._produceAnimation.bind(this,o,r[a])}),r}getWrappedComponent(){return this._component}render(){return nr.cloneElement(nr.createElement(i,{ref:r=>{r!=null&&(Be.isFunction(this.props.getRef)&&this.props.getRef(r),this._component=r)},...this.props,...this.state}),this._generateExtendedProps())}}return t.displayName="AnimatedComponent("+i.displayName+")",t.propTypes={getRef:Qu.func},t}});var Sn=x((J_,wn)=>{"use strict";var oi=O(),ar=R(),Zu=H(),is=class extends oi.Component{constructor(){super(),this.getDomNode=this.getDomNode.bind(this),this._ref=oi.createRef()}shouldComponentUpdate(e){return!this.props.isVisible&&e.isVisible}getDomNode(){return this._ref.current}render(){let e=this.props.isVisible?oi.cloneElement(this.props.children,Zu.omit(this.props,"isVisible","placeholderEl")):this.props.placeholderEl;return oi.createElement("div",{ref:this._ref},e)}};is.displayName="LazyRenderPlaceholder";is.propTypes={children:ar.element,isVisible:ar.bool,placeholderEl:ar.element.isRequired};wn.exports=is});var kn=x((X_,In)=>{"use strict";var mt=O(),rs=R(),me=H(),ni=Yi(),Ju=mu(),Xu=Sn(),En=Ce(),ed=mt.createElement("div",{style:{height:100}}),xn=(i,e,t)=>i.offsetTop>=e&&i.offsetTop<=t,Nn=i=>i&&parseInt(window.getComputedStyle(i,null).getPropertyValue("height"))||0,td=i=>i?"lazyPlaceholder_"+i:me.uniqueId("lazyPlaceholder_"),St=class extends mt.Component{constructor(){super(),this.handleOnScroll=this.handleOnScroll.bind(this),this.updateVisibility=this.updateVisibility.bind(this),this.requestTick=this.requestTick.bind(this),this.getDomNode=this.getDomNode.bind(this),this.placeholders={},this.static={countChildren:0},this._lazyRenderRef=mt.createRef(),this.state={isInitialRender:!0,initialRenderIndex:0,children:[]}}getDomNode(){return this._lazyRenderRef.current}componentDidMount(){this.buildAndSetPlaceholders(this.props.children),this.cacheStaticValues(),this.requestTick(),this.addEventListeners()}UNSAFE_componentWillReceiveProps(e){this.buildAndSetPlaceholders(e.children)}UNSAFE_componentWillUpdate(){this.scrollHeight=this.getDomNode().scrollHeight,this.scrollTop=this.getDomNode().scrollTop}componentDidUpdate(e){this.cacheStaticValues(),this.requestTick(),this.preserveScroll&&(this._lazyRenderRef.current.scrollTop=this.scrollTop+(this.getDomNode().scrollHeight-this.scrollHeight),this.preserveScroll=!1),this.scrollTop!=0&&e.children[0].first().key!=this.props.children[0].first().key&&(this._lazyRenderRef.current.scrollTop=this.scrollTop+(this.getDomNode().scrollHeight-this.scrollHeight)-300)}componentWillUnmount(){cancelAnimationFrame(this.animationFrameId),this.removeEventListeners()}updateState(e){this.setState(ni({},this.state,e))}addEventListeners(){this.props.updateEvents.forEach(e=>En.on(e,this.requestTick)),window.addEventListener("resize",this.requestTick)}removeEventListeners(){this.props.updateEvents.forEach(e=>En.off(e,this.requestTick)),window.removeEventListener("resize",this.requestTick)}placeholderDidMount(e,t){if(t){var s=this.getPlaceholder(e);s&&this.updatePlaceholder(e,{domNode:t.getDomNode()})}}cacheStaticValues(){this.static={countChildren:me.size(this.getPlaceholders())}}requestTick(){this.ticking||(this.animationFrameId=requestAnimationFrame(this.updateVisibility),this.ticking=!0)}buildAndSetPlaceholders(e){this.setPlaceholders(this.buildPlaceholders(e)),this.updateState({children:this.state.isInitialRender?this.getVisibleChildren():this.getChildren()})}buildPlaceholders(e){var t={},s=this.getPlaceholders();return mt.Children.forEach(e,(r,o)=>{if(!!r){var a=this.state.isInitialRender&&o===0,p=td(r.key),f={isPlaceholder:!0,isVisible:a,key:p,ref:this.placeholderDidMount.bind(this,o)};me.isFunction(this.props.placeholderAdapter)?f.placeholderEl=this.props.placeholderAdapter(r.type?r.type.name:void 0):f.placeholderEl=ed;var C=me.findWhere(s,{key:p});C?t[o]=ni(C,{index:o}):t[o]=ni({},{index:o,isPlaceholder:!0,isVisible:a,key:p,reactEl:mt.createElement(Xu,{...f},r)})}}),t}getPlaceholders(){return this.placeholders}setPlaceholders(e){this.placeholders=e}getPlaceholder(e){return this.placeholders[e]}updatePlaceholder(e,t){this.placeholders[e]=ni(this.placeholders[e],t)}getVisiblePlaceholders(){return me.filter(this.getPlaceholders(),e=>e.isVisible)}getNonVisiblePlaceholders(){return me.filter(this.getPlaceholders(),e=>!e.isVisible)}getChildren(){return me.map(this.getPlaceholders(),e=>e.reactEl)}getVisibleChildren(){return me.map(this.getVisiblePlaceholders(),e=>e.reactEl)}updateVisiblePlaceholders(e){me.each(e,t=>{var s=this.getPlaceholder(t);s&&this.updatePlaceholder(t,{isVisible:!0,reactEl:mt.cloneElement(s.reactEl,{isVisible:!0})})})}updateVisibility(){var{height:e,scrollTop:t,childrenHeight:s}=this.getReflowValues(),{countChildren:r}=this.static,{buffer:o}=this.props;if(this.ticking=!1,!!r)if(this.state.isInitialRender){var a=this.state.initialRenderIndex+1;s<e&&a<me.size(this.getChildren())?(this.updateVisiblePlaceholders([a]),this.updateState({initialRenderIndex:a,children:this.getVisibleChildren()})):this.updateState({isInitialRender:!1,children:this.getChildren()})}else{var p=[];me.each(this.getNonVisiblePlaceholders(),({domNode:f,index:C})=>{f&&xn(f,t,e+t+o)&&p.push(C),f&&xn(f,t-o,t)&&(this.preserveScroll=!0,p.push(C))}),p.length&&(this.updateVisiblePlaceholders(p),this.updateState({children:this.getChildren()}))}}getReflowValues(){var e={height:Nn(this.getDomNode()),scrollTop:this.getDomNode().scrollTop};return this.state.isInitialRender&&(e.childrenHeight=me.reduce(this.getVisiblePlaceholders(),(t,{domNode:s})=>t+Nn(s),0)),e}handleOnScroll(){this.requestTick()}render(){var e=me.omit(this.props,"buffer","placeholderAdapter","updateEvents");return mt.createElement("div",{...e,onScroll:Ju(this.props.onScroll,this.handleOnScroll),ref:this._lazyRenderRef},this.state.children)}};St.displayName="LazyRender";St.propTypes={buffer:rs.number,children:rs.any,onScroll:rs.func,placeholderAdapter:rs.func,updateEvents:rs.array};St.defaultProps={buffer:100,updateEvents:[]};In.exports=St});var An=x((ev,sd)=>{sd.exports={}});var lr=x((rv,Mn)=>{"use strict";xe();var Pn=U(ku()),Pe=O(),id=R(),rd=Ye(),Ln=tn(),od=V(),tv=pu(),sv=Au(),nd=Zo();An();var os=class extends Pe.Component{_getInteractionType(){if(this.props.interaction.response)return"replied"}_getInteractionIconSourceKey(){if(this.props.interaction.response)return Pn.default}_getInteractionInfo(){let e,t,s=this.props.interaction;return s.response&&(e=s.response.responseDate,t=`${od._("Replied to by")} ${s.response.responseMemberName}`),{interactionDate:e,interactionMessage:t}}_renderIcon(){let e={fill:"#fff",glyph:this._getInteractionIconSourceKey()};return Pe.createElement("div",{className:"iconWrapper"},Pe.createElement(ne,{...e,className:"-icon"}))}_renderAdditionalNote(){let e=this.props.interaction;if(e.response&&e.response.responseSnMessage)return Pe.createElement("div",{className:"-additional-note"},Pe.createElement(nd,{characterLimit:240},[e.response.responseSnMessage]))}_renderInfo(){let{interactionDate:e,interactionMessage:t}=this._getInteractionInfo(),s=Ln.convertISO8601ToTimestampUTC(e),r=null;return Pe.createElement("div",{className:"-info"},Pe.createElement("div",null,t),Pe.createElement("div",null,Pe.createElement("span",{className:"-timeago"},Ln.relativeTime(s)),r))}render(){let e=this._getInteractionType();if(e){let t={"rc-Banner":!0};return t[e]=!0,Pe.createElement("div",{className:rd(t)},this._renderIcon(),this._renderInfo(),this._renderAdditionalNote())}return null}};os.displayName="Banner";os.propTypes={interaction:id.object};Mn.exports=os});var pr=x((ov,qn)=>{"use strict";var ad=H(),he=R(),ld=Ee(),On=le(),cr=O(),cd=Qe(),pd=Lu(),ai=class extends cr.Component{render(){let e=ld.Map.isMap(this.props.comment)?this.props.comment.get("uid"):this.props.comment.uid;return cr.createElement(cd,{connectToStores:{member:t=>({member:t.get()}),messageContext:t=>({socialNetworkContext:t.getSocialNetworkContext(this.props.socialNetworkId,e)})},...ad.pick(this.props,"comment","features","messageListContext","headlineContent","headlineIconSourceKey","onEntityClick")},cr.createElement(pd,{scrollToSpecifiedComment:this.props.scrollToSpecifiedComment,shouldScrollToComment:this.props.shouldScrollToComment}))}};ai.propTypes={comment:On.map,features:On.map,headlineContent:he.oneOfType([he.array,he.node]),headlineIconSourceKey:he.func,messageListId:he.oneOfType([he.string,he.number]).isRequired,onEntityClick:he.func,scrollToSpecifiedComment:he.func,shouldScrollToComment:he.bool,socialNetworkId:he.oneOfType([he.string,he.number]).isRequired};qn.exports=ai});var Fn,Un=Te(()=>{Fn=({html:i})=>i`
    <path d="M0.123,0C1.844,3.196,5.286,5.409,9.22,5.409c0.246,0,0.369,0,0.615,0V1.106l9.835,6.762
    L9.835,14.63v-4.303c-0.246,0-0.369,0-0.615,0c-5.04,0-9.22-4.18-9.22-9.22C0,0.738,0,0.369,0.123,0z"/>
`});var Rn=x((av,ud)=>{ud.exports={}});var jn=x(ns=>{"use strict";var dd=ns&&ns.__makeTemplateObject||function(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i};Object.defineProperty(ns,"__esModule",{value:!0});ns.default=function(i){var e=i.html;return e(Dn||(Dn=dd([`
  <polygon points="15 14.25 10 9.25 5 14.25 3.25 12.5 10 5.75 16.75 12.5" />
`],[`
  <polygon points="15 14.25 10 9.25 5 14.25 3.25 12.5 10 5.75 16.75 12.5" />
`])))};var Dn});var Bn=x(as=>{"use strict";var md=as&&as.__makeTemplateObject||function(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i};Object.defineProperty(as,"__esModule",{value:!0});as.default=function(i){var e=i.html;return e(zn||(zn=md([`
  <path
    d="M18.75,5 L15.62,5 L13.5,1.75 C13.25,1.5 12.87,1.25 12.5,1.25 L7.5,1.25 C7.12,1.25 6.75,1.5 6.5,1.75 L4.37,5 L1.25,5 C0.5,5 0,5.5 0,6.25 L0,17.5 C0,18.25 0.5,18.75 1.25,18.75 L18.75,18.75 C19.5,18.75 20,18.25 20,17.5 L20,6.25 C20,5.5 19.5,5 18.75,5 Z M10,15 C7.87,15 6.25,13.37 6.25,11.25 C6.25,9.12 7.87,7.5 10,7.5 C12.12,7.5 13.75,9.12 13.75,11.25 C13.75,13.37 12.12,15 10,15 Z"
  />
`],[`
  <path
    d="M18.75,5 L15.62,5 L13.5,1.75 C13.25,1.5 12.87,1.25 12.5,1.25 L7.5,1.25 C7.12,1.25 6.75,1.5 6.5,1.75 L4.37,5 L1.25,5 C0.5,5 0,5.5 0,6.25 L0,17.5 C0,18.25 0.5,18.75 1.25,18.75 L18.75,18.75 C19.5,18.75 20,18.25 20,17.5 L20,6.25 C20,5.5 19.5,5 18.75,5 Z M10,15 C7.87,15 6.25,13.37 6.25,11.25 C6.25,9.12 7.87,7.5 10,7.5 C12.12,7.5 13.75,9.12 13.75,11.25 C13.75,13.37 12.12,15 10,15 Z"
  />
`])))};var zn});var Hn=x((ls,ur)=>{(function(e,t){typeof ls=="object"&&typeof ur=="object"?ur.exports=t(O(),Jt()):typeof define=="function"&&define.amd?define(["react","react-dom"],t):typeof ls=="object"?ls.ReactDropzone=t(O(),Jt()):e.ReactDropzone=t(e.React,e.ReactDOM)})(ls,function(i,e){return function(t){var s={};function r(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=s,r.i=function(o){return o},r.d=function(o,a,p){r.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:p})},r.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(a,"a",a),a},r.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},r.p="",r(r.s=5)}([function(t,s){t.exports=i},function(t,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function T(P,q){for(var F=0;F<q.length;F++){var b=q[F];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(P,b.key,b)}}return function(P,q,F){return q&&T(P.prototype,q),F&&T(P,F),P}}(),a=r(0),p=f(a);function f(T){return T&&T.__esModule?T:{default:T}}function C(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function S(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function k(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var I=function(T){k(P,T);function P(){return C(this,P),S(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"render",value:function(){return p.default.createElement("div",{"data-filetype":this.props.filetype,className:"filepicker-file-icon"})}}]),P}(p.default.Component);s.default=I},function(t,s,r){(function(o){(function(){var a,p,f,C,S,k,I,T,P=[].slice,q={}.hasOwnProperty,F=function(b,A){for(var L in A)q.call(A,L)&&(b[L]=A[L]);function d(){this.constructor=b}return d.prototype=A.prototype,b.prototype=new d,b.__super__=A.prototype,b};I=function(){},p=function(){function b(){}return b.prototype.addEventListener=b.prototype.on,b.prototype.on=function(A,L){return this._callbacks=this._callbacks||{},this._callbacks[A]||(this._callbacks[A]=[]),this._callbacks[A].push(L),this},b.prototype.emit=function(){var A,L,d,n,l,c;if(n=arguments[0],A=2<=arguments.length?P.call(arguments,1):[],this._callbacks=this._callbacks||{},d=this._callbacks[n],d)for(l=0,c=d.length;l<c;l++)L=d[l],L.apply(this,A);return this},b.prototype.removeListener=b.prototype.off,b.prototype.removeAllListeners=b.prototype.off,b.prototype.removeEventListener=b.prototype.off,b.prototype.off=function(A,L){var d,n,l,c,u;if(!this._callbacks||arguments.length===0)return this._callbacks={},this;if(n=this._callbacks[A],!n)return this;if(arguments.length===1)return delete this._callbacks[A],this;for(l=c=0,u=n.length;c<u;l=++c)if(d=n[l],d===L){n.splice(l,1);break}return this},b}(),a=function(b){var A,L;F(d,b),d.prototype.Emitter=p,d.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],d.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(n,l){return l()},init:function(){return I},forceFallback:!1,fallback:function(){var n,l,c,u,m,v;for(this.element.className=""+this.element.className+" dz-browser-not-supported",v=this.element.getElementsByTagName("div"),u=0,m=v.length;u<m;u++)if(n=v[u],/(^| )dz-message($| )/.test(n.className)){l=n,n.className="dz-message";continue}return l||(l=d.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(l)),c=l.getElementsByTagName("span")[0],c&&(c.textContent!=null?c.textContent=this.options.dictFallbackMessage:c.innerText!=null&&(c.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(n){var l,c,u;return l={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height},c=n.width/n.height,l.optWidth=this.options.thumbnailWidth,l.optHeight=this.options.thumbnailHeight,l.optWidth==null&&l.optHeight==null?(l.optWidth=l.srcWidth,l.optHeight=l.srcHeight):l.optWidth==null?l.optWidth=c*l.optHeight:l.optHeight==null&&(l.optHeight=1/c*l.optWidth),u=l.optWidth/l.optHeight,n.height<l.optHeight||n.width<l.optWidth?(l.trgHeight=l.srcHeight,l.trgWidth=l.srcWidth):c>u?(l.srcHeight=n.height,l.srcWidth=l.srcHeight*u):(l.srcWidth=n.width,l.srcHeight=l.srcWidth/u),l.srcX=(n.width-l.srcWidth)/2,l.srcY=(n.height-l.srcHeight)/2,l},drop:function(n){return this.element.classList.remove("dz-drag-hover")},dragstart:I,dragend:function(n){return this.element.classList.remove("dz-drag-hover")},dragenter:function(n){return this.element.classList.add("dz-drag-hover")},dragover:function(n){return this.element.classList.add("dz-drag-hover")},dragleave:function(n){return this.element.classList.remove("dz-drag-hover")},paste:I,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(n){var l,c,u,m,v,w,g,N,B,K,ue,Ue,Ae;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(n.previewElement=d.createElement(this.options.previewTemplate.trim()),n.previewTemplate=n.previewElement,this.previewsContainer.appendChild(n.previewElement),K=n.previewElement.querySelectorAll("[data-dz-name]"),m=0,g=K.length;m<g;m++)l=K[m],l.textContent=this._renameFilename(n.name);for(ue=n.previewElement.querySelectorAll("[data-dz-size]"),v=0,N=ue.length;v<N;v++)l=ue[v],l.innerHTML=this.filesize(n.size);for(this.options.addRemoveLinks&&(n._removeLink=d.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),n.previewElement.appendChild(n._removeLink)),c=function(Re){return function(Le){return Le.preventDefault(),Le.stopPropagation(),n.status===d.UPLOADING?d.confirm(Re.options.dictCancelUploadConfirmation,function(){return Re.removeFile(n)}):Re.options.dictRemoveFileConfirmation?d.confirm(Re.options.dictRemoveFileConfirmation,function(){return Re.removeFile(n)}):Re.removeFile(n)}}(this),Ue=n.previewElement.querySelectorAll("[data-dz-remove]"),Ae=[],w=0,B=Ue.length;w<B;w++)u=Ue[w],Ae.push(u.addEventListener("click",c));return Ae}},removedfile:function(n){var l;return n.previewElement&&(l=n.previewElement)!=null&&l.parentNode.removeChild(n.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(n,l){var c,u,m,v;if(n.previewElement){for(n.previewElement.classList.remove("dz-file-preview"),v=n.previewElement.querySelectorAll("[data-dz-thumbnail]"),u=0,m=v.length;u<m;u++)c=v[u],c.alt=n.name,c.src=l;return setTimeout(function(w){return function(){return n.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(n,l){var c,u,m,v,w;if(n.previewElement){for(n.previewElement.classList.add("dz-error"),typeof l!="String"&&l.error&&(l=l.error),v=n.previewElement.querySelectorAll("[data-dz-errormessage]"),w=[],u=0,m=v.length;u<m;u++)c=v[u],w.push(c.textContent=l);return w}},errormultiple:I,processing:function(n){if(n.previewElement&&(n.previewElement.classList.add("dz-processing"),n._removeLink))return n._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:I,uploadprogress:function(n,l,c){var u,m,v,w,g;if(n.previewElement){for(w=n.previewElement.querySelectorAll("[data-dz-uploadprogress]"),g=[],m=0,v=w.length;m<v;m++)u=w[m],u.nodeName==="PROGRESS"?g.push(u.value=l):g.push(u.style.width=""+l+"%");return g}},totaluploadprogress:I,sending:I,sendingmultiple:I,success:function(n){if(n.previewElement)return n.previewElement.classList.add("dz-success")},successmultiple:I,canceled:function(n){return this.emit("error",n,"Upload canceled.")},canceledmultiple:I,complete:function(n){if(n._removeLink&&(n._removeLink.textContent=this.options.dictRemoveFile),n.previewElement)return n.previewElement.classList.add("dz-complete")},completemultiple:I,maxfilesexceeded:I,maxfilesreached:I,queuecomplete:I,addedfiles:I,previewTemplate:`<div class="dz-preview dz-file-preview">
  <div class="dz-image"><img data-dz-thumbnail /></div>
  <div class="dz-details">
    <div class="dz-size"><span data-dz-size></span></div>
    <div class="dz-filename"><span data-dz-name></span></div>
  </div>
  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>
  <div class="dz-error-message"><span data-dz-errormessage></span></div>
  <div class="dz-success-mark">
    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <title>Check</title>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>
      </g>
    </svg>
  </div>
  <div class="dz-error-mark">
    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <title>Error</title>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">
          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>
        </g>
      </g>
    </svg>
  </div>
</div>`},A=function(){var n,l,c,u,m,v,w;for(u=arguments[0],c=2<=arguments.length?P.call(arguments,1):[],v=0,w=c.length;v<w;v++){l=c[v];for(n in l)m=l[n],u[n]=m}return u};function d(n,l){var c,u,m;if(this.element=n,this.version=d.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element)),!(this.element&&this.element.nodeType!=null))throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(d.instances.push(this),this.element.dropzone=this,c=(m=d.optionsForElement(this.element))!=null?m:{},this.options=A({},this.defaultOptions,c,l??{}),this.options.forceFallback||!d.isBrowserSupported())return this.options.fallback.call(this);if(this.options.url==null&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(u=this.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=d.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=d.getElements(this.options.clickable,"clickable")),this.init()}return d.prototype.getAcceptedFiles=function(){var n,l,c,u,m;for(u=this.files,m=[],l=0,c=u.length;l<c;l++)n=u[l],n.accepted&&m.push(n);return m},d.prototype.getRejectedFiles=function(){var n,l,c,u,m;for(u=this.files,m=[],l=0,c=u.length;l<c;l++)n=u[l],n.accepted||m.push(n);return m},d.prototype.getFilesWithStatus=function(n){var l,c,u,m,v;for(m=this.files,v=[],c=0,u=m.length;c<u;c++)l=m[c],l.status===n&&v.push(l);return v},d.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(d.QUEUED)},d.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(d.UPLOADING)},d.prototype.getAddedFiles=function(){return this.getFilesWithStatus(d.ADDED)},d.prototype.getActiveFiles=function(){var n,l,c,u,m;for(u=this.files,m=[],l=0,c=u.length;l<c;l++)n=u[l],(n.status===d.UPLOADING||n.status===d.QUEUED)&&m.push(n);return m},d.prototype.init=function(){var n,l,c,u,m,v,w;for(this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(d.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(c=function(g){return function(){return g.hiddenFileInput&&g.hiddenFileInput.parentNode.removeChild(g.hiddenFileInput),g.hiddenFileInput=document.createElement("input"),g.hiddenFileInput.setAttribute("type","file"),(g.options.maxFiles==null||g.options.maxFiles>1)&&g.hiddenFileInput.setAttribute("multiple","multiple"),g.hiddenFileInput.className="dz-hidden-input",g.options.acceptedFiles!=null&&g.hiddenFileInput.setAttribute("accept",g.options.acceptedFiles),g.options.capture!=null&&g.hiddenFileInput.setAttribute("capture",g.options.capture),g.hiddenFileInput.style.visibility="hidden",g.hiddenFileInput.style.position="absolute",g.hiddenFileInput.style.top="0",g.hiddenFileInput.style.left="0",g.hiddenFileInput.style.height="0",g.hiddenFileInput.style.width="0",document.querySelector(g.options.hiddenInputContainer).appendChild(g.hiddenFileInput),g.hiddenFileInput.addEventListener("change",function(){var N,B,K,ue;if(B=g.hiddenFileInput.files,B.length)for(K=0,ue=B.length;K<ue;K++)N=B[K],g.addFile(N);return g.emit("addedfiles",B),c()})}}(this),c()),this.URL=(v=window.URL)!=null?v:window.webkitURL,w=this.events,u=0,m=w.length;u<m;u++)n=w[u],this.on(n,this.options[n]);return this.on("uploadprogress",function(g){return function(){return g.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(g){return function(){return g.updateTotalUploadProgress()}}(this)),this.on("canceled",function(g){return function(N){return g.emit("complete",N)}}(this)),this.on("complete",function(g){return function(N){if(g.getAddedFiles().length===0&&g.getUploadingFiles().length===0&&g.getQueuedFiles().length===0)return setTimeout(function(){return g.emit("queuecomplete")},0)}}(this)),l=function(g){return g.stopPropagation(),g.preventDefault?g.preventDefault():g.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(g){return function(N){return g.emit("dragstart",N)}}(this),dragenter:function(g){return function(N){return l(N),g.emit("dragenter",N)}}(this),dragover:function(g){return function(N){var B;try{B=N.dataTransfer.effectAllowed}catch{}return N.dataTransfer.dropEffect=B==="move"||B==="linkMove"?"move":"copy",l(N),g.emit("dragover",N)}}(this),dragleave:function(g){return function(N){return g.emit("dragleave",N)}}(this),drop:function(g){return function(N){return l(N),g.drop(N)}}(this),dragend:function(g){return function(N){return g.emit("dragend",N)}}(this)}}],this.clickableElements.forEach(function(g){return function(N){return g.listeners.push({element:N,events:{click:function(B){return(N!==g.element||B.target===g.element||d.elementInside(B.target,g.element.querySelector(".dz-message")))&&g.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},d.prototype.destroy=function(){var n;return this.disable(),this.removeAllFiles(!0),(n=this.hiddenFileInput)!=null&&n.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,d.instances.splice(d.instances.indexOf(this),1)},d.prototype.updateTotalUploadProgress=function(){var n,l,c,u,m,v,w,g;if(u=0,c=0,n=this.getActiveFiles(),n.length){for(g=this.getActiveFiles(),v=0,w=g.length;v<w;v++)l=g[v],u+=l.upload.bytesSent,c+=l.upload.total;m=100*u/c}else m=100;return this.emit("totaluploadprogress",m,c,u)},d.prototype._getParamName=function(n){return typeof this.options.paramName=="function"?this.options.paramName(n):""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},d.prototype._renameFilename=function(n){return typeof this.options.renameFilename!="function"?n:this.options.renameFilename(n)},d.prototype.getFallbackForm=function(){var n,l,c,u;return(n=this.getExistingFallback())?n:(c='<div class="dz-fallback">',this.options.dictFallbackText&&(c+="<p>"+this.options.dictFallbackText+"</p>"),c+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',l=d.createElement(c),this.element.tagName!=="FORM"?(u=d.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),u.appendChild(l)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),u??l)},d.prototype.getExistingFallback=function(){var n,l,c,u,m,v;for(l=function(w){var g,N,B;for(N=0,B=w.length;N<B;N++)if(g=w[N],/(^| )fallback($| )/.test(g.className))return g},v=["div","form"],u=0,m=v.length;u<m;u++)if(c=v[u],n=l(this.element.getElementsByTagName(c)))return n},d.prototype.setupEventListeners=function(){var n,l,c,u,m,v,w;for(v=this.listeners,w=[],u=0,m=v.length;u<m;u++)n=v[u],w.push(function(){var g,N;g=n.events,N=[];for(l in g)c=g[l],N.push(n.element.addEventListener(l,c,!1));return N}());return w},d.prototype.removeEventListeners=function(){var n,l,c,u,m,v,w;for(v=this.listeners,w=[],u=0,m=v.length;u<m;u++)n=v[u],w.push(function(){var g,N;g=n.events,N=[];for(l in g)c=g[l],N.push(n.element.removeEventListener(l,c,!1));return N}());return w},d.prototype.disable=function(){var n,l,c,u,m;for(this.clickableElements.forEach(function(v){return v.classList.remove("dz-clickable")}),this.removeEventListeners(),u=this.files,m=[],l=0,c=u.length;l<c;l++)n=u[l],m.push(this.cancelUpload(n));return m},d.prototype.enable=function(){return this.clickableElements.forEach(function(n){return n.classList.add("dz-clickable")}),this.setupEventListeners()},d.prototype.filesize=function(n){var l,c,u,m,v,w,g,N;if(u=0,m="b",n>0){for(w=["TB","GB","MB","KB","b"],c=g=0,N=w.length;g<N;c=++g)if(v=w[c],l=Math.pow(this.options.filesizeBase,4-c)/10,n>=l){u=n/Math.pow(this.options.filesizeBase,4-c),m=v;break}u=Math.round(10*u)/10}return"<strong>"+u+"</strong> "+m},d.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},d.prototype.drop=function(n){var l,c;!n.dataTransfer||(this.emit("drop",n),l=n.dataTransfer.files,this.emit("addedfiles",l),l.length&&(c=n.dataTransfer.items,c&&c.length&&c[0].webkitGetAsEntry!=null?this._addFilesFromItems(c):this.handleFiles(l)))},d.prototype.paste=function(n){var l,c;if((n!=null&&(c=n.clipboardData)!=null?c.items:void 0)!=null&&(this.emit("paste",n),l=n.clipboardData.items,l.length))return this._addFilesFromItems(l)},d.prototype.handleFiles=function(n){var l,c,u,m;for(m=[],c=0,u=n.length;c<u;c++)l=n[c],m.push(this.addFile(l));return m},d.prototype._addFilesFromItems=function(n){var l,c,u,m,v;for(v=[],u=0,m=n.length;u<m;u++)c=n[u],c.webkitGetAsEntry!=null&&(l=c.webkitGetAsEntry())?l.isFile?v.push(this.addFile(c.getAsFile())):l.isDirectory?v.push(this._addFilesFromDirectory(l,l.name)):v.push(void 0):c.getAsFile!=null&&(c.kind==null||c.kind==="file")?v.push(this.addFile(c.getAsFile())):v.push(void 0);return v},d.prototype._addFilesFromDirectory=function(n,l){var c,u,m;return c=n.createReader(),u=function(v){return typeof console<"u"&&console!==null&&typeof console.log=="function"?console.log(v):void 0},m=function(v){return function(){return c.readEntries(function(w){var g,N,B;if(w.length>0){for(N=0,B=w.length;N<B;N++)g=w[N],g.isFile?g.file(function(K){if(!(v.options.ignoreHiddenFiles&&K.name.substring(0,1)==="."))return K.fullPath=""+l+"/"+K.name,v.addFile(K)}):g.isDirectory&&v._addFilesFromDirectory(g,""+l+"/"+g.name);m()}return null},u)}}(this),m()},d.prototype.accept=function(n,l){return n.size>this.options.maxFilesize*1024*1024?l(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):d.isValidFile(n,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(l(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,l):l(this.options.dictInvalidFileType)},d.prototype.addFile=function(n){return n.upload={progress:0,total:n.size,bytesSent:0},this.files.push(n),n.status=d.ADDED,this.emit("addedfile",n),this._enqueueThumbnail(n),this.accept(n,function(l){return function(c){return c?(n.accepted=!1,l._errorProcessing([n],c)):(n.accepted=!0,l.options.autoQueue&&l.enqueueFile(n)),l._updateMaxFilesReachedClass()}}(this))},d.prototype.enqueueFiles=function(n){var l,c,u;for(c=0,u=n.length;c<u;c++)l=n[c],this.enqueueFile(l);return null},d.prototype.enqueueFile=function(n){if(n.status===d.ADDED&&n.accepted===!0){if(n.status=d.QUEUED,this.options.autoProcessQueue)return setTimeout(function(l){return function(){return l.processQueue()}}(this),0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.")},d.prototype._thumbnailQueue=[],d.prototype._processingThumbnail=!1,d.prototype._enqueueThumbnail=function(n){if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=this.options.maxThumbnailFilesize*1024*1024)return this._thumbnailQueue.push(n),setTimeout(function(l){return function(){return l._processThumbnailQueue()}}(this),0)},d.prototype._processThumbnailQueue=function(){if(!(this._processingThumbnail||this._thumbnailQueue.length===0))return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(n){return function(){return n._processingThumbnail=!1,n._processThumbnailQueue()}}(this))},d.prototype.removeFile=function(n){if(n.status===d.UPLOADING&&this.cancelUpload(n),this.files=T(this.files,n),this.emit("removedfile",n),this.files.length===0)return this.emit("reset")},d.prototype.removeAllFiles=function(n){var l,c,u,m;for(n==null&&(n=!1),m=this.files.slice(),c=0,u=m.length;c<u;c++)l=m[c],(l.status!==d.UPLOADING||n)&&this.removeFile(l);return null},d.prototype.createThumbnail=function(n,l){var c;return c=new FileReader,c.onload=function(u){return function(){if(n.type==="image/svg+xml"){u.emit("thumbnail",n,c.result),l?.();return}return u.createThumbnailFromUrl(n,c.result,l)}}(this),c.readAsDataURL(n)},d.prototype.createThumbnailFromUrl=function(n,l,c,u){var m;return m=document.createElement("img"),u&&(m.crossOrigin=u),m.onload=function(v){return function(){var w,g,N,B,K,ue,Ue,Ae;if(n.width=m.width,n.height=m.height,N=v.options.resize.call(v,n),N.trgWidth==null&&(N.trgWidth=N.optWidth),N.trgHeight==null&&(N.trgHeight=N.optHeight),w=document.createElement("canvas"),g=w.getContext("2d"),w.width=N.trgWidth,w.height=N.trgHeight,k(g,m,(K=N.srcX)!=null?K:0,(ue=N.srcY)!=null?ue:0,N.srcWidth,N.srcHeight,(Ue=N.trgX)!=null?Ue:0,(Ae=N.trgY)!=null?Ae:0,N.trgWidth,N.trgHeight),B=w.toDataURL("image/png"),v.emit("thumbnail",n,B),c!=null)return c()}}(this),c!=null&&(m.onerror=c),m.src=l},d.prototype.processQueue=function(){var n,l,c,u;if(l=this.options.parallelUploads,c=this.getUploadingFiles().length,n=c,!(c>=l)&&(u=this.getQueuedFiles(),u.length>0)){if(this.options.uploadMultiple)return this.processFiles(u.slice(0,l-c));for(;n<l;){if(!u.length)return;this.processFile(u.shift()),n++}}},d.prototype.processFile=function(n){return this.processFiles([n])},d.prototype.processFiles=function(n){var l,c,u;for(c=0,u=n.length;c<u;c++)l=n[c],l.processing=!0,l.status=d.UPLOADING,this.emit("processing",l);return this.options.uploadMultiple&&this.emit("processingmultiple",n),this.uploadFiles(n)},d.prototype._getFilesWithXhr=function(n){var l,c;return c=function(){var u,m,v,w;for(v=this.files,w=[],u=0,m=v.length;u<m;u++)l=v[u],l.xhr===n&&w.push(l);return w}.call(this)},d.prototype.cancelUpload=function(n){var l,c,u,m,v,w,g;if(n.status===d.UPLOADING){for(c=this._getFilesWithXhr(n.xhr),u=0,v=c.length;u<v;u++)l=c[u],l.status=d.CANCELED;for(n.xhr.abort(),m=0,w=c.length;m<w;m++)l=c[m],this.emit("canceled",l);this.options.uploadMultiple&&this.emit("canceledmultiple",c)}else((g=n.status)===d.ADDED||g===d.QUEUED)&&(n.status=d.CANCELED,this.emit("canceled",n),this.options.uploadMultiple&&this.emit("canceledmultiple",[n]));if(this.options.autoProcessQueue)return this.processQueue()},L=function(){var n,l;return l=arguments[0],n=2<=arguments.length?P.call(arguments,1):[],typeof l=="function"?l.apply(this,n):l},d.prototype.uploadFile=function(n){return this.uploadFiles([n])},d.prototype.uploadFiles=function(n){var l,c,u,m,v,w,g,N,B,K,ue,Ue,Ae,Re,Le,Ri,fo,go,J,qs,Fs,Us,Rs,_o,vo,bo,Co,Yt,yo,Di,ji,zi,To,Qt;for(J=new XMLHttpRequest,qs=0,_o=n.length;qs<_o;qs++)l=n[qs],l.xhr=J;Ue=L(this.options.method,n),fo=L(this.options.url,n),J.open(Ue,fo,!0),J.withCredentials=!!this.options.withCredentials,Le=null,u=function(lt){return function(){var de,De,ye;for(ye=[],de=0,De=n.length;de<De;de++)l=n[de],ye.push(lt._errorProcessing(n,Le||lt.options.dictResponseError.replace("{{statusCode}}",J.status),J));return ye}}(this),Ri=function(lt){return function(de){var De,ye,Ds,js,zs,wo,So,Eo,Bi;if(de!=null)for(ye=100*de.loaded/de.total,Ds=0,wo=n.length;Ds<wo;Ds++)l=n[Ds],l.upload={progress:ye,total:de.total,bytesSent:de.loaded};else{for(De=!0,ye=100,js=0,So=n.length;js<So;js++)l=n[js],l.upload.progress===100&&l.upload.bytesSent===l.upload.total||(De=!1),l.upload.progress=ye,l.upload.bytesSent=l.upload.total;if(De)return}for(Bi=[],zs=0,Eo=n.length;zs<Eo;zs++)l=n[zs],Bi.push(lt.emit("uploadprogress",l,ye,l.upload.bytesSent));return Bi}}(this),J.onload=function(lt){return function(de){var De;if(n[0].status!==d.CANCELED&&J.readyState===4){if(Le=J.responseText,J.getResponseHeader("content-type")&&~J.getResponseHeader("content-type").indexOf("application/json"))try{Le=JSON.parse(Le)}catch(ye){de=ye,Le="Invalid JSON response from server."}return Ri(),200<=(De=J.status)&&De<300?lt._finished(n,Le,de):u()}}}(this),J.onerror=function(lt){return function(){if(n[0].status!==d.CANCELED)return u()}}(this),Re=(yo=J.upload)!=null?yo:J,Re.onprogress=Ri,w={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&A(w,this.options.headers);for(m in w)v=w[m],v&&J.setRequestHeader(m,v);if(c=new FormData,this.options.params){Di=this.options.params;for(ue in Di)go=Di[ue],c.append(ue,go)}for(Fs=0,vo=n.length;Fs<vo;Fs++)l=n[Fs],this.emit("sending",l,J,c);if(this.options.uploadMultiple&&this.emit("sendingmultiple",n,J,c),this.element.tagName==="FORM")for(ji=this.element.querySelectorAll("input, textarea, select, button"),Us=0,bo=ji.length;Us<bo;Us++)if(N=ji[Us],B=N.getAttribute("name"),K=N.getAttribute("type"),N.tagName==="SELECT"&&N.hasAttribute("multiple"))for(zi=N.options,Rs=0,Co=zi.length;Rs<Co;Rs++)Ae=zi[Rs],Ae.selected&&c.append(B,Ae.value);else(!K||(To=K.toLowerCase())!=="checkbox"&&To!=="radio"||N.checked)&&c.append(B,N.value);for(g=Yt=0,Qt=n.length-1;0<=Qt?Yt<=Qt:Yt>=Qt;g=0<=Qt?++Yt:--Yt)c.append(this._getParamName(g),n[g],this._renameFilename(n[g].name));return this.submitRequest(J,c,n)},d.prototype.submitRequest=function(n,l,c){return n.send(l)},d.prototype._finished=function(n,l,c){var u,m,v;for(m=0,v=n.length;m<v;m++)u=n[m],u.status=d.SUCCESS,this.emit("success",u,l,c),this.emit("complete",u);if(this.options.uploadMultiple&&(this.emit("successmultiple",n,l,c),this.emit("completemultiple",n)),this.options.autoProcessQueue)return this.processQueue()},d.prototype._errorProcessing=function(n,l,c){var u,m,v;for(m=0,v=n.length;m<v;m++)u=n[m],u.status=d.ERROR,this.emit("error",u,l,c),this.emit("complete",u);if(this.options.uploadMultiple&&(this.emit("errormultiple",n,l,c),this.emit("completemultiple",n)),this.options.autoProcessQueue)return this.processQueue()},d}(p),a.version="4.3.0",a.options={},a.optionsForElement=function(b){if(b.getAttribute("id"))return a.options[f(b.getAttribute("id"))]},a.instances=[],a.forElement=function(b){if(typeof b=="string"&&(b=document.querySelector(b)),b?.dropzone==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return b.dropzone},a.autoDiscover=!0,a.discover=function(){var b,A,L,d,n,l;for(document.querySelectorAll?L=document.querySelectorAll(".dropzone"):(L=[],b=function(c){var u,m,v,w;for(w=[],m=0,v=c.length;m<v;m++)u=c[m],/(^| )dropzone($| )/.test(u.className)?w.push(L.push(u)):w.push(void 0);return w},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),l=[],d=0,n=L.length;d<n;d++)A=L[d],a.optionsForElement(A)!==!1?l.push(new a(A)):l.push(void 0);return l},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,A,L,d,n;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a")))b=!1;else for(n=a.blacklistedBrowsers,L=0,d=n.length;L<d;L++)if(A=n[L],A.test(navigator.userAgent)){b=!1;continue}}else b=!1;return b},T=function(b,A){var L,d,n,l;for(l=[],d=0,n=b.length;d<n;d++)L=b[d],L!==A&&l.push(L);return l},f=function(b){return b.replace(/[\-_](\w)/g,function(A){return A.charAt(1).toUpperCase()})},a.createElement=function(b){var A;return A=document.createElement("div"),A.innerHTML=b,A.childNodes[0]},a.elementInside=function(b,A){if(b===A)return!0;for(;b=b.parentNode;)if(b===A)return!0;return!1},a.getElement=function(b,A){var L;if(typeof b=="string"?L=document.querySelector(b):b.nodeType!=null&&(L=b),L==null)throw new Error("Invalid `"+A+"` option provided. Please provide a CSS selector or a plain HTML element.");return L},a.getElements=function(b,A){var L,d,n,l,c,u,m,v;if(b instanceof Array){n=[];try{for(l=0,u=b.length;l<u;l++)d=b[l],n.push(this.getElement(d,A))}catch(w){L=w,n=null}}else if(typeof b=="string")for(n=[],v=document.querySelectorAll(b),c=0,m=v.length;c<m;c++)d=v[c],n.push(d);else b.nodeType!=null&&(n=[b]);if(!(n!=null&&n.length))throw new Error("Invalid `"+A+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},a.confirm=function(b,A,L){if(window.confirm(b))return A();if(L!=null)return L()},a.isValidFile=function(b,A){var L,d,n,l,c;if(!A)return!0;for(A=A.split(","),d=b.type,L=d.replace(/\/.*$/,""),l=0,c=A.length;l<c;l++)if(n=A[l],n=n.trim(),n.charAt(0)==="."){if(b.name.toLowerCase().indexOf(n.toLowerCase(),b.name.length-n.length)!==-1)return!0}else if(/\/\*$/.test(n)){if(L===n.replace(/\/.*$/,""))return!0}else if(d===n)return!0;return!1},typeof jQuery<"u"&&jQuery!==null&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),typeof o<"u"&&o!==null?o.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",S=function(b){var A,L,d,n,l,c,u,m,v,w;for(u=b.naturalWidth,c=b.naturalHeight,L=document.createElement("canvas"),L.width=1,L.height=c,d=L.getContext("2d"),d.drawImage(b,0,0),n=d.getImageData(0,0,1,c).data,w=0,l=c,m=c;m>w;)A=n[(m-1)*4+3],A===0?l=m:w=m,m=l+w>>1;return v=m/c,v===0?1:v},k=function(b,A,L,d,n,l,c,u,m,v){var w;return w=S(A),b.drawImage(A,L,d,n,l,c,u,m,v/w)},C=function(b,A){var L,d,n,l,c,u,m,v,w;if(n=!1,w=!0,d=b.document,v=d.documentElement,L=d.addEventListener?"addEventListener":"attachEvent",m=d.addEventListener?"removeEventListener":"detachEvent",u=d.addEventListener?"":"on",l=function(g){if(!(g.type==="readystatechange"&&d.readyState!=="complete")&&((g.type==="load"?b:d)[m](u+g.type,l,!1),!n&&(n=!0)))return A.call(b,g.type||g)},c=function(){var g;try{v.doScroll("left")}catch(N){g=N,setTimeout(c,50);return}return l("poll")},d.readyState!=="complete"){if(d.createEventObject&&v.doScroll){try{w=!b.frameElement}catch{}w&&c()}return d[L](u+"DOMContentLoaded",l,!1),d[L](u+"readystatechange",l,!1),b[L](u+"load",l,!1)}},a._autoDiscoverFunction=function(){if(a.autoDiscover)return a.discover()},C(window,a._autoDiscoverFunction)}).call(this)}).call(s,r(6)(t))},function(t,s,r){"use strict";var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,p=function(S){return typeof Array.isArray=="function"?Array.isArray(S):a.call(S)==="[object Array]"},f=function(S){if(!S||a.call(S)!=="[object Object]")return!1;var k=o.call(S,"constructor"),I=S.constructor&&S.constructor.prototype&&o.call(S.constructor.prototype,"isPrototypeOf");if(S.constructor&&!k&&!I)return!1;var T;for(T in S);return typeof T>"u"||o.call(S,T)};t.exports=function C(){var S,k,I,T,P,q,F=arguments[0],b=1,A=arguments.length,L=!1;for(typeof F=="boolean"?(L=F,F=arguments[1]||{},b=2):(typeof F!="object"&&typeof F!="function"||F==null)&&(F={});b<A;++b)if(S=arguments[b],S!=null)for(k in S)I=F[k],T=S[k],F!==T&&(L&&T&&(f(T)||(P=p(T)))?(P?(P=!1,q=I&&p(I)?I:[]):q=I&&f(I)?I:{},F[k]=C(L,q,T)):typeof T<"u"&&(F[k]=T));return F}},function(t,s){t.exports=e},function(t,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DropzoneComponent=void 0;var o=function(){function d(n,l){for(var c=0;c<l.length;c++){var u=l[c];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}return function(n,l,c){return l&&d(n.prototype,l),c&&d(n,c),n}}(),a=r(0),p=P(a),f=r(4),C=P(f),S=r(3),k=P(S),I=r(1),T=P(I);function P(d){return d&&d.__esModule?d:{default:d}}function q(d,n){if(!(d instanceof n))throw new TypeError("Cannot call a class as a function")}function F(d,n){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:d}function b(d,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);d.prototype=Object.create(n&&n.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(d,n):d.__proto__=n)}var A=null,L=s.DropzoneComponent=function(d){b(n,d);function n(l){q(this,n);var c=F(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,l));return c.state={files:[]},c}return o(n,[{key:"getDjsConfig",value:function(){var c=null,u={url:this.props.config.postUrl?this.props.config.postUrl:null};return this.props.djsConfig?c=(0,k.default)(!0,{},u,this.props.djsConfig):c=u,c}},{key:"componentDidMount",value:function(){var c=this.getDjsConfig();A=A||r(2),A.autoDiscover=!1,!this.props.config.postUrl&&!this.props.eventHandlers.drop&&console.info('Neither postUrl nor a "drop" eventHandler specified, the React-Dropzone component might misbehave.');var u=this.props.config.dropzoneSelector||C.default.findDOMNode(this);this.dropzone=new A(u,c),this.setupEvents()}},{key:"componentWillUnmount",value:function(){var c=this;if(this.dropzone){var u=this.dropzone.getActiveFiles();if(u.length>0){this.queueDestroy=!0;var m=window.setInterval(function(){if(c.queueDestroy===!1)return window.clearInterval(m);if(c.dropzone.getActiveFiles().length===0)return c.dropzone=c.destroy(c.dropzone),window.clearInterval(m)},500)}else this.dropzone=this.destroy(this.dropzone)}}},{key:"componentDidUpdate",value:function(){if(this.queueDestroy=!1,!this.dropzone){var c=this.props.config.dropzoneSelector||C.default.findDOMNode(this);this.dropzone=new A(c,this.getDjsConfig())}}},{key:"componentWillUpdate",value:function(){var c=void 0,u=void 0;c=this.props.djsConfig?this.props.djsConfig:{};try{u=this.props.config.postUrl?{url:this.props.config.postUrl}:{}}catch{u={}}this.dropzone.options=(0,k.default)(!0,{},this.dropzone.options,c,u)}},{key:"render",value:function(){var c=[],u=this.state.files,m=this.props.config,v=this.props.className?"filepicker dropzone "+this.props.className:"filepicker dropzone";if(m.showFiletypeIcon&&m.iconFiletypes&&(!u||u.length<1))for(var w=0;w<this.props.config.iconFiletypes.length;w=w+1)c.push(p.default.createElement(T.default,{filetype:m.iconFiletypes[w],key:"icon-component"+w}));return!this.props.config.postUrl&&this.props.action?p.default.createElement("form",{action:this.props.action,className:v},c,this.props.children):p.default.createElement("div",{className:v}," ",c," ",this.props.children," ")}},{key:"setupEvents",value:function(){var c=this,u=this.props.eventHandlers;if(!(!this.dropzone||!u)){for(var m in u)if(u.hasOwnProperty(m)&&u[m])if(Object.prototype.toString.call(u[m])==="[object Array]")for(var v=0;v<u[m].length;v=v+1)m==="init"?u[m][v](this.dropzone):this.dropzone.on(m,u[m][v]);else m==="init"?u[m](this.dropzone):this.dropzone.on(m,u[m]);this.dropzone.on("addedfile",function(w){if(!!w){var g=c.state.files||[];g.push(w),c.setState({files:g})}}),this.dropzone.on("removedfile",function(w){if(!!w){var g=c.state.files||[];g.forEach(function(N){N.name===w.name&&N.size===w.size&&g.splice(v,1)}),c.setState({files:g})}})}}},{key:"destroy",value:function(c){return c.off(),c.destroy()}}]),n}(p.default.Component);L.defaultProps={djsConfig:{},config:{},eventHandlers:{}},s.default=L},function(t,s){t.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}}])})});var dr=x((pv,Gn)=>{"use strict";var $n=V(),Xe={};Xe.ACCEPTED_MIME_TYPES={IMAGE:["image/jpg","image/jpeg","image/gif","image/png"],VIDEO:["video/mp4","video/quicktime"]};Xe.MAX_FILE_SIZES={IMAGE:5,VIDEO:1e3};Xe.UPLOAD_ENDPOINTS={IMAGE:"/publisher/streaming/media/image"};Xe.UPLOAD_API_ENDPOINTS={GET_VIDEO_METADATA:"/publisher/media/{id}/metadata",S3_UPLOAD_URL:"/publisher/media"};Xe.STATUS={ADDED:"added",CANCELED:"canceled",ERROR:"error",QUEUED:"queued",UPLOADING:"uploading",SUCCESS:"success"};Xe.S3_STATUS={READY:"READY"};Xe.ERROR_MESSAGES={GENERIC:$n._("An error occurred while uploading your file."),INVALID_FILE_TYPE:$n._("You can't upload files of this type.")};Gn.exports=Xe});var Vn=x((uv,hd)=>{hd.exports={}});var Qn=x((dv,Yn)=>{"use strict";var fd=function(){function i(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();function gd(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _d(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function vd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var fe=Vi(),li=O(),Ne=H()._,bd=Hn().default,Wn=$p(),Kn=Gp(),Cd=ct(),mr=Ce(),ci=V(),Y=dr();Vn();var yd="-dropZoneClickArea",pi=function(i){vd(e,i);function e(t){gd(this,e);var s=_d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return s.dropzoneInstance=null,s.getS3UploadUrlRequest=null,s.getVideoMetadataRequest=null,s.pollMetadata=null,s.onDropzoneInit=s.onDropzoneInit.bind(s),s.onFileAdded=s.onFileAdded.bind(s),s.onError=s.onError.bind(s),s.removeFile=s.removeFile.bind(s),s.updateUploadingFiles=s.updateUploadingFiles.bind(s),s.onProcessing=s.onProcessing.bind(s),s.onUploadSuccess=s.onUploadSuccess.bind(s),s.getS3UploadUrl=s.getS3UploadUrl.bind(s),s.validateFile=s.validateFile.bind(s),s.state={numOfRequestAttempts:1},s}return fd(e,[{key:"componentWillUnmount",value:function(){this.dropzoneInstance&&this.dropzoneInstance.removeAllFiles(!0),this.abortGetS3UploadUrlRequest(),this.abortGetVideoMetadataRequest(),this.stopPollingMetadata()}},{key:"UNSAFE_componentWillReceiveProps",value:function(s){this.props.acceptedMimeTypes!==s.acceptedMimeTypes&&(this.dropzoneInstance.hiddenFileInput.accept=s.acceptedMimeTypes)}},{key:"onProcessing",value:function(s){var r=this.props,o=r.facadeApiUrl,a=r.csrf,p=r.maxImageUploadSize,f=r.maxVideoUploadSize,C=0;Ne.contains(Y.ACCEPTED_MIME_TYPES.IMAGE,s.type.toLowerCase())?C=p:Ne.contains(Y.ACCEPTED_MIME_TYPES.VIDEO,s.type.toLowerCase())&&(C=f),this.isVideoAttachment(s)?(Ne.extend(this.dropzoneInstance.options,{url:s.s3UploadUrl,headers:{"Content-Type":s.type},maxFileSize:C,method:"PUT"}),this.dropzoneInstance.submitRequest=function(S,k,I){return S.send(I[0])}):Ne.extend(this.dropzoneInstance.options,{url:""+o+Y.UPLOAD_ENDPOINTS.IMAGE+"?csrfToken="+a,headers:{"content-type":"octet-stream","x-mime-type":s.type},maxFileSize:C}),s.dropzoneAbort=function(S){this.isVideoAttachment(S)?(this.dropzoneInstance.removeFile(S),this.updateUploadingFiles(S),this.stopPollingMetadata(),this.abortGetVideoMetadataRequest()):this.removeFile(S)}.bind(this,s)}},{key:"onDropzoneInit",value:function(s){this.dropzoneInstance=s,this.dropzoneInstance.submitRequest=function(r,o,a){return r.send(a[0])}}},{key:"onFileAdded",value:function(s){this.props.onFileAdded&&(s.id=Ne.uniqueId("file_"),this.props.onFileAdded(s))}},{key:"onUploadSuccess",value:function(s,r){this.isVideoAttachment(s)?this.getVideoMetadata(s):(typeof r=="string"&&(r=JSON.parse(r)),r.url&&this.props.onUploadComplete&&this.props.onUploadComplete(r,s),this.updateUploadingFiles(s))}},{key:"onError",value:function(s,r){s.status!==Y.STATUS.CANCELED&&(this.props.onUploadError(s,r),this.updateUploadingFiles(s))}},{key:"removeFile",value:function(s){this.isVideoAttachment(s)||(this.dropzoneInstance.removeFile(s),this.updateUploadingFiles(s))}},{key:"updateUploadingFiles",value:function(s){this.isVideoAttachment(s)?this.props.onUpdateUploadingFiles(Ne.clone(this.dropzoneInstance.files)):this.props.onUpdateUploadingFiles(this.dropzoneInstance.getUploadingFiles())}},{key:"getS3UploadUrl",value:function(s,r){var o=this;this.isVideoAttachment(s)?this.getS3UploadUrlRequest=Kn({urlRoot:this.props.facadeApiUrl,url:Y.UPLOAD_API_ENDPOINTS.S3_UPLOAD_URL,type:"POST",json:{mimeType:s.type,sizeBytes:s.size},jwt:!0},"qm").then(function(a){a.uploadUrl?(s.s3Id=a.id,s.s3UploadUrl=a.uploadUrl,o.validateFile(s,r)):r(Y.ERROR_MESSAGES.GENERIC)}).catch(function(a){Wn.isAbortionError(a)||r(Y.ERROR_MESSAGES.GENERIC)}):this.validateFile(s,r)}},{key:"validateFile",value:function(s,r){var o=this.props,a=o.maxImageUploadSize,p=o.maxVideoUploadSize,f=Math.round(s.size/1e3/10)/100;Ne.contains(Y.ACCEPTED_MIME_TYPES.IMAGE,s.type.toLocaleLowerCase())?s.size>a*1e3*1e3?r(ci._("File is too big (%d1MB). Max image filesize: %d2MB.").replace("%d1",f).replace("%d2",a)):r():Ne.contains(Y.ACCEPTED_MIME_TYPES.VIDEO,s.type.toLocaleLowerCase())?s.size>p*1e3*1e3?r(ci._("File is too big (%d1MB). Max video filesize: %d2MB.").replace("%d1",f).replace("%d2",p)):r():r(ci._("You can't upload files of this type."))}},{key:"getVideoMetadata",value:function(s){var r=this;this.getVideoMetadataRequest=Kn({urlRoot:this.props.facadeApiUrl,url:Y.UPLOAD_API_ENDPOINTS.GET_VIDEO_METADATA.replace("{id}",s.s3Id),type:"GET",jwt:!0},"qm").then(function(o){r.removeFileAndResetNumOfRequestAttempts(s),o.url?(s.s3Status=Y.S3_STATUS.READY,r.props.onUploadComplete&&r.props.onUploadComplete(o,s)):mr.emit("status:error",{message:Y.ERROR_MESSAGES.GENERIC,autoHide:!0})}).catch(function(o){if(o.errorCause&&o.errorCause.status&&o.errorCause.status===404){var a=Number(Cd.getFeatureValue("PUB_NEW_COMPOSE_VIDEO_NUM_OF_REQUEST_ATTEMPTS")),p=Ne.clone(r.state.numOfRequestAttempts);p++,p<=a?r.pollMetadata=setTimeout(function(){r.setState({numOfRequestAttempts:p}),r.getVideoMetadata(s)},3e3):(r.removeFileAndResetNumOfRequestAttempts(s),mr.emit("status:error",{message:Y.ERROR_MESSAGES.GENERIC,autoHide:!0}))}else Wn.isAbortionError(o)||(r.removeFileAndResetNumOfRequestAttempts(s),mr.emit("status:error",{message:Y.ERROR_MESSAGES.GENERIC,autoHide:!0}))})}},{key:"removeFileAndResetNumOfRequestAttempts",value:function(s){this.dropzoneInstance.removeFile(s),this.updateUploadingFiles(s),this.setState({numOfRequestAttempts:1})}},{key:"abortGetS3UploadUrlRequest",value:function(){this.getS3UploadUrlRequest&&this.getS3UploadUrlRequest.abortAndReject("abort")}},{key:"abortGetVideoMetadataRequest",value:function(){this.getVideoMetadataRequest&&this.getVideoMetadataRequest.abortAndReject("abort")}},{key:"stopPollingMetadata",value:function(){this.pollMetadata&&clearTimeout(this.pollMetadata)}},{key:"isVideoAttachment",value:function(s){return Ne.isObject(s)&&s.type!==void 0&&Ne.contains(Y.ACCEPTED_MIME_TYPES.VIDEO,s.type)}},{key:"renderDropzone",value:function(){var s=this.props,r=s.acceptedMimeTypes,o=s.children,a=s.dropzoneSelector,p=s.maxFiles,f={dropzoneSelector:a,postUrl:"no-url"},C={addedfile:this.onFileAdded,complete:this.removeFile,error:this.onError,init:this.onDropzoneInit,processing:this.onProcessing,success:this.onUploadSuccess,uploadprogress:this.updateUploadingFiles},S={accept:this.getS3UploadUrl,acceptedFiles:r,autoProcessQueue:!0,clickable:this.props.clickableClassName?"."+this.props.clickableClassName:!0,createImageThumbnails:!1,dictFileTooBig:ci._("File is too big ({{filesize}}MB). Max video filesize: {{maxFilesize}}MB."),maxFiles:p,maxFilesize:Y.MAX_FILE_SIZES.VIDEO,parallelUploads:4,method:"PUT",previewsContainer:!1,withCredentials:!0};return li.createElement(bd,{config:f,djsConfig:S,eventHandlers:C},li.createElement("div",{className:this.props.clickableClassName||"dz-message"},o))}},{key:"render",value:function(){return li.createElement("div",{className:"rc-MediaUpload"},this.renderDropzone())}}]),e}(li.Component);pi.propTypes={acceptedMimeTypes:fe.string,children:fe.any,clickableClassName:fe.string,csrf:fe.string.isRequired,dropzoneSelector:fe.string,facadeApiUrl:fe.string.isRequired,maxFiles:fe.number,maxImageUploadSize:fe.number,maxVideoUploadSize:fe.number,onFileAdded:fe.func.isRequired,onUpdateUploadingFiles:fe.func.isRequired,onUploadComplete:fe.func.isRequired,onUploadError:fe.func.isRequired};pi.defaultProps={acceptedMimeTypes:Y.ACCEPTED_MIME_TYPES.IMAGE.concat(Y.ACCEPTED_MIME_TYPES.VIDEO).join(),clickableClassName:yd,maxFiles:1,maxImageUploadSize:Y.MAX_FILE_SIZES.IMAGE,maxVideoUploadSize:Y.MAX_FILE_SIZES.VIDEO};pi.displayName="Media Upload";Yn.exports=pi});var Zn={};Hi(Zn,{default:()=>Td});var Td,Jn=Te(()=>{Td=({html:i})=>i`
  <path
    d="M12.62,5.62 L10,8.25 L7.37,5.62 L5.62,7.37 L8.25,10 L5.62,12.62 L7.37,14.37 L10,11.75 L12.62,14.37 L14.37,12.62 L11.75,10 L14.37,7.37 L12.62,5.62 Z M10,0 C4.5,0 0,4.5 0,10 C0,15.5 4.5,20 10,20 C15.5,20 20,15.5 20,10 C20,4.5 15.5,0 10,0 Z M10,17.5 C5.87,17.5 2.5,14.12 2.5,10 C2.5,5.87 5.87,2.5 10,2.5 C14.12,2.5 17.5,5.87 17.5,10 C17.5,14.12 14.12,17.5 10,17.5 Z"
  />
`});var Xn=x((mv,wd)=>{wd.exports={}});var sa=x((hv,ta)=>{"use strict";var Sd=function(){function i(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();function Ed(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function xd(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function Nd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var ea=Vi(),ht=O(),Id=Ye(),kd=Hs(),Ad=zp(),Ld=(cu(),j(lu)).default,Pd=(Jn(),j(Zn)).default;Xn();var hr=function(i){Nd(e,i);function e(){return Ed(this,e),xd(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Sd(e,[{key:"renderLoading",value:function(){return ht.createElement(kd,null)}},{key:"renderAttachment",value:function(s){var r=this;return ht.createElement("div",null,ht.createElement("span",{className:"-removeButton"},ht.createElement(Ld,{className:"x-StandardIcon",fill:"#949a9b",glyph:Pd,onClick:function(){return r.props.onRemove(s)},size:20})),ht.createElement("div",{className:"-thumbnail",style:{backgroundImage:'url("'+Ad.proxify(s.thumbnailUrl)+'")'}}))}},{key:"render",value:function(){var s=Id({"rc-Attachment":!0,"x-loading":this.props.attachment.isLoading});return ht.createElement("div",{className:s},this.props.attachment.isLoading?this.renderLoading():this.renderAttachment(this.props.attachment))}}]),e}(ht.Component);hr.propTypes={attachment:ea.object,onRemove:ea.func.isRequired};hr.displayName="Attachment";ta.exports=hr});var oa=x((fv,ra)=>{"use strict";var Md=function(){function i(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();function Od(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function qd(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function Fd(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}var ia=Vi(),fr=O(),Ud=sa(),gr=function(i){Fd(e,i);function e(){return Od(this,e),qd(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Md(e,[{key:"renderAttachmentContainer",value:function(){var s=this;return this.props.attachments.map(function(r,o){return fr.createElement(Ud,{attachment:r,key:"attachment-"+o,onRemove:s.props.onAttachmentRemove})})}},{key:"render",value:function(){return fr.createElement("div",{className:"rc-AttachmentContainer"},this.renderAttachmentContainer())}}]),e}(fr.Component);gr.propTypes={attachments:ia.array.isRequired,onAttachmentRemove:ia.func};gr.displayName="Attachment Container";ra.exports=gr});var _r=x(cs=>{"use strict";var Rd=cs&&cs.__makeTemplateObject||function(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i};Object.defineProperty(cs,"__esModule",{value:!0});cs.default=function(i){var e=i.html;return e(na||(na=Rd([`
  <path
    d="M19.02,16.91 L11.1,2.06 C10.63,1.18 9.36,1.18 8.89,2.06 L0.98,16.91 C0.53,17.74 1.13,18.75 2.08,18.75 L17.91,18.75 C18.86,18.75 19.46,17.74 19.02,16.91 Z M10,16.25 C9.31,16.25 8.75,15.69 8.75,15 C8.75,14.31 9.31,13.75 10,13.75 C10.69,13.75 11.25,14.31 11.25,15 C11.25,15.69 10.69,16.25 10,16.25 Z M11.25,12.5 L8.75,12.5 L8.75,7.5 L11.25,7.5 L11.25,12.5 Z"
  />
`],[`
  <path
    d="M19.02,16.91 L11.1,2.06 C10.63,1.18 9.36,1.18 8.89,2.06 L0.98,16.91 C0.53,17.74 1.13,18.75 2.08,18.75 L17.91,18.75 C18.86,18.75 19.46,17.74 19.02,16.91 Z M10,16.25 C9.31,16.25 8.75,15.69 8.75,15 C8.75,14.31 9.31,13.75 10,13.75 C10.69,13.75 11.25,14.31 11.25,15 C11.25,15.69 10.69,16.25 10,16.25 Z M11.25,12.5 L8.75,12.5 L8.75,7.5 L11.25,7.5 L11.25,12.5 Z"
  />
`])))};var na});var aa=x((_v,Dd)=>{Dd.exports={}});var pa=x((vv,ca)=>{"use strict";var ps=O(),ui=R(),la=V(),jd=(xe(),j(Zi)).default,zd=_r().default;aa();var Bd="14px",Et=class extends ps.Component{addCommasToNum(e){return e.toLocaleString()}render(){let{charCount:e,maxCharacterCount:t,hasExceededMaxCount:s,isAboveCharThreshold:r}=this.props,o="";return Boolean(t)?(s?o=la._("This message exceeds the character limit of %1$s").replace("%1$s",this.addCommasToNum(t)):r&&(o=la._("%1$s of %2$s characters").replace("%1$s",this.addCommasToNum(e)).replace("%2$s",this.addCommasToNum(t))),ps.createElement("div",{className:"rc-StreamsCharacterCount"},s&&ps.createElement("div",{className:"iconContainer"},ps.createElement(jd,{fill:"#BA3038",glyph:zd,size:Bd})),ps.createElement("div",{className:"displayTextContainer"},o))):null}};Et.displayName="StreamsCharacterCount";Et.propTypes={charCount:ui.number.isRequired,hasExceededMaxCount:ui.bool,isAboveCharThreshold:ui.bool,maxCharacterCount:ui.number};Et.defaultProps={hasExceededMaxCount:!1,isAboveCharThreshold:!1,maxCharacterCount:null};ca.exports=Et});var ua=x((bv,Hd)=>{Hd.exports={}});var fa=x((yv,ha)=>{"use strict";var ge=O(),Cv=Jt(),ft=R(),da=H(),$d=Ye(),Gd=V(),Vd=Ce(),Wd=ct(),Kd=le(),Yd=Jo(),Qd=Ys(),Zd=(xe(),j(Zi)).default,Jd=Bn().default,Xd=Qn(),em=dr(),tm=oa(),{INSTAGRAMBUSINESS:sm,TIKTOKBUSINESS:im}=Ke().types,ma=xu(),rm=pa();ua();var om=()=>{try{return hs.facadeApiUrl}catch{return""}},nm=()=>{try{return hs.csrfToken}catch{return""}},am=.9,xt=class extends ge.Component{constructor(){super(),this.textAreaRef=ge.createRef(),this.setTextAreaRef=this.setTextAreaRef.bind(this),this.idKey=da.uniqueId("commentInputTextArea"),this._onFocus=this._onFocus.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this.calcAboveMaxCharCount=this.calcAboveMaxCharCount.bind(this),this.calcCharCountThreshold=this.calcCharCountThreshold.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.onFileAdded=this.onFileAdded.bind(this),this.onUploadComplete=this.onUploadComplete.bind(this),this.onUploadError=this.onUploadError.bind(this),this.avatarFallback=this.avatarFallback.bind(this),this.state={attachments:[],avatarOverride:null,characterCount:0,hasExceededMaxCount:!1,isAboveCharThreshold:!1,maxCharacterCount:null}}calcAboveMaxCharCount(e=0){let{maxCharacterCount:t}=this.props;return Boolean(t)&&e>t||!1}calcCharCountThreshold(e=0){let{maxCharacterCount:t}=this.props;return Boolean(t)&&e/t>am||!1}setTextAreaRef(e){this.textAreaRef=e}_onKeyDown(e){let{hasExceededMaxCount:t}=this.state;var s=e.key;s==="Enter"&&!e.shiftKey&&!t&&(e.preventDefault(),this._onInputSubmit(),this.setState({characterCount:0,hasExceededMaxCount:!1,isAboveCharThreshold:!1,maxCharacterCount:null}))}_onKeyUp(e){let t=e.target.value.length,s=this.calcAboveMaxCharCount(t),r=this.calcCharCountThreshold(t);this.setState({charCount:t,hasExceededMaxCount:s,isAboveCharThreshold:r})}_onFocus(e){let{prefillText:t}=this.props;e.target.value===""&&!!t&&(e.target.value=t)}_onInputSubmit(){var e=this.textAreaRef;if(da.isFunction(this.props.onInputSubmit)&&(e&&e.value||this.state.attachments.length>0&&!this.state.attachments[0].isLoading)){var t=e.value||"";this.props.onInputSubmit(t,this.state.attachments[0]),e.disabled=!0}}avatarFallback(){this.setState({avatarOverride:ma.GENERIC_DEFAULT_AVATAR})}clearInput(){var e=this.textAreaRef;e&&(e.value="",e.disabled=!1),this.clearAttachments()}enableInput(){var e=this.textAreaRef;e&&(e.disabled=!1,e.focus())}clearAttachments(){this.setState({attachments:[]})}onFileAdded(){this.setState({attachments:[{isLoading:!0}]})}onUploadComplete(e){var t={url:e.url,fileName:e.fileName,fileSize:e.fileSize,thumbnailUrl:e.thumbnailUrl,mimeType:e.mimeType,isLoading:!1};this.setState({attachments:[t]})}onUploadError(e,t=Gd._("An error occurred while uploading your file.")){Vd.emit("status:error",{message:t,autoHide:!0}),this.clearAttachments()}renderMediaUploadButton(){var e=this.idKey+"uploadMediaButton";let t={acceptedMimeTypes:em.ACCEPTED_MIME_TYPES.IMAGE.join(),clickableClassName:null,csrf:nm(),facadeApiUrl:om(),maxFiles:1,onFileAdded:this.onFileAdded,onUpdateUploadingFiles:Function.prototype,onUploadComplete:this.onUploadComplete,onUploadError:this.onUploadError};return Wd.isFeatureDisabled("NGE_19783_REMOVE_DROPZONE_SELECTOR")&&(t.dropzoneSelector="#"+e,t.clickableClassName=e),ge.createElement("div",{className:"-uploadMediaContainer"},ge.createElement(Xd,{...t},ge.createElement("button",{className:"-uploadMediaButton",id:e},ge.createElement(Zd,{glyph:Jd,size:20}))))}renderAttachmentsContainer(){return ge.createElement("div",{className:"-attachmentsContainer"},ge.createElement(tm,{attachments:this.state.attachments,onAttachmentRemove:this.clearAttachments}))}render(){let e={"rc-CommentInputStreamView":!0,"-mediaUpload":this.props.canUploadMedia},{avatar:t,socialNetworkId:s,username:r}=this.props.socialNetwork;t===null&&this.props.socialNetworkType===sm&&(t=ma.GENERIC_DEFAULT_AVATAR);let{charCount:o,hasExceededMaxCount:a,isAboveCharThreshold:p}=this.state,{canUploadMedia:f,maxCharacterCount:C,placeholder:S,socialNetworkType:k}=this.props;return ge.createElement("div",{className:$d(e)},ge.createElement(Qd,{avatar:this.state.avatarOverride||t,imgFallbackFunc:this.avatarFallback,round:!0,showReauthFlag:!1,size:28,socialNetworkId:s,type:null,username:r}),f&&this.renderMediaUploadButton(),ge.createElement("div",null,ge.createElement(Yd,{expandable:!0,onFocus:this._onFocus,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,placeholder:S,textAreaRef:this.setTextAreaRef}),k===im&&ge.createElement(rm,{charCount:o,hasExceededMaxCount:a,isAboveCharThreshold:p,maxCharacterCount:C})),f&&this.state.attachments.length>0&&this.renderAttachmentsContainer())}};xt.displayName="CommentInput";xt.propTypes={canUploadMedia:ft.bool,maxCharacterCount:ft.number,onInputSubmit:ft.func,placeholder:ft.string,prefillText:ft.string,socialNetwork:ft.object,socialNetworkType:ft.string,socialNetworks:Kd.list};xt.defaultProps={maxCharacterCount:null,prefillText:null};ha.exports=xt});var _a=x(us=>{"use strict";var lm=us&&us.__makeTemplateObject||function(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i};Object.defineProperty(us,"__esModule",{value:!0});us.default=function(i){var e=i.html;return e(ga||(ga=lm([`
  <path
    d="M18.75,2.5 C19.5,2.5 20,2 20,1.25 C20,0.5 19.5,0 18.75,0 L1.25,0 C0.5,0 0,0.5 0,1.25 C0,2 0.5,2.5 1.25,2.5 L2.5,2.5 C2.62,5.5 3.5,8.12 5,10 C3.5,11.75 2.5,14.5 2.5,17.5 L1.25,17.5 C0.5,17.5 0,18 0,18.75 C0,19.5 0.5,20 1.25,20 L18.75,20 C19.5,20 20,19.5 20,18.75 C20,18 19.5,17.5 18.75,17.5 L17.5,17.5 C17.37,14.37 16.5,11.75 15,10 C16.62,8.12 17.5,5.5 17.5,2.5 L18.75,2.5 Z M12.37,9.12 L11.25,10.12 L12.5,11 C14,12.12 15,14.62 15.12,17.5 L5,17.5 C5.12,14.62 6.12,12.12 7.62,11 L8.87,10.12 L7.62,9.12 C6,7.62 5.12,5.25 5,2.5 L15,2.5 C14.87,5.25 14,7.62 12.37,9.12 Z"
  />
`],[`
  <path
    d="M18.75,2.5 C19.5,2.5 20,2 20,1.25 C20,0.5 19.5,0 18.75,0 L1.25,0 C0.5,0 0,0.5 0,1.25 C0,2 0.5,2.5 1.25,2.5 L2.5,2.5 C2.62,5.5 3.5,8.12 5,10 C3.5,11.75 2.5,14.5 2.5,17.5 L1.25,17.5 C0.5,17.5 0,18 0,18.75 C0,19.5 0.5,20 1.25,20 L18.75,20 C19.5,20 20,19.5 20,18.75 C20,18 19.5,17.5 18.75,17.5 L17.5,17.5 C17.37,14.37 16.5,11.75 15,10 C16.62,8.12 17.5,5.5 17.5,2.5 L18.75,2.5 Z M12.37,9.12 L11.25,10.12 L12.5,11 C14,12.12 15,14.62 15.12,17.5 L5,17.5 C5.12,14.62 6.12,12.12 7.62,11 L8.87,10.12 L7.62,9.12 C6,7.62 5.12,5.25 5,2.5 L15,2.5 C14.87,5.25 14,7.62 12.37,9.12 Z"
  />
`])))};var ga});var va=x((wv,cm)=>{cm.exports={}});var ya=x((xv,Ca)=>{"use strict";var gt=O(),vr=R(),Sv=Jt(),Ev=H(),pm=Ye(),um=Jo(),dm=Hs(),ba=V();va();var ds=class extends gt.Component{constructor(e){super(e),this.textarea=null,this.state={message:e.pendingComment.message,submittingComment:!1},this._onError=this._onError.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onChange=this._onChange.bind(this),this._setTextAreaRef=this._setTextAreaRef.bind(this)}componentDidMount(){this._focusInput()}_focusInput(){this.textarea&&this.textarea.focus()}_onError(){this.setState({submittingComment:!1}),this._focusInput()}_onKeyDown(e){var t=e.key;t==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.setState({submittingComment:!0}),this.props.onUpdateComment(this.state.message,this._onError))}_onChange(e){this.setState({message:e})}_renderInstructions(){var e=ba._("Press Esc to ");return gt.createElement("div",{className:"-instructions"},e,gt.createElement("a",{className:"-cancelEdit",href:"#",role:"button",onClick:this.props.onHide},ba._("cancel")))}_setTextAreaRef(e){this.textarea=e}_renderContent(){return gt.createElement("div",{className:"-message"},gt.createElement(um,{disabled:this.state.submittingComment,expandable:!0,onChange:this._onChange,onKeyDown:this._onKeyDown,textAreaRef:this._setTextAreaRef,value:this.state.message}),this._renderInstructions(),this._renderSubmitSpinner())}_renderSubmitSpinner(){if(this.state.submittingComment)return gt.createElement(dm,null)}render(){var e={"rc-EditPendingComment":!0,"-rejected":this.props.pendingComment.isRejected};return gt.createElement("div",{className:pm(e)},this._renderContent())}};ds.displayName="EditPendingComment";ds.propTypes={onHide:vr.func,onUpdateComment:vr.func,pendingComment:vr.object};Ca.exports=ds});var Ta=x((Nv,mm)=>{mm.exports={}});var xa=x((Iv,Ea)=>{"use strict";var Me=O(),wa=R(),Nt=H(),hm=Ye(),fm=nu(),Sa=Ro(),It=es(),gm=Zo();Ta();var ms=class extends Me.Component{_renderAuthorName(e){return Me.createElement("a",{role:"button",className:"-author",onClick:this._onEntityClick.bind(this,{action:"showSocialProfile",data:{actor:e}})},e.name)}_renderLinkEntity(e,t,s){var r={action:"linkClick",url:e.url},o=/^https?:\/\//i,a=e.url.match(o)?e.url:"http://"+e.url;return Me.createElement("a",{href:a,key:t,onClick:s.bind(this,r),rel:"noopener noreferrer",target:"_blank"},It.unescapeString(e.url))}_renderHashtagEntity(e,t,s){var r={action:"showHashtagSearch",origin:"hashtagClick",tag:e.hashtag};return Me.createElement("a",{role:"button",key:t,onClick:s.bind(this,r)},"#"+It.unescapeString(e.hashtag))}_renderText(e){var t=fm.extractEntitiesWithIndices(e),s=[];if(e=e||"",!Nt.isArray(t)||t.length===0)s.push(It.unescapeString(e));else{var r=0;t.forEach((o,a)=>{r<o.indices[0]&&s.push(It.unescapeString(Sa.substrUTF16(e,r,o.indices[0]-r)));var p;this.props.onEntityClick&&(Nt.has(o,"url")?p=this._renderLinkEntity(o,a,this.props.onEntityClick):Nt.has(o,"hashtag")?p=this._renderHashtagEntity(o,a,this.props.onEntityClick):Nt.has(o,"screenName")&&(p="@"+It.unescapeString(o.screenName))),p&&s.push(p),r=o.indices[1]}),r<e.length&&s.push(It.unescapeString(Sa.substrUTF16(e,r,e.length))),s=Nt.compact(s)}return Me.createElement(gm,null,s)}_onEntityClick(e,t){this.props.onEntityClick&&Nt.isFunction(this.props.onEntityClick)&&this.props.onEntityClick(e,t)}render(){var e={avatar:this.props.pendingComment.socialNetworkAvatar,id:this.props.pendingComment.userId,name:this.props.pendingComment.socialNetworkName},t={"rc-PendingComment":!0,"-rejected":!1};return Me.createElement("div",{className:hm(t)},Me.createElement("div",{className:"-avatar"},Me.createElement("img",{alt:this.props.pendingComment.socialNetworkName,src:this.props.pendingComment.socialNetworkAvatar})),Me.createElement("div",{className:"-message"},this._renderAuthorName(e),Me.createElement("span",{className:"-text"},this._renderText(this.props.pendingComment.message))))}};ms.displayName="PendingComment";ms.propTypes={onEntityClick:wa.func,pendingComment:wa.object};Ea.exports=ms});var Na=x((kv,_m)=>{_m.exports={}});var Oa=x((Lv,Ma)=>{"use strict";xe();var La=U(Pu()),Pa=U(_a()),Ie=O(),di=R(),Ia=H(),ka=Ye(),br=Ce(),vm=Qo(),bm=Wo(),fs=V(),Cm=Xo(),ym=sn(),Tm=ya(),wm=xa();Na();var{COMMENT:Aa}=je(),gs=class extends Ie.Component{constructor(e){super(e),this.onUpdateComment=this.onUpdateComment.bind(this)}onUpdateComment(e,t){var s={commentId:this.props.pendingComment.commentId,sequenceNumber:this.props.pendingComment.sequenceNumber,comment:{socialProfileId:this.props.pendingComment.socialNetworkId,comment:e}},r=this.props.pendingComment.canApprove?this.props.flux.getActions(Aa).updateAndApprovePendingComment:this.props.flux.getActions(Aa).updatePendingComment;return r(s).then(o=>{if(o.statusType==="success")br.emit("publisher:updateComment",o),br.emit("status:success",{message:o.statusMsg,autoHide:!0}),this.props.onHide();else throw Error(o.statusMsg)}).catch(function(o){br.emit("status:error",{message:o.message?o.message:fs._("Failed to update the comment"),autoHide:!0}),t&&t()})}_renderMetadata(){if(this._isEditing())return null;var e={createdAt:this.props.pendingComment.rejectedDate||this.props.pendingComment.createdDate,createdAtTimezoneOffset:null},t=e.createdAtTimezoneOffset,s=new Date(Cm.getTimestampWithTimezone(e.createdAt,t)),r=s.toLocaleString();return Ie.createElement(bm,{content:r,placement:"top"},Ie.createElement(vm,null,Ie.createElement(ym,{shorten:!0,timestamp:e.createdAt})))}_isEditing(){return!!this.props.pendingComment.isEditing}_renderIcon(){if(this._isEditing())return null;var e=this.props.pendingComment.isRejected?"10":"16";return Ie.createElement(ne,{fill:"#949a9b",size:e,glyph:this.props.pendingComment.isRejected?La.default:Pa.default})}_renderTitle(){var e,t={"-pendingTitle":!0,"-editing":this._isEditing()};return this._isEditing()?e=this.props.pendingComment.rootId?fs._("Edit reply"):fs._("Edit comment"):(e=this.props.pendingComment.isRejected?fs._("Rejected by %1$s"):fs._("Pending approval from %1$s"),e=e.replace("%1$s",this.props.pendingComment.reviewerName)),Ie.createElement("span",{className:ka(t)},e)}render(){var e,t={pendingComment:this.props.pendingComment};this._isEditing()?(t=Ia.extend(t,{onHide:this.props.onHide,onUpdateComment:this.onUpdateComment}),e=Ie.createElement(Tm,{...t})):(t=Ia.extend(t,{onEntityClick:this.props.onEntityClick,onUpdateComment:this.onUpdateComment}),e=Ie.createElement(wm,{...t}));var s={"rc-PendingCommentContainer":!0,"-rejected":this.props.pendingComment.isRejected};return Ie.createElement("div",{className:ka(s)},Ie.createElement("div",{className:"-pending"},this._renderIcon(),this._renderTitle(),this._renderMetadata()),Ie.createElement("div",{className:"columns"},e))}};gs.displayName="PendingCommentContainer";gs.propTypes={flux:di.object,onEntityClick:di.func,onHide:di.func,pendingComment:di.object};Ma.exports=gs});var Ua=x((Pv,Fa)=>{"use strict";var qa=O(),Cr=R(),{SortDropdown:Sm}=(Ki(),j(Go)),Em=Mu(),kt=class extends qa.Component{constructor(e){super(e),this.state={sortField:this.props.sortField},this.onSortFieldChange=this.onSortFieldChange.bind(this)}onSortFieldChange(e){this.props.onSortChange(e),this.setState({sortField:e})}render(){return qa.createElement(Sm,{isLoading:this.props.isLoading,onSortFieldChange:this.onSortFieldChange,sortField:this.state.sortField})}};kt.propTypes={isLoading:Cr.bool,onSortChange:Cr.func,sortField:Cr.string};kt.defaultProps={sortField:Em.sortField.DATE};kt.displayName="SortDropdownContainer";Fa.exports=kt});var Ra=x((Mv,xm)=>{xm.exports={}});var Va=x((Ov,Ga)=>{"use strict";var z=O(),X=R(),ce=Ee(),At=le(),Da=H(),Nm=Ye(),_e=V(),Im=Hs(),ja=Ro(),mi=ct(),Lt=Ke(),{track:yr}=(Ws(),j(Vs)),{TIKTOKBUSINESS:km}=Ke().types,Am=(xe(),j(Zi)).default,Lm=jn().default,Pm=Yo(),{SOCIAL_NETWORKS:Mm}=Uo(),za=pr(),Om=fa(),Ba=xr(),Ha=Oa(),$a=Ua(),qm=ei(),Tr=Qs(),wr=Ks(),Sr=Zs(),ee=Ze(),{COMMENT_LIST:Fm,COMMENT:Er}=je(),He=Js(),{canAccessCustomApprovals:hi}=Xs();Ra();var Um=150,Pt=class extends z.Component{constructor(e){super(e),this.state={isLoading:!1,submittingComment:!1,sortField:this.props.sortField},this._focusingCommentInput=!1,this.commentInputRef=z.createRef(),this._submitComment=this._submitComment.bind(this),this.toggleCollapseReplies=this.toggleCollapseReplies.bind(this),this.getPreviousComments=this.getPreviousComments.bind(this),this.getInputPrefillText=this.getInputPrefillText.bind(this),this.getSortedComments=this.getSortedComments.bind(this)}shouldComponentUpdate(e,t){return this.props.isCommentInputFocused!==e.isCommentInputFocused?(this._focusingCommentInput=!0,!0):!!(t.submittingComment!==this.state.submittingComment||t.isLoading!==this.state.isLoading||e.isVisible!==this.props.isVisible||e.isInputVisible!==this.props.isInputVisible||e.areRepliesVisible!==this.props.areRepliesVisible||!(Array.isArray(e.comments)&&Array.isArray(this.props.comments)&&e.comments.length===0&&this.props.comments.length===0)&&Sr.didImmutableDataChanged([{type:"list",prop:"comments"}],this.props,e)||Sr.didImmutableDataChanged([{type:"list",prop:"pinnedComments"}],this.props,e)&&mi.isFeatureEnabled("NGE_20249_ENABLE_TIKTOK_COMMENT_PIN")||Sr.didImmutableDataChanged(["messageListContext","socialNetworkContext"],this.props,e)||!Da.isEqual(e.commentList,this.props.commentList)||!Da.isEqual(e.sortField,this.props.sortField))}_focusCommentInput(){this._focusingCommentInput&&this.commentInputRef?.current&&(this.commentInputRef.current.enableInput(),this._focusingCommentInput=!1)}componentDidUpdate(){this._focusCommentInput()}UNSAFE_componentWillMount(){this.props.isCommentInputFocused&&(this._focusingCommentInput=!0)}componentDidMount(){this._focusCommentInput()}_submitComment(e,t){this.setState({submittingComment:!0});let s=ce.Map.isMap(this.props.parent)?this.props.parent.toJS():this.props.parent,r=ee.getMergedContext(this.props);ce.Map.isMap(r)&&(r=r.toJS());let o;hi()?o={attachment:t,messageText:e,messageListId:ee.getContextProp(this.props,"messageListId"),parentContext:r,parentId:s.id,parentUid:s.uid,parentType:this.props.isReplyList?"comment":"post",rootId:s.parentId,postAsSocialNetworkId:this.props.socialNetwork.socialNetworkId}:o={attachment:t,messageText:e,messageListId:ee.getContextProp(this.props,"messageListId"),parentContext:r,parentId:s.id,parentUid:s.uid,parentType:this.props.isReplyList?"comment":"post",rootId:s.parentId,postAsSocialNetworkId:this.props.socialNetwork.socialNetworkId},s.parentCommentId&&(o.parentType="comment",o.parentCommentId=s.parentCommentId);let a=this.props.flux.getActions(Er),p=wr.isModerationBox(o.parentContext.boxType),f=s.metadata.moderationStatus==="published";p&&!f&&a.publish(s,r),a.post(o).then(()=>{this.setState({submittingComment:!1}),this.commentInputRef?.current&&this.commentInputRef.current.clearInput(),qm.showResultToast({success:!0,statusType:"success"},o.parentType=="post"?_e._("Comment added successfully"):_e._("Reply added successfully"))},()=>{this.setState({submittingComment:!1}),this.commentInputRef?.current&&this.commentInputRef.current.enableInput()})}getInputPrefillText(e){let t=ce.Map.isMap(this.props.parent)?this.props.parent.toJS():this.props.parent,{isReplyList:s}=this.props,r=t&&t.author&&t.author.username;return!!r&&s&&wr.isInstagramBusinessBox(e)?`@${r} `:null}_renderCommentInput(){if(!this.props.isInputVisible)return;let e=ee.getContextProp(this.props,"boxType");if(!e||!Tr.getFeatures(e).canComment||wr.isReadOnlyFacebookStream(this.props.snSubType))return;let t=this.props.messageListContext.get("socialNetworkType"),s=this.props.isReplyList?_e._("Write a reply..."):_e._("Write a comment..."),r=this._selectSocialNetworksForInput(),o=this.getInputPrefillText(e);return z.createElement(Om,{canUploadMedia:Tr.getFeatures(e).canUploadMedia,maxCharacterCount:t===km?Um:null,onInputSubmit:this._submitComment,placeholder:s,prefillText:o,ref:this.commentInputRef,socialNetwork:this.props.socialNetwork,socialNetworkType:t,socialNetworks:r})}_selectSocialNetworksForInput(){let e=ce.List([]);if(this.props.socialNetwork&&this.props.socialNetwork.type===Lt.types.FACEBOOKPAGE){let t=this.props.flux.getStore(Mm).getSocialNetworksKeyedByType([Lt.permissions.SN_POST]);return[Lt.types.FACEBOOK,Lt.types.FACEBOOKPAGE].reduce((s,r)=>t[r]?s.concat(t[r]):s,e)}return e}_renderSubmitSpinner(){if(this.state.submittingComment)return z.createElement(Im,null)}_renderPendingReply(e){return hi()&&this.props.pendingComment&&this.props.pendingComment.parentId===e?z.createElement(Ha,{flux:this.props.flux,onEntityClick:this.props.onEntityClick,onHide:this.props.onHide,pendingComment:this.props.pendingComment}):z.createElement("span",null)}_renderCommentAndRepliesWithPendingReply(e){let t=ce.Map.isMap(e)?e.get("uid"):e.uid,s=ce.Map.isMap(e)?e.get("id"):e.id;return z.createElement("span",{key:t},z.createElement(za,{comment:e,features:ce.Map({renderActions:!this.props.hideActions}),hideActions:this.props.hideActions,messageListContext:this.props.messageListContext,messageListId:ee.getContextProp(this.props,"messageListId"),onEntityClick:this.props.onEntityClick,scrollToSpecifiedComment:this.props.scrollToSpecifiedComment,shouldScrollToComment:this.props.shouldScrollToComment,socialNetworkId:ee.getContextProp(this.props,"socialNetworkId")}),this._renderPendingReply(s),z.createElement(Ba,{comment:e,messageListContext:this.props.messageListContext,messageListId:ee.getContextProp(this.props,"messageListId"),onEntityClick:this.props.onEntityClick,scrollToSpecifiedComment:this.props.scrollToSpecifiedComment,shouldScrollToComment:this.props.shouldScrollToComment,socialNetworkId:ee.getContextProp(this.props,"socialNetworkId")}))}_renderCommentAndReplies(e){let t=ce.Map.isMap(e)?e.get("uid"):e.uid,{hideActions:s,messageListContext:r,onEntityClick:o,scrollToSpecifiedComment:a,shouldScrollToComment:p}=this.props;return z.createElement("span",{key:t},z.createElement(za,{comment:e,features:ce.Map({renderActions:!s}),messageListContext:r,messageListId:ee.getContextProp(this.props,"messageListId"),onEntityClick:o,scrollToSpecifiedComment:a,shouldScrollToComment:p,socialNetworkId:ee.getContextProp(this.props,"socialNetworkId")}),z.createElement(Ba,{comment:e,messageListContext:r,messageListId:ee.getContextProp(this.props,"messageListId"),onEntityClick:o,scrollToSpecifiedComment:a,shouldScrollToComment:p,socialNetworkId:ee.getContextProp(this.props,"socialNetworkId")}))}_renderComments(){let{areRepliesVisible:e,comments:t,parentComment:s,pendingComment:r,pinnedComments:o,isReplyList:a,socialNetwork:p}=this.props;if(mi.isFeatureEnabled("NGE_20249_ENABLE_TIKTOK_COMMENT_PIN")&&o.size>0||t.size>0){if(!e)return null}else return null;let S=p?.type==Lt.types.TIKTOKBUSINESS&&!a;if(hi()){if(s)return this._renderCommentAndRepliesWithPendingReply(s);if(this._isPendingComment())return z.createElement("div",null,t.map(k=>this._renderCommentAndRepliesWithPendingReply(k)));if(!r)return z.createElement("div",null,S&&z.createElement($a,{isLoading:this.state.isLoading,onSortChange:this.getSortedComments,sortField:this.state.sortField}),z.createElement("div",null,mi.isFeatureEnabled("NGE_20249_ENABLE_TIKTOK_COMMENT_PIN")?o.map(k=>this._renderCommentAndRepliesWithPendingReply(k)):null,t.map(k=>this._renderCommentAndRepliesWithPendingReply(k))))}else return z.createElement("div",null,S&&z.createElement($a,{isLoading:this.state.isLoading,onSortChange:this.getSortedComments,sortField:this.state.sortField}),z.createElement("div",null,mi.isFeatureEnabled("NGE_20249_ENABLE_TIKTOK_COMMENT_PIN")?o.map(k=>this._renderCommentAndReplies(k)):null,t.map(k=>this._renderCommentAndReplies(k))))}_renderViewLink(){let{areRepliesVisible:e,commentCount:t,comments:s,isReplyList:r}=this.props,o=s.size,a=ee.getContextProp(this.props,"boxType"),p,f,C;if(!this.shouldRenderViewLink())return null;if(o>0&&e)p=r?_e._("View more replies"):_e._("View more comments"),C=r?He.VIEW_MORE_REPLIES:He.VIEW_MORE_COMMENTS,f=t>o?_e._("%1$s of %2$s").replace("%1$s",o).replace("%2$s",ja.numberFormat(t)):null;else{if(r)return null;p=t===1?_e._("View Comment"):_e._("View Comments"),f=t===1?_e._("1 comment"):_e._("%1$s comments").replace("%1$s",ja.numberFormat(t)),C=He.VIEW_COMMENTS}return z.createElement("div",{className:"-viewMore"},z.createElement("button",{"aria-expanded":!1,disabled:this.state.isLoading,onClick:()=>this.showComments(C)},p),f&&Tr.getFeatures(a).canViewCommentCount&&z.createElement("span",{className:"-count"},f))}shouldRenderViewLink(){let{areRepliesVisible:e,commentCount:t,commentList:s,comments:r,pendingComment:o}=this.props,a=r.toJS(),p=a.filter(C=>!C.isNew).length,f=!!s&&!!s.nextPageToken;return o&&!this._isPendingComment()?!1:t!==a.length&&(p!==t&&f||!p&&t)?!0:a.length>0&&!e}shouldRenderHideButton(){let{areRepliesVisible:e,comments:t,isConversation:s}=this.props,r=t.size;if(s)return!1;if(e){if(r===0)return!1}else return!1;return!0}_renderHideButton(){let{isReplyList:e}=this.props,t="";return this.shouldRenderHideButton()?(e?t=_e._("Hide replies"):t=_e._("Hide comments"),z.createElement("div",{className:"-collapseRepliesWrapper"},z.createElement(Pm,{"aria-expanded":!0,className:"-collapseReplies",onClick:this.toggleCollapseReplies,type:"button"},t,z.createElement(Am,{"aria-hidden":!0,className:"-icon",fill:"currentColor",glyph:Lm,size:14})))):null}showComments(e){let{areRepliesVisible:t,comments:s,sortField:r}=this.props;s.size===0||t?this.getPreviousComments(e,r):this.toggleCollapseReplies()}toggleCollapseReplies(){let{isReplyList:e,parent:t}=this.props,s=ee.getContextProp(this.props,"messageListId"),r=ce.Map.isMap(t)?t.toJS():t,o={messageListId:s,parentUid:r.uid},a=ee.getContextProp(this.props,"boxType");this.props.areRepliesVisible?(o.hideInput=e,yr(He.STREAMS_ORIGIN,He.HIDE_REPLIES,{boxType:a,socialNetworkType:this.props.socialNetwork.type}),this.props.flux.getActions(Er).hideReply(o)):(yr(He.STREAMS_ORIGIN,He.SHOW_REPLIES,{boxType:a,socialNetworkType:this.props.socialNetwork.type}),this.props.flux.getActions(Er).showReply(o))}getSortedComments(e){this.props.sortField!==e&&(this.setState({sortField:e}),this.getPreviousComments(He.SORT_COMMENTS,e))}getPreviousComments(e,t){let s=ee.getMergedContext(this.props);ce.Map.isMap(s)&&(s=s.toJS());let r=ee.getContextProp(this.props,"messageListId"),a={tabId:this.props.messageListContext.get("tabId"),messageListId:r,objectType:this.props.isReplyList?"comment":"post",parentContext:s,sortField:t};this.props.commentList&&this.props.commentList.nextPageToken&&this.props.sortField===t&&(a.nextPageToken=this.props.commentList.nextPageToken);let p=ce.Map.isMap(this.props.parent)?this.props.parent.toJS():this.props.parent;a.parentId=p.id,a.parentUid=p.uid,a.parentAuthorId=p.author.id,a.grandParentId=p.parentId;let f=ee.getContextProp(this.props,"boxType");yr(He.STREAMS_ORIGIN,e,{boxType:f,socialNetworkType:this.props.socialNetwork.type,sortField:t}),this.props.sortField!==t&&this.setState({isLoading:!0}),this.props.flux.getActions(Fm).fetch(a).then(()=>{this.setState({isLoading:!1})})}_renderPendingComment(){if(hi()&&this._isPendingComment())return z.createElement(Ha,{flux:this.props.flux,onEntityClick:this.props.onEntityClick,onHide:this.props.onHide,pendingComment:this.props.pendingComment})}_isPendingComment(){return this.props.pendingComment&&!this.props.pendingComment.rootId}render(){let e={"rc-CommentList":!0,isHidden:!this.props.isVisible};return this.props.messageListContext.get("socialNetworkType")===Lt.types.INSTAGRAM?z.createElement("noscript",null):z.createElement("div",{className:Nm(e)},this._renderCommentInput(),this._renderSubmitSpinner(),this._renderPendingComment(),this._renderComments(),z.createElement("div",{className:"-viewHideButtons"},this._renderViewLink(),this._renderHideButton()))}};Pt.displayName="CommentList";Pt.propTypes={areRepliesVisible:X.bool,commentCount:X.number,commentList:X.object,comments:At.list,flux:X.object,hideActions:X.bool,isCommentInputFocused:X.bool,isConversation:X.bool,isInputVisible:X.bool,isReplyList:X.bool,isVisible:X.bool,messageListContext:At.map.isRequired,onEntityClick:X.func,onHide:X.func,parent:At.map,parentComment:At.map,pendingComment:X.object,pinnedComments:At.list,scrollToSpecifiedComment:X.func,shouldScrollToComment:X.bool,snSubType:X.string,socialNetwork:X.object,socialNetworkContext:At.map.isRequired,sortField:X.string};Pt.defaultProps={areRepliesVisible:!1,comments:ce.List(),hideActions:!1,pinnedComments:ce.List(),scrollToSpecifiedComment:()=>{},shouldScrollToComment:!1};Ga.exports=Pt});var Ir=x((qv,Ka)=>{"use strict";var pe=R(),Nr=Ee(),_s=le(),fi=O(),Rm=Qe(),Dm=ct(),Wa=Ze(),jm=Va(),Mt=class extends fi.Component{render(){let{parent:e,socialNetworkContext:t}=this.props;return t.isEmpty()?fi.createElement("noscript",null):fi.createElement(Rm,{connectToStores:{message:s=>{let o=(Nr.Map.isMap(e)?e.toJS():e).uid,a=Wa.getContextProp(this.props,"messageListId"),p=s.areRepliesVisible(a,o);return{comments:Dm.isFeatureEnabled("NGE_20249_ENABLE_TIKTOK_COMMENT_PIN")?s.getNonPinnedMessagesByParentId(o,a):s.getMessagesByParentId(o,a),areRepliesVisible:p}},socialNetworks:s=>{let r=Wa.getContextProp(this.props,"socialNetworkId");return{socialNetwork:s.get(r.toString())}}}},fi.createElement(jm,{...this.props}))}};Mt.displayName="CommentListContainer";Mt.defaultProps={isConversation:!1,pinnedComments:Nr.List(),scrollToSpecifiedComment:()=>{},shouldScrollToComment:!1,socialNetworkContext:Nr.Map()};Mt.propTypes={commentCount:pe.number,commentList:pe.object,flux:pe.object,hideActions:pe.bool,inputPlaceholder:pe.string,isCommentInputFocused:pe.bool,isConversation:pe.bool,isInputVisible:pe.bool,messageListContext:_s.map.isRequired,onHide:pe.func,parent:_s.map.isRequired,parentComment:_s.map,pendingComment:pe.object,pinnedComments:_s.list,scrollToSpecifiedComment:pe.func,shouldScrollToComment:pe.bool,snSubType:pe.string,socialNetworkContext:_s.map.isRequired,sortField:pe.string};Ka.exports=Mt});var Za=x((Rv,Qa)=>{"use strict";xe();Un();var ve=O(),_t=R(),vt=Ee(),kr=le(),zm=Qe(),gi=V(),Bm=Yo(),Hm=Qo(),$m=Ys(),{track:Ya}=(Ws(),j(Vs)),Gm=sn(),vs=Ze(),Vm=Qs(),_i=Js(),{COMMENT_LIST:Wm,COMMENT:Km}=je();Rn();var Ot=class extends ve.Component{constructor(e){super(e),this._getReplies=this._getReplies.bind(this)}_renderReplies(){let e=this.props.comment,t=Ir(),s=vt.Map.isMap(e)?e.get("uid"):e.uid,r=vt.Map.isMap(e)?e.getIn(["metadata","counts","replies"]):e.metadata.counts.replies,o=vs.getContextProp(this.props,"messageListId");return ve.createElement("div",{className:"-replies"},ve.createElement(zm,{connectToStores:{commentList:a=>({commentList:a.get(s,o),isCommentInputFocused:a.getCommentListFocused(s,o)}),message:a=>({isInputVisible:a.isInputVisible(o,s)})}},ve.createElement(t,{commentCount:r,hideActions:this.props.hideActions,isReplyList:!0,isVisible:!0,messageListContext:this.props.messageListContext,onEntityClick:this.props.onEntityClick,parent:this.props.comment,scrollToSpecifiedComment:this.props.scrollToSpecifiedComment,shouldScrollToComment:this.props.shouldScrollToComment,snSubType:this.props.messageListContext.get("socialNetworkSubType",null),socialNetworkContext:this.props.socialNetworkContext})))}shouldRenderTrigger(){let{areRepliesLoaded:e,areRepliesVisible:t}=this.props;return!(e&&t)}_renderTrigger(){let{comment:e}=this.props,t=vs.getContextProp(this.props,"boxType"),s=e.getIn(["metadata","counts","replies"],0),r=e.get("latestReply"),o=!!e.getIn(["latestReply","author","name"]);if(!this.shouldRenderTrigger())return null;let a;if(s===1&&r&&o?a=this._renderReplyTriggerWithAvatar(r):s>0&&(a=this._renderRepliesTrigger(s,t)),a)return ve.createElement("div",{className:"-trigger"},ve.createElement(ne,{"aria-hidden":!0,className:"-icon",fill:"currentColor",size:15,glyph:Fn}),a)}_renderReplyTriggerWithAvatar(e){vt.Map.isMap(e)&&(e=e.toJS());let t=e.author,s=t.username||t.name,r=ve.createElement($m,{alt:s,avatar:t.avatar,className:"-snAvatar",size:28}),o=gi._("% replied").replace("%",s),a=ve.createElement(Hm,null,ve.createElement(Gm,{shorten:!0,timestamp:e.metadata.createdAt}));return ve.createElement("span",null,r,ve.createElement("a",{role:"button",onClick:this._getReplies,tabIndex:"0"},o),a)}_renderRepliesTrigger(e,t){let s=gi._("View reply");return Vm.getFeatures(t).canViewCommentCount?e>1&&(s=gi._("% Replies").replace("%",e)):s=gi._("View replies"),ve.createElement(Bm,{"aria-expanded":!1,onClick:this._getReplies},s)}_getReplies(){let{areRepliesLoaded:e,areRepliesVisible:t,comment:s}=this.props,r=vt.Map.isMap(s)?s.get("id"):s.id,o=vt.Map.isMap(s)?s.get("uid"):s.uid,a=vt.Map.isMap(s)?s.get("parentId"):s.parentId,p=vs.getContextProp(this.props,"messageListId"),f=this.props.messageListContext.get("tabId"),C=vs.getMergedContext(this.props);if(e&&!t){let S={messageListId:p,parentUid:o};Ya(_i.STREAMS_ORIGIN,_i.SHOW_REPLIES,{boxType:vs.getContextProp(this.props,"boxType"),socialNetworkType:this.props.socialNetworkContext.get("socialNetworkType")}),this.props.flux.getActions(Km).showReply(S)}else if(C){vt.Map.isMap(C)&&(C=C.toJS()),Ya(_i.STREAMS_ORIGIN,_i.VIEW_REPLIES,{socialNetworkType:this.props.socialNetworkContext.get("socialNetworkType")});let S={objectType:"comment",tabId:f,messageListId:p,parentContext:C,parentId:r,parentUid:o,grandParentId:a};this.props.flux.getActions(Wm).fetch(S)}}render(){let e=this._renderTrigger(),t=this._renderReplies();return e||t?ve.createElement("div",{className:"rc-CommentReplies"},e,t):null}};Ot.displayName="CommentRepliesContainer";Ot.propTypes={areRepliesLoaded:_t.bool,areRepliesVisible:_t.bool,comment:kr.map,flux:_t.object,hideActions:_t.bool,messageListContext:kr.map,onEntityClick:_t.func,scrollToSpecifiedComment:_t.func,shouldScrollToComment:_t.bool,socialNetworkContext:kr.map};Ot.defaultProps={areRepliesLoaded:!1,areRepliesVisible:!1,hideActions:!1,scrollToSpecifiedComment:()=>{},shouldScrollToComment:!1};Qa.exports=Ot});var xr=x((Dv,Ja)=>{"use strict";var Ym=H(),Oe=R(),Qm=Ee(),Zm=le(),Ar=O(),Jm=Qe(),Xm=Za(),vi=class extends Ar.Component{render(){let{comment:e,messageListId:t,scrollToSpecifiedComment:s,shouldScrollToComment:r}=this.props,o=Qm.Map.isMap(e)?e.get("uid"):e.uid;return Ar.createElement(Jm,{connectToStores:{message:a=>{let p=a.getMessagesByParentId(o,t);return{areRepliesLoaded:p?p.size>0:!1,areRepliesVisible:a.areRepliesVisible(t,o)}},messageContext:a=>({socialNetworkContext:a.getSocialNetworkContext(this.props.socialNetworkId,o)})},...Ym.pick(this.props,"comment","hideActions","messageListContext","onEntityClick")},Ar.createElement(Xm,{scrollToSpecifiedComment:s,shouldScrollToComment:r}))}};vi.propTypes={comment:Zm.map,hideActions:Oe.bool,messageListId:Oe.oneOfType([Oe.string,Oe.number]).isRequired,onEntityClick:Oe.func,scrollToSpecifiedComment:Oe.func,shouldScrollToComment:Oe.bool,socialNetworkId:Oe.oneOfType([Oe.string,Oe.number]).isRequired};Ja.exports=vi});var Xa=x((jv,eh)=>{eh.exports={}});var rl=x((zv,il)=>{"use strict";var el=R(),th=Ee(),Lr=le(),qt=O(),sh=H(),ih=es(),{AssignmentBanner:rh}=(Ki(),j(Go)),oh=lr(),nh=pr(),ah=xr(),bs=Ze(),lh=Zs(),tl=on(),{canAccessHootdeskIntegration:ch}=Xs(),sl=en();Xa();var Cs=class extends qt.Component{constructor(e){super(e),this._onEntityClick=this._onEntityClick.bind(this),this._getContextVerb=this._getContextVerb.bind(this)}shouldComponentUpdate(e,t){return sh.isEmpty(e)||!e.messageListContext?!1:lh.didImmutableDataChanged(["message","messageListContext","socialNetworkContext"],this.props,e)}_onEntityClick(e,t){var s=bs.getMergedContext(this.props),r={options:e,event:t,message:this.props.message,context:s,flux:this.props.flux};ih.onEntityClick(r)}_getContextVerb(e){var t=bs.getContextProp(this.props,"socialNetworkType");return sl.getContextVerb(e,t)}_renderBanner(){let e=this.props.socialNetworkContext;if(th.Map.isMap(e)&&(e=e.toJS()),ch()){if(tl.canRenderHootdeskAssignmentBanner(e)){let t=e.interaction.hootdeskAssignment,s=tl.getHootdeskAssignmentBannerProps(t,e,this.props.messageListContext,"COMMENT");return qt.createElement(rh,{assignedItem:s})}}else if(e.interaction&&e.interaction.response)return qt.createElement(oh,{interaction:e.interaction})}render(){let{message:e}=this.props;if(bs.getMergedContext(this.props)&&e){let s=bs.getContextProp(this.props,"messageListId"),r=bs.getContextProp(this.props,"socialNetworkId"),o=e.getIn(["action","verb"]);return qt.createElement("div",{className:"rc-CommentContext"},this._renderBanner(),qt.createElement(nh,{comment:e,headlineContent:this.props.headline,headlineIconSourceKey:sl.getActionVerbIconSourceKey(o),messageListContext:this.props.messageListContext,messageListId:s,onEntityClick:this._onEntityClick,socialNetworkId:r}),qt.createElement(ah,{comment:e,messageListContext:this.props.messageListContext,messageListId:s,onEntityClick:this._onEntityClick,socialNetworkId:r}))}else return null}};Cs.displayName="CommentContext";Cs.propTypes={flux:el.object,headline:el.node,message:Lr.map,messageListContext:Lr.map,socialNetworkContext:Lr.map};il.exports=Cs});var et,tt,Pr=Te(()=>{et=class extends Error{constructor(){super("Failed to retrieve member permissions"),Object.setPrototypeOf(this,et.prototype),this.name="FailedToGetMemberPermissionsError"}static isInstance(e){return e instanceof this}},tt=class extends Error{constructor(){super("You do not have permission to boost ads"),Object.setPrototypeOf(this,tt.prototype),this.name="CannotBoostAdsPermissionError"}static isInstance(e){return e instanceof this}}});var ol,bi,nl,al,ll,cl,pl,Mr=Te(()=>{ol="hs-app-boost",bi="SINGLE_POST_PROMOTION",nl="LINKEDIN_SINGLE_POST_PROMOTION",al="SN_MANAGE_ADS",ll="IMAGE_TYPE",cl="VIDEO_TYPE",pl="OTHER"});var bt,ul=Te(()=>{Tu();bt=Ko("hootbus");bt||(bt={listeners:[],emit:()=>{bt.listeners.forEach(i=>i())},on:(i,e)=>{bt.listeners.push(e)}})});var dl,ml=Te(()=>{ko();wu();ul();Mr();Pr();dl=async({props:i,memberId:e,onPublishSuccess:t=()=>{},onClose:s=()=>{}})=>{let r=i.isScheduled?await Qi(e,i.scheduledPageIds.join(",")):await Qi(e,i.pageId);if(r.length<1)throw new et;if(!r.some(S=>S.permissionCodes.includes(al)))throw new tt;let a=await Bs(ol),p=document.querySelector("#fullScreenBoostMountPoint");p===null&&(p=document.createElement("div"),p.id="fullScreenBoostMountPoint",document.body.appendChild(p));function f(){a.unmount(p),p.remove(),bt.off("address:path:change",C)}function C(S){a.isBoostPath(S)||f()}a.mount(p,{...i,HS_ENV_APP_TYPE:i.HS_ENV_APP_TYPE||bi,onClose:()=>{f(),s()},onPublishSuccess:(...S)=>{f(),t(...S)}}),bt.on("address:path:change",C)}});var Ci={};Hi(Ci,{CannotBoostAdsPermissionError:()=>tt,ENV_APP_TYPE_FACEBOOK_SINGLE_POST_PROMOTION:()=>bi,ENV_APP_TYPE_LINKEDIN_SINGLE_POST_PROMOTION:()=>nl,FailedToGetMemberPermissionsError:()=>et,POST_TYPE_IMAGE:()=>ll,POST_TYPE_OTHER:()=>pl,POST_TYPE_VIDEO:()=>cl,willMount:()=>dl});var yi=Te(()=>{Pr();Mr();ml()});var hl,fl=Te(()=>{hl=({html:i})=>i`
  <path
    d="M0,1.25 L0,18.75 C0,19.5 0.5,20 1.25,20 L18.75,20 C19.5,20 20,19.5 20,18.75 L20,1.25 C20,0.5 19.5,0 18.75,0 L1.25,0 C0.5,0 0,0.5 0,1.25 Z M16.25,10 L14,7.75 L8.37,13.37 L6.62,11.62 L12.25,6 L10,3.7 L16.25,3.75 L16.25,10 Z"
  />
`});var _l=x((sb,gl)=>{"use strict";var ph=Ce();gl.exports={trackEvent:i=>{ph.emit("googleAnalytics:trackEvent",i)}}});var vl=x((ib,uh)=>{uh.exports={}});var yl=x((nb,Cl)=>{"use strict";xe();fl();var Ti=O(),wi=R(),Or=Ee(),dh=H(),mh=V(),bl=du().promotedContentLog,hh=_l();vl();var ys=class extends Ti.Component{constructor(){super(),this._onLinkClick=this._onLinkClick.bind(this)}shouldComponentUpdate(e){return dh.isEmpty(e)?!1:Or.Map.isMap(e.promotedContent)?!Or.is(e.promotedContent,this.props.promotedContent):!0}_onLinkClick(){var e={action:bl.promotedUserClick.gaTrackingAction,category:bl.gaTrackingCategory,label:this.props.trackingLabel};hh.trackEvent(e)}render(){var{promotedContent:e}=this.props;if(Or.Map.isMap(e)&&(e=e.toJS()),e){var t=e.advertiser,s=`${mh._("Promoted by")} `,r=Ti.createElement("a",{href:t.url,onClick:this._onLinkClick,rel:"noopener noreferrer",target:"_blank"},t.name);return Ti.createElement("div",{className:"rc-Promoted"},Ti.createElement(ne,{className:"-icon",fill:"currentColor",size:16,glyph:hl}),s,r)}else return null}};ys.displayName="Promoted";ys.propTypes={flux:wi.object,promotedContent:wi.object,socialNetworkId:wi.string,trackingLabel:wi.string};Cl.exports=ys});var Tl=x((ab,fh)=>{fh.exports={}});var xl=x((cb,El)=>{"use strict";xe();var Sl=U(Vo()),Si=O(),qr=R(),wl=V();Tl();var Ft=class extends Si.Component{constructor(){super(),this._handleOnClick=this._handleOnClick.bind(this)}_handleOnClick(){this.props.isToggled?this.props.onHideConversation():this.props.onShowConversation()}render(){var e=this.props.isToggled?wl._("Hide Conversation"):wl._("Show Conversation");return Si.createElement("div",{className:"rc-ConversationToggle"},Si.createElement("button",{"aria-label":e,className:"-toggleButton",onClick:this._handleOnClick},Si.createElement(ne,{className:"-icon",fill:"currentColor",size:16,glyph:Sl.default}),e))}};Ft.displayName="ConversationToggle";Ft.propTypes={isToggled:qr.bool.isRequired,onHideConversation:qr.func.isRequired,onShowConversation:qr.func.isRequired};Ft.defaultProps={};El.exports=Ft});var Nl=x((pb,gh)=>{gh.exports={}});var Al=x((db,kl)=>{"use strict";xe();var Il=U(Eu()),Ts=O(),_h=R(),vh=H();Nl();var Ut=class extends Ts.Component{render(){var e=vh.map(this.props.tags,t=>Ts.createElement("li",{className:"-tag",key:t.tagName},t.tagName));return e.length?Ts.createElement("div",{className:"rc-MessageTags"},Ts.createElement(ne,{className:"-icon",fill:"currentColor",size:16,glyph:Il.default}),Ts.createElement("ul",{className:"-tags"},e)):null}};Ut.displayName="MessageTags";Ut.propTypes={tags:_h.array};Ut.defaultProps={};kl.exports=Ut});var Ll=x((mb,bh)=>{bh.exports={}});var Ml=x((hb,Pl)=>{"use strict";var Fr=le(),be=O(),Ur=R(),Ei=V(),Ch=es(),yh=rn();Ll();var ws=class extends yh{constructor(e){super(e),this.state={showDescription:!1},this._toggleShowDescription=this._toggleShowDescription.bind(this)}shouldComponentUpdate(e,t){return t!=this.state?!0:super.shouldComponentUpdate(e,t)}_toggleShowDescription(e){e.preventDefault(),this.setState({showDescription:!this.state.showDescription})}_renderDescriptionToggle(e){if(e.text){var t=this.state.showDescription?Ei._("Show Less"):Ei._("Show More");return be.createElement("span",null," \xB7 ",be.createElement("a",{role:"button",onClick:this._toggleShowDescription,tabIndex:"0"},t)," ")}}_renderIsHD(e){if(e.isHD)return be.createElement("span",null," \xB7 ",be.createElement("div",{className:"-hd"},Ei._("HD")))}_renderIsCC(e){if(e.isCC)return be.createElement("span",null," \xB7 ",be.createElement("div",{className:"-cc"},Ei._("CC")))}_renderDescription(e){if(this.state.showDescription)return be.createElement("div",{className:"-description"},Ch.processTextWithEntities(e.text,e.entities,this.props.onEntityClick))}render(){let e=this.props.message.toJS();return be.createElement("div",{className:"rc-Message"},be.createElement("div",{className:"-messageDetails"},this.renderAuthor(),this.renderMetadata()),be.createElement("div",{className:"-body"},this.renderMedia(e.entities),be.createElement("div",{className:"-mediaMetadata"},be.createElement("a",{className:"-title",href:e.metadata.url,rel:"noopener noreferrer",target:"_blank"},e.title),be.createElement("div",{className:"-subtitle"},this._renderViewCount(e),this._renderIsHD(e),this._renderIsCC(e),this._renderDescriptionToggle(e),this._renderDescription(e)))))}};ws.displayName="VideoMessage";ws.propTypes={getContextVerb:Ur.func,message:Fr.map,messageListContext:Fr.map,onEntityClick:Ur.func,socialNetworkContext:Fr.map,timezoneOffset:Ur.number};Pl.exports=ws});var Fl=x((fb,ql)=>{"use strict";var Ol=O(),Th=V(),{A:wh}=(Wp(),j(Vp)),Rr=class extends Ol.Component{render(){return Ol.createElement(wh,{className:"-learnMore",href:"https://help.hootsuite.com/hc/en-us/articles/204598170-Manage-permissions",target:"_blank"},Th._("Learn more"))}};ql.exports=Rr});var Bl=x((_b,zl)=>{"use strict";su();var Sh=O(),{FailedToGetMemberPermissionsError:Eh,CannotBoostAdsPermissionError:xh,willMount:Nh,ENV_APP_TYPE_LINKEDIN_SINGLE_POST_PROMOTION:Ih,ENV_APP_TYPE_FACEBOOK_SINGLE_POST_PROMOTION:Ul}=(yi(),j(Ci)),{TYPE_ERROR:kh,TYPE_WARNING:Ah}=(si(),j(ti)),{CALLOUTS:Rl}=(tu(),j(eu)),Rt=Ke(),xi=V(),Lh=Fl(),Dr={[Rt.types.FACEBOOKPAGE]:{boostAppType:Ul,socialNetwork:Rt.groups.FACEBOOK},[Rt.types.LINKEDINCOMPANY]:{boostAppType:Ih,socialNetwork:Rt.groups.LINKEDIN},[Rt.types.INSTAGRAMBUSINESS]:{boostAppType:Ul,socialNetwork:Rt.groups.INSTAGRAM}},Ph=(i,e,t,s,r)=>{if(Dr[r]){let o={pageId:e,postId:t,postType:s,HS_ENV_APP_TYPE:Dr[r].boostAppType,socialNetwork:Dr[r].socialNetwork,origin:"streams",source:"streams"};Nh({props:o,memberId:i}).catch(a=>{xh.isInstance(a)||Eh.isInstance(a)?Mh():Oh()})}},Mh=()=>{let i=Sh.createElement(Lh,null);Gi({calloutType:Rl.TOAST.NAME,type:Ah,titleText:xi._("You do not have permission to boost this post"),messageText:xi._("To boost posts from this Page, your Hootsuite Admin needs to give you permission."),children:i})},Oh=()=>{Gi({calloutType:Rl.TOAST.NAME,type:kh,titleText:xi._("Failed to load"),messageText:xi._("Please try again, and contact our Support team if the issue persists.")})},Dl=()=>"hs:boost:dismissedPosts",jl=()=>JSON.parse(window.localStorage.getItem(Dl()))||{},qh=(i,e)=>{let t=jl();t[i]=e,window.localStorage.setItem(Dl(),JSON.stringify(t))},Fh=(i,e)=>{let t=jl();return t.hasOwnProperty(i)&&t[i]==e};zl.exports={boostPost:Ph,setDismissedPost:qh,isPostDismissed:Fh}});var $l=x((vb,Hl)=>{"use strict";var jr=Ke(),te=V(),Uh={[jr.types.FACEBOOKPAGE]:{boostedCopy:te._("Boosted"),boostedCopyScheduled:te._("Boost starts"),boostLabel:te._("Boost post"),boostAgainLabel:te._("Boost again"),boostUnavailableLabel:te._("Boost unavailable"),tooltipContent:te._("Boost your post to reach more people")},[jr.types.INSTAGRAMBUSINESS]:{boostedCopy:te._("Boosted"),boostedCopyScheduled:te._("Boost starts"),boostLabel:te._("Boost post"),boostAgainLabel:te._("Boost again"),boostUnavailableLabel:te._("Boost unavailable"),tooltipContent:te._("Boost your post to reach more people")},[jr.types.LINKEDINCOMPANY]:{boostedCopy:te._("Sponsored"),boostedCopyScheduled:te._("Sponsor starts"),boostLabel:te._("Sponsor post"),boostAgainLabel:te._("Sponsor again"),boostUnavailableLabel:te._("Sponsor unavailable"),tooltipContent:te._("Sponsor your post to reach more people")}};Hl.exports=Uh});var Gl=x((bb,Rh)=>{Rh.exports={}});var Zl=x((Cb,Ql)=>{"use strict";var Dh=H(),st=O(),jh=R(),{Button:zh,PRIMARY:Bh}=(Gs(),j($s)),Hh=(Ws(),j(Vs)).track,$h=Wo(),zr=V(),Br=Ke(),{POST_TYPE_OTHER:Gh}=(yi(),j(Ci)),Vl=Js(),Vh=tn(),Wh=Xo(),Kh=Bl(),Dt=$l();Gl();var jt=class extends st.Component{constructor(e){super(e),this._boostPost=this._boostPost.bind(this)}_boostPost(){let{memberId:e,pageId:t,postId:s,postType:r,socialProfileType:o}=this.props;Hh(Vl.STREAMS_ORIGIN,Vl.BOOST_POST,{socialNetworkType:o}),Kh.boostPost(e,t,s,r,o)}_getStartTimeFormatted(e,t){let s=new Date(e)/1e3,r=Wh.getTimestampWithTimezone(s,t);return Vh.relativeTime(r,t)}_renderBoostInfo({start_time:e,member_name:t}){let{timezoneOffset:s,socialProfileType:r}=this.props,o=this._getStartTimeFormatted(e,s),a=new Date().getTime()<new Date(e).getTime(),p=`${Dt[r].boostedCopy} ${o} ${zr._("on Hootsuite")}`;return a&&(p=`${Dt[r].boostedCopyScheduled} ${o} ${zr._("on Hootsuite")}`),st.createElement("div",{className:"-info"},st.createElement("p",null,p),st.createElement("p",null,zr._("by")," ",t))}render(){let{isPromoted:e,isPromotable:t,boostInfo:s,socialProfileType:r}=this.props,o=!Dh.isEmpty(s),a=Dt[r].boostLabel,p=!1;return(e||o)&&(a=Dt[r].boostAgainLabel),t||(a=Dt[r].boostUnavailableLabel,p=!0),st.createElement("div",{className:"rc-BoostAction"},st.createElement("div",{className:"-boostBtnContainer"},st.createElement($h,{content:Dt[r].tooltipContent,placement:"top"},st.createElement(zh,{className:"rc-boostActionButton",disabled:p,height:"32",onClick:this._boostPost,type:Bh},a))),o?this._renderBoostInfo(s):null)}};jt.displayName="BoostAction";var{number:Wl,string:Ss,bool:Kl,shape:Yl,oneOfType:Yh,oneOf:Qh}=jh;jt.propTypes={boostInfo:Yh([Yl({}),Yl({start_time:Ss.isRequired,member_name:Ss.isRequired})]),isPromotable:Kl.isRequired,isPromoted:Kl.isRequired,memberId:Wl.isRequired,pageId:Ss.isRequired,postId:Ss.isRequired,postType:Ss,socialProfileType:Qh([Br.types.FACEBOOKPAGE,Br.types.LINKEDINCOMPANY,Br.types.INSTAGRAMBUSINESS]).isRequired,timezoneOffset:Wl.isRequired};jt.defaultProps={boostInfo:{},postType:Gh};Ql.exports=jt});var Jl=x((yb,Zh)=>{Zh.exports={}});var tc=x((wb,ec)=>{"use strict";xe();var Xl=U(_r()),Hr=O(),Jh=R();Jl();var Es=class extends Hr.Component{render(){return Hr.createElement("div",{className:"rc-MessageError"},Hr.createElement(ne,{className:"-icon",fill:"currentColor",size:16,glyph:Xl.default}),this.props.children)}};Es.displayName="MessageError";Es.propTypes={children:Jh.string};ec.exports=Es});var ic=x((Sb,sc)=>{"use strict";var Xh=le(),ef=O(),tf=V(),sf=tc(),$r=({conversation:i})=>i&&!i.size?ef.createElement(sf,null,tf._("The message that this is in reply to is deleted or private.")):null;$r.displayName="ConversationLoadingError";$r.propTypes={conversation:Xh.list};sc.exports=$r});var rc=x((Eb,rf)=>{rf.exports={}});var nc=x((Nb,oc)=>{"use strict";xe();var Gr=O(),Vr=R(),of=au();rc();var xs=class extends Gr.Component{render(){return Gr.createElement(of,{btnStyle:"link",className:"rc-CTAButton",onClick:this.props.onClick},Gr.createElement(ne,{fill:"#1884b5",size:18,glyph:this.props.icon}),this.props.text)}};xs.displayName="CTA";xs.propTypes={icon:Vr.func.isRequired,onClick:Vr.func.isRequired,text:Vr.string.isRequired};oc.exports=xs});var ac=x((Ib,nf)=>{nf.exports={}});var gc=x((Pb,fc)=>{"use strict";Ki();var hc=U(Vo()),it=R(),$e=Ee(),Ni=le(),G=O(),lc=H(),Wr=Yi(),zt=Qe(),af=Hs(),cc=V(),lf=es(),cf=Ys(),pf=hu(),uf=fu(),qe=Ke(),kb=ct(),{SOCIAL_NETWORKS:Kr,MEMBER:pc}=Uo(),{connect:df}=(Xp(),j(Jp)),{store:mf}=(bu(),j(vu)),{POST_TYPE_IMAGE:hf,POST_TYPE_VIDEO:ff,POST_TYPE_OTHER:gf}=(yi(),j(Ci)),_f=Su(),vf=yl(),bf=xl(),Cf=Al(),yf=rn(),Tf=Ml(),wf=lr(),Sf=Ir(),Ef=Zl(),xf=ic(),Nf=nc(),{socialNetworkUserIdAndAuthorIdMatch:If}=ei(),Ns=Qs(),Ii=nn(),uc=en(),kf=ei(),Q=Ze(),Lb=Ou(),Af=qu(),Lf=Zs(),Pf=Iu(),{isInstagramBusinessBox:Mf,isLinkedInCompanyBox:Of}=Ks(),{MESSAGE:ki}=je(),dc=on(),mc=Xs();ac();var qf="showHashtagSearch",Ff="https://twitter.com/hashtag/{hashtagName}?src=hashtag_click&f=live",Ct=class extends G.Component{constructor(e){super(e),this.state={isLoadingConversation:!1,isViewingConversation:!1},this.onHideConversation=this.onHideConversation.bind(this),this.onShowConversation=this.onShowConversation.bind(this),this._onEntityClick=this._onEntityClick.bind(this),this._getContextVerb=this._getContextVerb.bind(this),this._isConversation=this._isConversation.bind(this),this._isPromotable=this._isPromotable.bind(this)}shouldComponentUpdate(e,t){return lc.isEmpty(e)||!$e.Map.isMap(e.messageListContext)?!1:this.state.isLoadingConversation!==t.isLoadingConversation||this.state.isViewingConversation!==t.isViewingConversation||e.timezoneOffset!==this.props.timezoneOffset||e.isNew!==this.props.isNew?!0:Lf.didImmutableDataChanged(["message","messageListContext","socialNetworkContext","savedItemsData"],this.props,e)}UNSAFE_componentWillReceiveProps(){if(this.state.isLoadingConversation){var e=this.props.message.get("uid"),t=Q.getContextProp(this.props,"messageListId"),s=this.props.flux.getStore(ki).getMessagesByParentId(e,t);s&&this.setState(Wr({},this.state,{isLoadingConversation:!1}))}}_canRequestConversation(e,t){return $e.Map.isMap(e)&&(e=e.toJS()),$e.Map.isMap(t)&&(t=t.toJS()),t.socialNetworkType===qe.types.TWITTER&&e.metadata&&e.metadata.inReplyToId&&e.action&&e.action.verb!==Pf.SHARED}_isConversation(){let e=Q.getContextProp(this.props,"boxType");return Ns.getFeatures(e).canViewConversation&&this._canRequestConversation(this.props.message,this.props.socialNetworkContext)}_getContextVerb(e){var t=Q.getContextProp(this.props,"socialNetworkType");return uc.getContextVerb(e,t)}_getContextVerbPosition(){return Q.getContextProp(this.props,"socialNetworkType")===qe.types.TWITTER&&this.props.message.getIn(["action","verb"])==="replied"}_onEntityClick(e,t){var{message:s,flux:r}=this.props;let o=s.getIn(["metadata","promotedContent","impressionId"],"");var a=Q.getMergedContext(this.props),p={options:e,event:t,message:s,context:a,flux:r,impressionId:o};if(e.action===qf&&s.get("metadata").get("source").toUpperCase()===qe.types.TWITTER&&!mc.canAccessTwitterSearch()){let f=e.tag.replace(/^#/,""),C=Ff.replace("{hashtagName}",f);window.open(C,"_blank","noopener,noreferrer");return}lf.onEntityClick(p)}onShowConversation(){let e=Q.getMergedContext(this.props),t=this.props.message.get("uid"),s=Q.getContextProp(this.props,"messageListId"),r=this.props.messageListContext.get("tabId"),o=this.props.flux.getStore(ki).getMessagesByParentId(t,s);if(!o){let a=e.toJS();this.props.flux.getActions(ki).fetchConversation({context:a,tabId:r,boxId:s,statusId:this.props.message.get("id"),parentUid:this.props.message.get("uid"),socialNetworkId:Q.getContextProp(this.props,"socialNetworkId")}).catch(()=>{this.setState({isLoadingConversation:!1,isViewingConversation:!1})})}this.setState(Wr({},this.state,{isLoadingConversation:!lc.isObject(o),isViewingConversation:!0}))}onHideConversation(){this.setState(Wr({},this.state,{isViewingConversation:!1}))}_renderBanner(){let e=this.props.socialNetworkContext;if($e.Map.isMap(e)&&(e=e.toJS()),mc.canAccessHootdeskIntegration()){if(dc.canRenderHootdeskAssignmentBanner(e)){let t=e.interaction.hootdeskAssignment,s=dc.getHootdeskAssignmentBannerProps(t,e,this.props.messageListContext,"POST");return G.createElement($o,{assignedItem:s})}}else if(e.interaction&&e.interaction.response)return G.createElement(wf,{interaction:e.interaction})}_renderConversationToggle(){if(this._isConversation())return G.createElement(bf,{isToggled:this.state.isViewingConversation,onHideConversation:this.onHideConversation,onShowConversation:this.onShowConversation})}_renderConversationLoader(){let e=Q.getContextProp(this.props,"boxType");if(Ns.getFeatures(e).canViewConversation&&this.state.isViewingConversation){if(this.state.isLoadingConversation)return G.createElement(af,null);{let t=this.props.message.get("uid"),s=Q.getContextProp(this.props,"messageListId");return G.createElement(zt,{connectToStores:{message:r=>({conversation:r.getMessagesByParentId(t,s)})}},G.createElement(xf,null))}}}_renderMessageTags(){let e=Q.getContextProp(this.props,"boxType");if(Ns.getFeatures(e).canDisplayTags){let t=this.props.message.get("uid");return Mf(e)?t=t.replace(/instagrambusiness/g,"instagram"):Of(e)&&(t=t.replace(/linkedin/g,"linkedincompany")),G.createElement(zt,{connectToStores:{messageTags:s=>({tags:s.getTagsByUniqueMessageId(t)})}},G.createElement(Cf,null))}}_isPromotable(){let e=this.props.message.get("entities")||[],t=Q.getContextProp(this.props,"socialNetworkId"),s=this.props.flux.getStore(Kr).get(t),r=!!this.props.message.get("isPromotable"),o=e.filter(p=>{let f=$e.Map.isMap(p)?p.get("type"):p.type;return["video","image"].includes(f)}),a=$e.List.isList(o)?o.size:o.length;switch(s.type){case qe.types.FACEBOOKPAGE:return r;case qe.types.LINKEDINCOMPANY:return r&&a<2;case qe.types.INSTAGRAMBUSINESS:return r&&a<2;default:return!1}}_renderBoostAction(){let e=Q.getContextProp(this.props,"boxType"),t=Q.getContextProp(this.props,"socialNetworkId"),s=this.props.flux.getStore(Kr).get(t),r=this.props.message.get("author").get("id"),{_isPromotable:o}=this,a=[qe.types.FACEBOOKPAGE,qe.types.LINKEDINCOMPANY,qe.types.INSTAGRAMBUSINESS];if(Ns.getFeatures(e).canBoost&&a.indexOf(s.type)!==-1&&If(s.userId,r,s.type)){let p=this.props.flux.getStore(pc).get().memberId,f=this.props.flux.getStore(pc).get().timezoneOffset,C=String(Q.getContextProp(this.props,"socialNetworkId")),S=this.props.message.get("id"),k=!!this.props.message.get("isPromoted"),I=o(),T=this.props.message.get("uid"),q=(b=>{let A=b.map(L=>$e.Map.isMap(L)?L.get("type"):L.type);return A.includes("video")?ff:A.includes("image")?hf:gf})(this.props.message.get("entities")||[]),F={memberId:p,pageId:C,postId:S,postType:q,isPromoted:k,isPromotable:I,socialProfileType:s.type,timezoneOffset:f};return G.createElement(zt,{connectToStores:{messageBoostInfo:b=>({boostInfo:b.getBoostInfoByUniqueMessageId(T)})}},G.createElement(Ef,{...F}))}return null}_getTrackingLabel(){var e=this.props.message.get("author"),t=e.get("username"),s=e.get("name");return t?`${s} | @${t}`:s}_renderPromoted(){var{message:e}=this.props;let t=this.props.socialNetworkContext.getIn(["metadata","promoted"],!1),s=e.getIn(["metadata","promotedContent"]);var r=Q.getContextProp(this.props,"socialNetworkId"),o={promotedContent:s,socialNetworkId:r,trackingLabel:this._getTrackingLabel()};if(t&&s)return G.createElement(zt,null,G.createElement(vf,{...o}))}_renderCommentListContainer(){let{flux:e,message:t,socialNetworkContext:s,messageListContext:r,scrollToSpecifiedComment:o,shouldScrollToComment:a}=this.props,p=Q.getContextProp(this.props,"boxType"),f=Ns.getFeatures(p),C=Q.getContextProp(this.props,"socialNetworkId"),S=e.getStore(Kr).get(C),k=T=>T.canComment||T.canViewConversation;if((T=>{let P=T.getIn(["metadata","privacy"]),q=T.getIn(["metadata","commentsDisabled"],!1);return P!=="Private"&&!q&&S.type!==qe.types.FACEBOOK})(t)&&k(f)){let T=t.get("uid"),P=t.getIn(["metadata","counts","replies"],0),q=Q.getContextProp(this.props,"messageListId");return G.createElement(zt,{connectToStores:{commentList:F=>({commentList:F.get(T,q),sortField:F.getSortField(T,q),isCommentInputFocused:F.getCommentListFocused(T,q),pinnedComments:F.getPinnedCommentsListByParentId(T,q)}),message:F=>({isInputVisible:F.isInputVisible(q,T)})}},G.createElement(Sf,{commentCount:P,isConversation:this._isConversation(),isVisible:f.canViewConversation&&this._canRequestConversation(t,s)?this.state.isViewingConversation:!0,messageListContext:r,onEntityClick:this._onEntityClick,parent:t,scrollToSpecifiedComment:o,shouldScrollToComment:a,snSubType:r.get("socialNetworkSubType",null),socialNetworkContext:s}))}}_getMessageType(){let e=this.props.message.getIn(["metadata","type"]);return this.props.message.getIn(["metadata","source"])==="youtube"&&e==="POST"?Ii.video:Ii.message}_renderMessage(){let e=this._getMessageType(),{message:t}=this.props,s=t.getIn(["action","verb"]),r={onEntityClick:this._onEntityClick,headlineContent:this.props.headline,headlineIconSourceKey:uc.getActionVerbIconSourceKey(s)};switch(e){case Ii.video:return G.createElement(Tf,{...this.props,...r});default:return G.createElement(yf,{...this.props,...r})}}_renderCTA(){let e=this.props.message.get("entities");if((e?e.filter(s=>s.get("type")==="cta"):[]).size){let s=this.props.message.get("author").toJS();return G.createElement(Nf,{icon:hc.default,onClick:()=>{this.props.flux.getActions(ki).createDirectMessage({id:kf.getActionableId(this.props.message),socialNetworkId:this.extendedContext.socialNetworkId,socialNetworkType:this.extendedContext.socialNetworkType,teamId:null,text:Af.formatComposeMessage(null,Ii.twitter.DIRECT_MESSAGE,s.username),username:s.username})},text:cc._("Send us a private message")})}}_renderSocialNetworkAvatar(e){return!e||!e.get("renderSocialNetworkAvatar")||!this.props.socialNetwork?null:G.createElement(pf,{overlay:G.createElement(uf,null,cc._("Publishing as @%s").replace("%s",this.props.socialNetwork.username)),placement:"top"},G.createElement("div",{className:"-avatarWrapper"},G.createElement(cf,{avatar:this.props.socialNetwork.avatar,size:30,socialNetworkBadgeSize:10,type:this.props.socialNetwork.type})))}render(){var{message:e}=this.props,t=Q.getMergedContext(this.props);return e&&t?(this.extendedContext=t,G.createElement("div",{className:"rc-MessageContext"},this._renderBanner(),this._renderMessage(),this._renderCTA(),this._renderPromoted(),this._renderMessageTags(),this._renderBoostAction(),G.createElement(zt,{connectToStores:{messageAction:s=>({messageActions:s.get(this.props.message,this.extendedContext,this.props.flux,this.props.savedItemsData,this.props.canAccessSaveForLater)})}},G.createElement(_f,{context:this.extendedContext,message:this.props.message})),this._renderSocialNetworkAvatar(t),this._renderConversationToggle(),this._renderConversationLoader(),this._renderCommentListContainer())):null}};Ct.displayName="MessageContext";Ct.propTypes={canAccessSaveForLater:it.bool,flux:it.object,headline:it.node,isNew:it.bool,message:Ni.map,messageListContext:Ni.map,savedItemsData:Ni.map,scrollToSpecifiedComment:it.func,shouldScrollToComment:it.bool,socialNetwork:it.object,socialNetworkContext:Ni.map,timezoneOffset:it.number};Ct.defaultProps={canAccessSaveForLater:!1,message:$e.Map(),savedItemsData:$e.Map(),scrollToSpecifiedComment:()=>{},shouldScrollToComment:!1};var Uf=fc.exports=df(mf,i=>({savedItemsData:i.get("messageData"),canAccessSaveForLater:i.get("hasAccess")}))(Ct);Uf.MessageContext=Ct});var vc=x((Mb,_c)=>{"use strict";var Rf=Ee(),Yr=le(),Qr=O(),Df=R(),jf=es(),zf=Ks(),Zr=Ze(),Bf=ei(),Hf=rl(),$f=gc(),Gf=i=>(e,t)=>{let s=Zr.getMergedContext(i),{message:r,flux:o}=i;jf.onEntityClick({options:e,event:t,message:r,context:s,flux:o})},Jr=i=>{let{message:e,messageListContext:t,flux:s,socialNetworkContext:r}=i;if(!e||!t||r.isEmpty())return Qr.createElement("noscript",null);let o=t.get("boxType"),a=Zr.getContextProp(i,"socialNetworkType"),p=Zr.getContextProp(i,"socialNetworkId"),f=Bf.buildHeadline({message:e,socialNetworkType:a,socialNetworkId:p,onEntityClick:Gf(i),flux:s,boxType:o});return zf.isYoutubeCommentsBox(o)?Qr.createElement(Hf,{...i,headline:f}):Qr.createElement($f,{...i,headline:f})};Jr.propTypes={flux:Df.object,message:Yr.map,messageListContext:Yr.map,socialNetworkContext:Yr.map.isRequired};Jr.defaultProps={socialNetworkContext:Rf.Map()};_c.exports=Jr});var bc=x((Ob,Vf)=>{Vf.exports={}});var yc=x((qb,Cc)=>{"use strict";var Xr=O(),eo=R(),Wf=H();bc();var Is=class extends Xr.Component{constructor(e){super(e),this._messageListLoadGapRef=Xr.createRef(),this._handleClick=this._handleClick.bind(this),this.getDomNode=this.getDomNode.bind(this)}_handleClick(){Wf.isFunction(this.props.onClick)&&this.props.onClick(this.props.id)}getDomNode(){return this._messageListLoadGapRef.current}render(){return Xr.createElement("div",{ref:this._messageListLoadGapRef,className:"rc-MessageListLoadGap",onClick:this._handleClick},this.props.text)}};Is.displayName="MessageListLoadGap";Is.propTypes={id:eo.string,onClick:eo.func,text:eo.string};Cc.exports=Is});var Tc=x((Fb,Kf)=>{Kf.exports={}});var Ec=x((Ub,Sc)=>{"use strict";var wc=O(),Yf=R(),Qf=H();Tc();var ks=class extends wc.Component{constructor(e){super(e),this._handleClick=this._handleClick.bind(this)}_handleClick(){Qf.isFunction(this.props.onClick)&&this.props.onClick()}render(){var e="...";return wc.createElement("div",{className:"rc-MessageListLoadingIndicator",onClick:this._handleClick},e)}};ks.displayName="MessageListLoadingIndicator";ks.propTypes={onClick:Yf.func};Sc.exports=ks});var xc=x((Rb,Zf)=>{Zf.exports={}});var kc=x((Db,Ic)=>{"use strict";var to=Ee(),Nc=le(),Ge=O(),Fe=R(),As=H(),Pi=Mo(),Jf=V(),Xf=Ce(),eg=Qe(),Ai=Nu(),tg=Tn(),sg=kn(),ig=vc(),rg=yc(),og=Ec(),ng=Zs(),Li=Ze();xc();var so,Bt=class extends Ge.Component{constructor(e){super(e),this._handleMessageListLoadGapClick=this._handleMessageListLoadGapClick.bind(this),this._handleLoadMore=this._handleLoadMore.bind(this),this._checkLoadMore=this._checkLoadMore.bind(this),this._handleOnScroll=this._handleOnScroll.bind(this),this._messageListRef=Ge.createRef(),this.getDomNode=this.getDomNode.bind(this),this.isReading=!1,this.animationId=null,this.ticking=!1,this._trackScrollThrottled=As.throttle(this._trackScroll.bind(this),3e4)}_trackScroll(){let e=Li.getContextProp(this.props,"boxType"),t=this.props.messageListContext.get("socialNetworkId");t&&e&&Xf.emit("Datalab:trackEvent",{action:"scroll_new_stream",eventDetails:{boxId:this.props.messageListId,boxType:e,socialNetworkId:t,socialNetworkType:this.props.socialNetworks[t].type}})}UNSAFE_componentWillUpdate(e){(e.isNewMessageNotificationVisible!==this.props.isNewMessageNotificationVisible||!this.height)&&(this.height=`calc(100% - ${e.getNotificationsHeight()}px)`)}componentDidUpdate(){this.props.messageList.get("content")&&this.props.messageList.get("content").size>0&&this._checkLoadMore()}componentWillUnmount(){cancelAnimationFrame(this.animationId)}getDomNode(){return this._messageListRef.current.getDomNode()}shouldComponentUpdate(e){return!to.Map.isMap(e.messageList)||e.messageList.get("isInitialized")===!1?!1:e.isNewMessageNotificationVisible!==this.props.isNewMessageNotificationVisible?!0:ng.didImmutableDataChanged(["messageList","messageListContext"],this.props,e)}_handleMessageListLoadGapClick(e){if(As.isFunction(this.props.loadMessagesBetween)){so=e;var t=Li.getContextProp(this.props,"messageListId");this.props.loadMessagesBetween(t,e)}}_handleLoadMore(){this.ticking=!1;var e=this.getDomNode(),t=e.scrollTop!==0,s=Li.getContextProp(this.props,"messageListId");this.isReading!==t&&As.isFunction(this.props.setUnreadCaching)&&this.props.setUnreadCaching(s,t),e.scrollTop<100&&As.isFunction(this.props.loadUnreadMessages)&&this.props.loadUnreadMessages(s);var r=this.props.messageList.get("canLoadOlder");r&&As.isFunction(this.props.loadMessagesOlder)&&!Pi.isElementHidden(e)&&Pi.isElementScrolledToBottom(e,Ai.scrolledToBottomBuffer)&&this.props.loadMessagesOlder(s),this.isReading=t}_checkLoadMore(){this.ticking||(this.animationId=requestAnimationFrame(this._handleLoadMore),this.ticking=!0)}_handleOnScroll(){this._trackScrollThrottled(),this._checkLoadMore()}renderMessages(){var e=Li.getContextProp(this.props,"messageListId"),t=this.props.messageList.get("content");return!e||!t?null:t.map(s=>{if(s.get("gap")){var r=s.get("id");return Ge.createElement(rg,{id:r,key:r,onClick:this._handleMessageListLoadGapClick,ref:r,text:Jf._("Show more")})}else{var o=s.get("id"),a=s.get("socialNetworkId");return Ge.createElement(eg,{connectToStores:{member:p=>({timezoneOffset:p.get().timezoneOffset}),message:p=>({message:p.get(o)}),messageContext:p=>({socialNetworkContext:p.getSocialNetworkContext(a,o)}),messageList:p=>({messageListContext:p.getMessageListContext(e),isNew:p.getIsNew(e,o)})},key:o},Ge.createElement(ig,null))}})}render(){var e={height:this.height?this.height:"100%"};return Ge.createElement(sg,{ref:this._messageListRef,buffer:Ai.lazyRenderBuffer,className:"rc-MessageList",onScroll:this.props.messageList.get("isLoading")?null:this._handleOnScroll,placeholderAdapter:function(t){switch(t){case"MessageListLoadGap":case"MessageListLoadingIndicator":return Ge.createElement("div",{style:{height:Ai.loaderPlaceholderHeight}});case"FluxComponent":default:return Ge.createElement("div",{className:"rc-MessageContext",style:{height:Ai.messagePlaceholderHeight}})}},style:e,updateEvents:["streams:resize"]},this.renderMessages(),this.props.messageList.get("canLoadOlder")?Ge.createElement(og,null):"")}};Bt.displayName="MessageList";Bt.propTypes={getNotificationsHeight:Fe.func,isNewMessageNotificationVisible:Fe.bool,loadMessagesBetween:Fe.func,loadMessagesOlder:Fe.func,loadUnreadMessages:Fe.func,messageList:Nc.map,messageListContext:Nc.map,messageListId:Fe.oneOfType([Fe.string,Fe.number]).isRequired,setUnreadCaching:Fe.func,socialNetworks:Fe.object.isRequired};Bt.defaultProps={messageList:to.Map(),messageListContext:to.Map()};Ic.exports=tg(Bt,{loadMessagesBetween:{invokePostAnimation:!0,paramsAdapter:i=>{var e=i.refs[so]&&i.refs[so].getDomNode();if(e){var t=Pi.getComputedStyles(e),s=parseInt(t.marginBottom,10),r=parseInt(t.borderBottomWidth,10),o=Pi.getDimensions(i.getDomNode()),a=e.offsetTop-o.height-s-r;return a<0&&(a=0),{animation:{scrollTop:a},options:{duration:750}}}}}})});var Mi=x((jb,Ac)=>{"use strict";var W=V();Ac.exports={RECONNECT:W._("Reconnect"),ACCOUNT_DISCONNECTED_TITLE:W._("Account disconnected"),ACCOUNT_DISCONNECTED_MESSAGE:W._("Until reconnected, this account will not publish scheduled posts, update in Streams, or collect analytics."),ACCOUNT_MISSING_PERMISSIONS_TITLE:W._("Account missing permissions"),ACCOUNT_MISSING_PERMISSIONS_MESSAGE:W._("To allow Hootsuite to load this stream, please reconnect your account below."),EMPTY_CONTENT_TITLE:W._("There\u2019s nothing to see here, yet"),EMPTY_CONTENT_MESSAGE:W._("As soon as we find content for this stream, we\u2019ll show it to you here."),EMPTY_CONTENT_CTA:W._("Refresh stream"),EMPTY_POSTS_TITLE:W._("You haven\u2019t posted yet"),EMPTY_POSTS_MESSAGE:W._("Get active on social media to increase your reach."),EMPTY_POSTS_CTA:W._("Create a post"),SCHEDULED_POSTS_TITLE:W._("You don\u2019t have any scheduled posts"),SCHEDULED_POSTS_MESSAGE:W._("Save time and stay active on social by scheduling posts ahead of time."),SCHEDULED_POSTS_CTA:W._("Schedule a post"),DISCONNECTED_NETWORK_TITLE:W._("Account disconnected"),DISCONNECTED_NETWORK_CTA:W._("Reconnect account"),REAUTH_PERMISSION_MESSAGE:W._("You need to reconnect this account to view the stream content."),NO_REAUTH_PERMISSION_MESSAGE:W._("This account needs to be reconnected before you can view the stream content."),NO_REAUTH_PERMISSION_DESC:W._("The person who has permission to reconnect the account has been notified."),LAST_CONNECTED_BY:W._("Last connected by"),LEARN_MORE:W._("Learn more"),DEFAULT_ERROR_MESSAGE:W._("An error has occured!")}});var Lc=x((zb,ag)=>{ag.exports={}});var Fc=x((Bb,qc)=>{"use strict";var se=O(),Oi=R(),{Button:lg,CTA:cg}=(Gs(),j($s)),pg=Ys(),{NO_REAUTH_PERMISSION_DESC:ug,NO_REAUTH_PERMISSION_MESSAGE:dg,REAUTH_PERMISSION_MESSAGE:mg,LAST_CONNECTED_BY:hg,LEARN_MORE:Pc}=Mi();Lc();var Mc="https://help.hootsuite.com/hc/articles/1260804308209-Reconnect-a-social-account",Oc=function(i){let{ctaOnClick:e,ctaText:t,failedProfile:s,title:r}=i;return se.createElement("div",{className:"rc-DisconnectedNetworkMessage"},se.createElement("div",{className:"-avatar"},se.createElement(pg,{avatar:s.avatarUrl,size:52,type:s.socialNetworkType,alt:s.userName,socialNetworkId:s.socialNetworkId}),se.createElement("h4",null,s.userName),se.createElement("h5",null,hg," "),se.createElement("h5",null,s.lastConnectedByName)),se.createElement("div",{className:"-title"},se.createElement("div",{className:"-copy"},se.createElement("h4",null,r),se.createElement("p",null,s.permissionToReauth?se.createElement(se.Fragment,null,mg,se.createElement("a",{href:Mc,rel:"noopener noreferrer",target:"_blank"},Pc)):dg))),s.permissionToReauth?se.createElement(lg,{onClick:e,type:cg},t):se.createElement("div",{className:"-banner"},se.createElement("div",{className:"-copy"},se.createElement("p",null,ug,se.createElement("a",{href:Mc,rel:"noopener noreferrer",target:"_blank"},Pc)))))};Oc.propTypes={ctaOnClick:Oi.func.isRequired,ctaText:Oi.string.isRequired,failedProfile:Oi.object.isRequired,title:Oi.string.isRequired};qc.exports=Oc});var Uc=x((Hb,fg)=>{fg.exports={}});var jc=x(($b,Dc)=>{"use strict";var rt=O(),gg=R(),_g=H(),vg=Ce(),{Banner:Rc,TYPE_INFO:bg,TYPE_ERROR:io,TYPE_WARNING:Cg}=(si(),j(ti)),yg=Fc(),{DEFAULT_ERROR_MESSAGE:Tg,DISCONNECTED_NETWORK_CTA:wg,DISCONNECTED_NETWORK_TITLE:Sg}=Mi();Uc();var Eg=i=>({error:io,info:bg,warning:Cg})[i||io],Ht=class extends rt.Component{generateDisconnectedErrorMessage(){let{errorData:e}=this.props,t=()=>{vg.emit("socialNetwork:reauthorize:command",{socialNetworkId:e.failedAuthProfile.socialProfileId},{authType:"rerequest"})};return rt.createElement(yg,{failedProfile:e.failedAuthProfile,ctaOnClick:t,ctaText:wg,title:Sg})}render(){let{errorData:e}=this.props;if(_g.isEmpty(e))return null;if(e.failedAuthProfile)return this.generateDisconnectedErrorMessage();{let{errorLink:t,error:s,errorType:r}=e;return rt.createElement("div",{className:"-defaultError"},s?rt.createElement(Rc,{type:Eg(r)},rt.createElement("div",null,s),t?rt.createElement("div",{className:"-errorLinkContainer"},rt.createElement("a",{href:t.url,rel:"noopener noreferrer",target:"_blank"},t.text)):null):rt.createElement(Rc,{messageText:Tg,type:io}))}}};Ht.displayName="MessageListError";Ht.propTypes={errorData:gg.object.isRequired};Ht.defaultProps={errorData:{}};Dc.exports=Ht});var zc=x((Gb,xg)=>{xg.exports={}});var Hc=x((Vb,Bc)=>{"use strict";var Z=O(),Ng=Ye();zc();var qi=class extends Z.Component{render(){var e={"rc-PlaceholderMessage":!0};return Z.createElement("div",{className:Ng(e)},Z.createElement("div",{className:"-loadingVisual"},Z.createElement("div",{className:"-avatar"}),Z.createElement("div",{className:"-metadata"},Z.createElement("div",{className:"-name"}),Z.createElement("div",{className:"-divider"}),Z.createElement("div",{className:"-time"})),Z.createElement("div",{className:"-body",style:{borderBottomWidth:Math.floor(Math.random()*70)+30}},Z.createElement("div",{className:"-text"},Z.createElement("div",{className:"-line1"}),Z.createElement("div",{className:"-divider"}),Z.createElement("div",{className:"-divider"}),Z.createElement("div",{className:"-line3"}))),Z.createElement("div",{className:"-actionItems"},Z.createElement("div",{className:"-item x-gap1"}),Z.createElement("div",{className:"-item x-gap2"}),Z.createElement("div",{className:"-item x-gap3"}),Z.createElement("div",{className:"-item x-gap4"}),Z.createElement("div",{className:"-item x-gap5"}))))}};qi.displayName="PlaceholderMessage";Bc.exports=qi});var Vc=x((Wb,Gc)=>{var{env:Ig,PRODUCTION:kg}=(yu(),j(Cu)),$c={PRODUCTION:"https://i.hootsuite.com/assets/",STAGING:"https://staging-i.hootsuite.com/assets/"},Ag=()=>Ig()===kg?$c.PRODUCTION:$c.STAGING;Gc.exports={getAssetsHostUrl:Ag}});var Wc=x((Kb,Lg)=>{Lg.exports={}});var Zc=x((Yb,Qc)=>{"use strict";var ie=O(),Kc=le(),lo=Ee(),Ls=R(),Pg=ct(),{emit:ro}=(Yp(),j(Kp)),oo=(Ws(),j(Vs)).track,Yc=Ks(),Fi=Ze(),no=bn(),Mg=kc(),Og=jc(),ot=Hc(),$t=Js(),{getAssetsHostUrl:ao}=Vc(),{EMPTY_CONTENT_TITLE:qg,EMPTY_CONTENT_MESSAGE:Fg,EMPTY_CONTENT_CTA:Ug,EMPTY_POSTS_TITLE:Rg,EMPTY_POSTS_MESSAGE:Dg,EMPTY_POSTS_CTA:jg,SCHEDULED_POSTS_TITLE:zg,SCHEDULED_POSTS_MESSAGE:Bg,SCHEDULED_POSTS_CTA:Hg}=Mi();Wc();var $g="engage/message_people_collaboration.svg",Gg="engage/dashboard_man.svg",Vg="amplify/illo_spot_cat-on-books_002.png",Gt=class extends ie.Component{constructor(e){super(e)}renderEmptyList(){return Pg.isFeatureEnabled("PGR_583_SCHEDULED_STREAM_EMPTY_CTA")&&this.props.messageListContext&&this.props.messageListContext.get("socialNetworkId")&&Yc.isPendingBox(Fi.getContextProp(this.props,"boxType"))?this.renderEmptyScheduledState():this.props.emptyListText?ie.createElement("div",{className:"rc-EmptyMessageListContext"},ie.createElement("p",null,this.props.emptyListText)):Yc.isOwnerContentStream(Fi.getContextProp(this.props,"boxType"))?this.renderEmptyPostsState():this.renderEmptyContentState()}renderEmptyContentState(){let e=this.props.messageListContext.get("socialNetworkId"),t=this.props.messageList.get("isLoading");return ie.createElement(no,{ctaOnClick:()=>{oo($t.STREAMS_ORIGIN,$t.REFRESH_STREAM_CTA,{boxType:this.boxType,boxId:this.props.messageListId,socialNetworkId:e,socialNetworkType:this.props.socialNetworks[e].type}),ro("streams:stream:refresh",this.props.messageListId)},ctaText:Ug,imgSrc:`${ao()}${$g}`,isLoading:t,message:Fg,title:qg})}renderEmptyPostsState(){let e=this.props.messageListContext.get("socialNetworkId");return ie.createElement(no,{ctaOnClick:()=>{oo($t.STREAMS_ORIGIN,$t.CREATE_STREAM_CTA,{boxType:Fi.getContextProp(this.props,"boxType"),boxId:this.props.messageListId,socialNetworkId:e,socialNetworkType:this.props.socialNetworks[e].type}),ro("composer.open",{socialNetworkId:e})},ctaText:jg,imgSrc:`${ao()}${Gg}`,isLoading:!1,message:Dg,title:Rg})}renderEmptyScheduledState(){let e=this.props.messageListContext.get("socialNetworkId");return ie.createElement(no,{ctaOnClick:()=>{oo($t.STREAMS_ORIGIN,$t.SCHEDULE_STREAM_CTA,{boxType:Fi.getContextProp(this.props,"boxType"),boxId:this.props.messageListId,socialNetworkId:e,socialNetworkType:this.props.socialNetworks[e].type}),ro("composer.open",{socialNetworkId:e})},ctaText:Hg,imgSrc:`${ao()}${Vg}`,isLoading:!1,message:Bg,title:zg})}render(){let{messageList:e}=this.props;if(e.get("isInitialized")!==!0)return ie.createElement("div",{className:"rc-MessageListContext"},ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null),ie.createElement(ot,null));let t=e.get("errorData");lo.Map.isMap(t)&&(t=t.toJS());let s;return e.get("content")&&e.get("content").size==0?_.isEmpty(t)?s=this.renderEmptyList():s=null:s=ie.createElement(Mg,{...this.props}),ie.createElement("div",{className:"rc-MessageListContext"},ie.createElement(Og,{errorData:t}),s)}};Gt.displayName="MessageListContext";Gt.propTypes={emptyListText:Ls.string,messageList:Kc.map.isRequired,messageListContext:Kc.map,messageListId:Ls.oneOfType([Ls.string,Ls.number]),socialNetworks:Ls.object};Gt.defaultProps={messageList:lo.Map(),messageListContext:lo.Map()};Qc.exports=Gt});var tp=x((Zb,ep)=>{"use strict";var Qb=H(),Wg=le(),co=O(),Jc=R(),{Banner:Kg,TYPE_INFO:Yg}=(si(),j(ti)),nt=V(),Qg=Fu(),Xc=nn(),Zg=Qs(),Vt=class extends co.Component{shouldComponentUpdate(e){return e.unreadCount!==this.props.unreadCount}_getNotificationMessage(){let{unreadCount:e}=this.props;if(e>0){let t=this.props.messageListContext.get("boxType"),s=Qg.getContentTypeFromBoxType(t),r;switch(s){case Xc.video:r=e>1?nt._("videos"):nt._("video");break;case Xc.comment:r=e>1?nt._("comments"):nt._("comment");break;default:r=e>1?nt._("messages"):nt._("message")}return e>=Zg.getMaxMessages(t)?nt._("%1$s+ new %2$s").replace("%1$s",e).replace("%2$s",r):nt._("%1$s new %2$s").replace("%1$s",e).replace("%2$s",r)}else return""}render(){let e=this._getNotificationMessage();return e?co.createElement("div",{className:"-streamNotification",onClick:this.props.onClick},co.createElement(Kg,{messageText:e,type:Yg})):null}};Vt.displayName="MessageNotification";Vt.propTypes={messageListContext:Wg.map,onClick:Jc.func,unreadCount:Jc.number};Vt.defaultProps={unreadCount:0};ep.exports=Vt});var sp,Jg,ip,rp=Te(()=>{sp=typeof window<"u"&&window.localStorage,Jg=typeof window<"u"&&window.hs&&window.hs.memberId,ip=(i,e)=>sp&&sp.getItem(`${Jg||"MEMBER"}.${i}`)||e});var op,Xg,np,ap=Te(()=>{op=typeof window<"u"&&window.localStorage,Xg=typeof window<"u"&&window.hs&&window.hs.memberId,np=(i,e)=>(e!=null&&op&&op.setItem(`${Xg||"MEMBER"}.${i}`,e),e)});var lp={};Hi(lp,{get:()=>ip,set:()=>np});var cp=Te(()=>{rp();ap()});var up=x((sC,pp)=>{"use strict";var e_={};pp.exports=e_});var dp=x((iC,t_)=>{t_.exports={}});var _p=x((rC,gp)=>{"use strict";var ke=O(),Ve=R(),s_=H(),mp=ct(),{Banner:i_}=(si(),j(ti)),{Button:hp,PRIMARY:fp}=(Gs(),j($s)),{get:r_,set:o_}=(cp(),j(lp)),n_=uu(),a_=up(),{MESSAGE_LIST:l_}=je();dp();var Ps=class extends ke.Component{constructor(e){super(e);let t=this.getNotification();this.state={isHidden:!!t&&this.isNotificationPreviouslySeen(t)},this.onHide=this.onHide.bind(this),this.removeStream=this.removeStream.bind(this),this.getDomNode=this.getDomNode.bind(this),this._ref=ke.createRef()}shouldComponentUpdate(e,t){return e.boxType!==this.props.boxType||e.memberMaxPlanCode!==this.props.memberMaxPlanCode||e.socialNetworkType!==this.props.socialNetworkType||e.snType!==this.props.snType||t.isHidden!==this.state.isHidden}getNotification(){return this.getNotificationsList().map(e=>this.filterNotificationForEntitlementsAndSnType(e)).filter(e=>!!e).filter(e=>this.areDarklaunchesEnabled(e)).filter(e=>!this.isNotificationPreviouslySeen(e)).shift()}onHide(){this.setState({isHidden:!0});let e=this.getNotification();e&&e.tag&&this.props.messageListId&&o_(`${e.tag}.${this.props.messageListId}`,"true")}renderLink(e,t){return ke.createElement("a",{className:"-link",href:e,key:"message-list-notification-link",rel:"noopener noreferrer",target:"_blank"},t)}renderButton(e,t,s=()=>{}){return e?ke.createElement(hp,{children:t,href:e,type:fp}):ke.createElement(hp,{children:t,onClick:s,type:fp})}buildHeader(e){let t=e.header;return t?ke.createElement("div",{className:"-header"},t):null}buildFooter(e){let t=e.footer;if(!t)return null;let s=t.removeStream?ke.createElement("a",{className:"-remove",role:"button",key:"message-list-notification-remove-stream",onClick:this.removeStream},"Remove stream"):null,r=t.link?this.renderLink(t.link.linkUrl,t.link.linkText):null,o=t.button?this.renderButton(t.button.buttonUrl,t.button.buttonText):null;return ke.createElement("div",{className:"-footer"},o,s,r)}removeStream(){this.props.flux.getActions(l_).delete(this.props.messageListId)}buildMessage(e){let{links:t,text:s}=e,r=0,o;return t!=null?(o=t.map(a=>{let p=[];r<a.linkIndices[0]&&p.push(s.substring(r,a.linkIndices[0]));let f=a.linkText&&a.linkUrl?this.renderLink(a.linkUrl,a.linkText):"";return p.push(f),r=a.linkIndices[1],p}),r<s.length&&o.push(s.substring(r,s.length)),o=s_.flatten(o)):o=s,ke.createElement("span",null,o)}getNotificationsList(){let e=a_[this.props.boxType];return e?Array.isArray(e)?e:[e]:[]}filterNotificationForEntitlementsAndSnType(e){if(e.entitlements){for(let t of e.entitlements)if(!this.props.entitlements.has(t))return null}return e}areDarklaunchesEnabled(e){if(this.props.boxType===n_.F_ACTIVITY&&mp.isFeatureEnabled("NGE_11064_HIDE_INBOX"))return!1;if(e.darklaunch){let t=Array.isArray(e.darklaunch)?e.darklaunch:[e.darklaunch];return(e.snType?e.snType===this.props.socialNetworkType:!0)&&mp.areAllFeaturesEnabled(t)}return!0}isNotificationPreviouslySeen(e){return e.tag===null||r_(`${e.tag}.${this.props.messageListId}`,!1)==="true"}getDomNode(){return this._ref.current}render(){if(this.state.isHidden||!this.props.boxType||!this.props.messageListId)return null;let e=this.getNotification();return e?ke.createElement("div",{className:"rc-MessageListNotification",ref:this._ref},ke.createElement(i_,{closeAction:e.dismissable?this.onHide:null,titleText:e.title,type:e.type},this.buildHeader(e),this.buildMessage(e),this.buildFooter(e))):null}};Ps.displayName="MessageListNotification";Ps.propTypes={boxType:Ve.string.isRequired,flux:Ve.object,memberMaxPlanCode:Ve.string,messageListContext:Ve.object,messageListId:Ve.oneOfType([Ve.string,Ve.number]).isRequired,snType:Ve.string,socialNetworkType:Ve.string};gp.exports=Ps});var bp=x((oC,vp)=>{"use strict";var c_=Mo();vp.exports={getHeightWithMargins:function(i){var e=c_.getComputedStyles(i),t=isNaN(parseInt(e.height,10))?0:parseInt(e.height,10),s=isNaN(parseInt(e.marginTop,10))?0:parseInt(e.marginTop,10),r=isNaN(parseInt(e.marginBottom,10))?0:parseInt(e.marginBottom,10);return t+s+r}}});var yp=x((nC,Cp)=>{"use strict";var Wt=O(),Ms=R(),p_=Yi(),u_=Qe(),d_=Zc(),m_=tp(),h_=_p(),f_=bp(),{MESSAGE_LIST:g_,COMMENT_LIST:__}=je(),{getSavedEntitlementsCount:v_,saveEntitlements:b_}=Xs(),Kt=class extends Wt.Component{constructor(e){super(e),this.messageListComponent=null,this.getMessageListRef=this.getMessageListRef.bind(this),this._onNotificationClick=this._onNotificationClick.bind(this),this._onNotificationHide=this._onNotificationHide.bind(this),this._onNotificationShow=this._onNotificationShow.bind(this),this._calculateNotificationsHeight=this._calculateNotificationsHeight.bind(this),this.state={isNewMessageNotificationVisible:!1};let{entitlements:t}=this.props;t&&v_()!==t.size&&b_(t)}componentWillUnmount(){this.props.flux.getStore(__).resetCommentListsFocused()}_onNotificationClick(){this.messageListComponent!==null&&(this.messageListComponent.getDomNode().scrollTop=1,this.props.flux.getActions(g_).loadUnreadMessages(this.props.messageListId))}_onNotificationShow(){this.setState({isNewMessageNotificationVisible:!0})}_onNotificationHide(){this.setState({isNewMessageNotificationVisible:!1})}_calculateNotificationsHeight(){let e=this.messageListNotificationRef.getDomNode();return e?f_.getHeightWithMargins(e):0}getMessageListRef(e){this.messageListComponent=e}render(){let e={ref:r=>{this.messageListNotificationRef=r},messageListId:this.props.messageListId,flux:this.props.flux},t={onClick:this._onNotificationClick},s=p_({},this.props,{getNotificationsHeight:this._calculateNotificationsHeight,getRef:this.getMessageListRef,isNewMessageNotificationVisible:this.state.isNewMessageNotificationVisible});return Wt.createElement(u_,{connectToStores:{messageList:r=>({boxType:r.getBoxTypeByMessageListId(this.props.messageListId),messageList:r.getMessageList(this.props.messageListId),messageListContext:r.getMessageListContext(this.props.messageListId),unreadCount:r.getUnreadCountByMessageListId(this.props.messageListId),filterKeyword:r.getFilterTerm(this.props.messageListId,"filterKeyword"),filterFollowersCount:r.getFilterTerm(this.props.messageListId,"filterFollowersCount")}),socialNetworks:r=>({socialNetworks:r.state.socialNetworks}),member:r=>({memberMaxPlanCode:r.get().memberMaxPlanCode})},render:function(r){let o=!!r.filterKeyword||!!r.filterFollowersCount?translation._("No results found"):void 0,a=r.messageListContext;return Wt.createElement("span",null,r.boxType&&Wt.createElement(h_,{...e,boxType:r.boxType,memberMaxPlanCode:r.memberMaxPlanCode,messageListContext:r.messageListContext,snType:a?r.messageListContext.get("socialNetworkSubType"):null,socialNetworkType:a?r.messageListContext.get("socialNetworkType"):null}),Wt.createElement(m_,{...t,messageListContext:r.messageListContext,unreadCount:r.unreadCount}),Wt.createElement(d_,{...s,emptyListText:o,messageList:r.messageList,messageListContext:r.messageListContext,socialNetworks:r.socialNetworks}))}})}};Kt.displayName="MessageListContainer";Kt.propTypes={flux:Ms.object,messageListId:Ms.oneOfType([Ms.number,Ms.string]).isRequired,entitlements:Ms.object};Kt.defaultProps={entitlements:new Set};Cp.exports=Kt});var ae=U(H());Xt();var ts=U(Zt());$i();Xt();var O_=U(Qp());function ln(i,e,t){var s=Se.getEjs("dashboard/securepostpopup").render({accounts:i}),r={modal:!0,draggable:!1,width:400,title:E._("Confirm Ownership"),position:["center",67],noChrome:1,close:ts.default.noop},o=Oo.create("securePostPopup",r),a=function(){e(),ts.default.isFunction(t)&&t(),o.dialog("close")};o.append(s).find("._confirm").click(function(){return a(),!1}).end().find("._cancel").click(function(){return o.dialog("close"),ts.default.isFunction(t)&&t(),!1}).end();var p=(0,ts.default)("._slideToPost"),f=o.find("._sliderMessage");p.slider("destroy").slider({animate:!0,stop:function(C,S){S.value<90?(p.slider("value",0),f.css({opacity:1})):(p.slider("value",100),a())},slide:function(C,S){var k=0;S.value<75&&(k=100-S.value*2),f.css({opacity:k/100})}})}Io();$i();var Up=U(Ce());xo();var h=U(Zt()),D=U(H());Xt();var ho=U(jp());var yt=U(Zt()),oe=U(H());Xt();var Ru=["instagram"],Xi=function(i){return oe.default.isObject(i)?oe.default.result(i,"src"):i},Du=function(i){return oe.default.isObject(i)?oe.default.result(i,"linkText"):null},ju=function(i){return oe.default.isObject(i)?oe.default.result(i,"linkHref"):null},zu=function(i){return oe.default.isObject(i)?oe.default.result(i,"linkSource"):null},cn=function(i){var e=null;switch(i.key){case"ArrowLeft":e=document.getElementsByClassName("_imageLightboxPrev")[0];break;case"ArrowRight":e=document.getElementsByClassName("_imageLightboxNext")[0];break;case"Escape":e=document.getElementsByClassName("_imageLightboxClose")[0];break;default:break}e&&e.click()},pn=qo.extend({popupId:"imageLightbox",params:{closeOnOverlayClick:!0,draggable:!1,isMedia:!0,noChrome:!0,modal:!0,width:"auto"},options:{imgArray:[],displayImg:null},template:"stream/image-lightbox",getTmplData:function(){return this.options},events:{"click ._imageLightboxPrev":"imageLightboxPrev","click ._imageLightboxNext":"imageLightboxNext","click ._imageLightboxClose":"close","hover ._imageLightboxPrev":"showTabPrev","hover ._imageLightboxNext":"showTabNext"},initialize:function(i){window.document.addEventListener("keydown",cn,!0),i&&(oe.default.extend(this,oe.default.pick(i,"data","template","popupId")),i.params&&oe.default.extend(this.params,i.params))},onRender:function(){var i=this.$el;this.$index=i.parent().find("._imagesIndex"),this.$image=i.find("._lightboxImage"),this.$container=i.find("._imageLightboxContainer"),this.$prevTab=i.find("._arrowTabPrev"),this.$nextTab=i.find("._arrowTabNext"),this.$attribution=i.find("._imageAttribution"),this.heightCoefficient=.8,this.hasLink()&&this.isGallery()&&(this.heightCoefficient=.7),this.$image.attr("src",Xi(this.options.imgArray[this.options.displayImg])),i.css("padding",0),i.css("margin-top","-4px"),this.postLoad()},postLoad:function(){var i=this;this.$image.load(function(){(0,yt.default)(this).show(),i.resize(),i.center(),i.updateIndex(),i.updateImageAttribution()})},imageLightboxPrev:function(){this.options.displayImg<=0?this.options.displayImg=this.options.imgArray.length-1:this.options.displayImg--,this.$image.attr("src",Xi(this.options.imgArray[this.options.displayImg])),this.postLoad()},imageLightboxNext:function(){this.options.displayImg=(this.options.displayImg+1)%this.options.imgArray.length,this.$image.hide(),this.$image.attr("src",Xi(this.options.imgArray[this.options.displayImg])),this.postLoad()},showTabPrev:function(){this.$prevTab.toggleClass("x-hover")},showTabNext:function(){this.$nextTab.toggleClass("x-hover")},updateIndex:function(){this.$index.text(E._("%1$s of %2$s").replace("%1$s",this.options.displayImg+1).replace("%2$s",this.options.imgArray.length))},updateImageAttribution:function(){if(!!this.$attribution.length){var i=this.options.imgArray[this.options.displayImg],e=zu(i);if(oe.default.contains(Ru,e)){var t=ju(i),s=Du(i);if(t&&s){var r=this.$attribution.children("._link"),o=this.$attribution.children("._sourceIcon");r.length||(r=(0,yt.default)('<a class="_link"></a>')),o.length||(o=(0,yt.default)('<span class="icon-sn-30 -sourceIcon _sourceIcon"></span>')),r.attr("href",t),r.text(s),r.attr("target","_blank"),o.addClass(e+"-white"),this.$attribution.empty().append(r).append(o).show(),this.$container.addClass("x-withLink")}else this.$attribution.hide(),this.$container.removeClass("x-withLink")}}},resize:function(){var i=new Image;i.src=this.$image.attr("src");var e=i.width,t=i.height,s=this.$container.width(),r=this.$container.height(),o=(0,yt.default)(window).width()*.8,a=(0,yt.default)(window).height()*this.heightCoefficient,p=e/t,f=o/a;(e>s||t>r)&&(p>f?e>=o?(this.$container.width(o),o/p>r&&this.$container.height(o/p)):(e>s&&this.$container.width(e),this.$container.height(t)):t>=a?(this.$container.height(a),a*p>s&&this.$container.width(a*p)):(this.$container.width(e),t>r&&this.$container.height(t)))},center:function(){this.$el.dialog("option","position",["center","center"])},close:function(){this.onPopupClose(),window.document.removeEventListener("keydown",cn,!0)},hasLink:function(){return oe.default.filter(this.options.imgArray,function(i){return oe.default.isObject(i)&&oe.default.has(i,"src")&&oe.default.has(i,"linkText")}).length>0},isGallery:function(){return this.options.imgArray.length>1}});No();var dn=U(Zt()),er=U(H());window.googleMapsLoadCallbacks={};function un(i){let e="https://maps-api-ssl.google.com/maps/api/js?v=3&sensor=false",t="googleMapsLoadCallbacks_"+(Math.random()+1).toString(36).substring(7),s=e+"&callback="+t;return window.googleMapsLoadCallbacks[t]=()=>{i(),delete window.googleMapsLoadCallbacks[t]},s}var Bu={showGoogleMap:function(i,e,t){let s=un(()=>{var r=new window.google.maps.LatLng(i,e),o={zoom:13,center:r,mapTypeId:window.google.maps.MapTypeId.ROADMAP},a=new window.google.maps.Map((0,dn.default)(t).get(0),o),p=new window.google.maps.Marker({position:r});p.setMap(a)});Wi(s)},geocode:function(i,e,t){let s=un(()=>{var r=new window.google.maps.Geocoder,o=new window.google.maps.LatLng(i,e);r.geocode({latLng:o},function(a){var p="";if(a&&a.length&&a[0]&&a[0].address_components)for(var f=a[0].address_components,C=0;C<f.length;C++)(f[C].types[0]=="neighborhood"||f[C].types=="neighborhood")&&(p+=f[C].long_name+", "),(f[C].types[0]=="sublocality"||f[C].types=="sublocality")&&(p+=f[C].long_name+", "),(f[C].types[0]=="locality"||f[C].types=="locality")&&(p+=f[C].long_name+", "),(f[C].types[0]=="administrative_area_level_1"||f[C].types=="administrative_area_level_1")&&(p+=f[C].long_name+", "),(f[C].types[0]=="country"||f[C].types=="country")&&(p+=f[C].long_name);er.default.isFunction(t)&&t(a,p)})});Wi(s)}};hs.util=hs.util||{};er.default.extend(hs.util,Bu);var mn=U(ii()),hn=U(je()),fn=U(Ce());Xt();var tr={save:function(i){return ajaxCall({url:"/ajax/stream/save-box",data:i},"q1").then(function(e){e&&e.boxData&&mn.default.getActions(hn.MESSAGE_LIST).saveMessageListContext(e.boxData)})},saveTwitterSearchStream:function(i,e,t,s){var r;i=i||"",s=s||E._("New Tab"),this.createNewTab(s).then(function(o){var a=o.tabId;r={saveTitle:1,box:{tabId:a,terms:e,socialNetworkId:t,title:i,type:"SEARCH"}},this.save(r).then(function(p){fn.default.emit(ut.NEW_STREAM_ADDED,p)})}.bind(this))},createNewTab:function(i){return i=i||E._("New Tab"),ajaxCall({url:"/ajax/stream/add-tab",data:{refreshInterval:10,title:i}},"q1")}};var re=U(Ce());var sr=U(H()),ze=U(Ke()),Hu=[ze.default.types.INSTAGRAM,ze.default.types.INSTAGRAMBUSINESS,ze.default.types.TWITTER,ze.default.types.FACEBOOK,ze.default.types.YOUTUBECHANNEL,ze.default.types.LINKEDIN,ze.default.types.LINKEDINCOMPANY,ze.default.types.TIKTOKBUSINESS],$u=[],Gu={canRenderReactStream:function(i,e){return sr.default.contains(Hu,i)&&!sr.default.contains($u,e)}},gn=Gu;xo();Io();var Ap=U(Hp());$i();ko();var ir=U(Ce());ou();var ss=async(i,e)=>{let t=await Bs("hs-app-streams-async");if(i)if(t.isValidComponentName(i)){t.mount(i,e).catch(r=>{jo(r)});let s=r=>{let{error:o,...a}=r;Do(o,a),ir.default.off("streams.errors.UnmountError",s)};ir.default.on("streams.errors.UnmountError",s)}else throw new Error(`Error while loading async Engage component "${i}": component doesn't exist`);else throw new Error("Error while loading async Engage component: component name not provided")};var Vu=Object.create({path:function(){var i=window.location.hash.match("^#(/[^?]+)"),e=i?i[1]:"/";return e.length>1&&e[e.length-1]==="/"&&(e=e.substring(0,e.length)),e},value:function(){var i=window.location.hash.match("^#(.+)");return i?i[1]:"/"},queryString:function(){var i=window.location.hash.match("^#.*?[?](.+)");return i?i[1]:""},parameters:function(){var i=this.queryString(),e={};if(i!==""){var t=new URLSearchParams(i);Array.from(t.keys()).forEach(function(s){var r=t.getAll(s);e[s]=r.length===1?r[0]:r})}return e},change:function(i){var e=this;return window.addEventListener("hashchange",function(){i(e.buildChangeEvent())},!1)},buildChangeEvent:function(){return{path:this.path(),queryString:this.queryString(),parameters:this.parameters()}}}),ri=Vu;var Lp=U(iu()),Pp=U(ru());Zp();var at=U(ii()),We=U(je());var Ui=U(O()),mo=U(Jt()),Sp=U(Qe()),Ep=U(yp()),xp=U(ii());var Tp=U(O()),po=U(Bp()),uo=U(Ce()),Os=class extends Tp.default.PureComponent{componentDidMount(){uo.default.on("coreViews:changed",this.props.onChange)}componentWillUnmount(){uo.default.removeListener("coreViews:changed",this.props.onChange)}render(){return this.props.children}};Os.propTypes={children:po.default.node.isRequired,onChange:po.default.func};Os.defaultProps={onChange:()=>{}};var wp=Os;var Np=({messageListId:i,entitlements:e,loadMessagesBetween:t,loadMessagesOlder:s,setUnreadCaching:r,loadUnreadMessages:o},a)=>{mo.default.render(Ui.default.createElement(wp,{onChange:({isPrimaryView:p})=>{!p&&a&&mo.default.unmountComponentAtNode(a)}},Ui.default.createElement(Sp.default,{flux:xp.default},Ui.default.createElement(Ep.default,{loadMessagesBetween:t,loadMessagesOlder:s,loadUnreadMessages:o,messageListId:i,setUnreadCaching:r,entitlements:e}))),a)};var Mp=U(Uu()),{CUSTOM_APPROVALS:C_,PRODUCT_ACCESS_UNIFIED_INBOX:y_,MESSAGE_TAGGING:T_,NO_TWITTER_SEARCH:w_,getCustomPermissions:S_,DENY_ACCESS:E_}=(_u(),j(gu)),y=window.stream||{},x_="engage.streams.session-attempted",N_=[C_,T_,w_,y_];Ap.default.mixin(y,Ao());y.stream=y.stream?y.stream:{};y.stream.boxCachePrefix="boxMsg_";y.stream.ERROR_MESSAGE_DELAY=10*1e3;y.stream.SUPPORTED_PIC_URLS=/http:\/\/(www\.)?(twitpic\.com|yfrog\.com|ow\.ly\/i|tweetphoto\.com|instagr\.am\/p|plixi\.com\/p)\/([\w\d]+)/i;y.messageEvents={"statusObject:extraAction:recoverStream":"recoverBoxFromLocalStorage","socialNetwork:refresh:success":"onRefreshSocialNetwork","full_screen_composer:response:message_success":"onPostScheduledOrSent","amplify:create_from_composer:success":"onPostAmplifyCreateFromComposer"};y.entitlements=null;async function I_(){let i=new Set,e=await Fo(),t=null;try{t=await S_(e,N_)}catch(s){console.error("Get Streams entitlements failed.",s)}if(t)for(let s of t)s.value!==E_&&i.add(s.featureCode);return i}y.init=async function(){(0,Pp.recordIncrement)(x_),this.delegateMessageEvents(),y.entitlements=await I_(),(0,h.default)("body").on("hsRefreshBoxDone",function(i,e,t,s){setTimeout(function(){y.stream.updateStreamOnScroll("#box"+e)},1e3),y.stream.applyFilter(e),t==="old"&&s.count&&(0,h.default)("#box"+e).find("._tweetMoreHidden").removeClass("_tweetMoreHidden").addClass("_tweetMore")}).on("click","._quickSearchPopup",function(){var i=(0,h.default)(this),e=h.default.trim(i.text()),t={tag:e};return at.default.getActions(We.MESSAGE).showHashtagSearch(t),!1}).on("click","._box ._isShared, ._box ._notShared",function(){return!1}).on("click","._box ._boxMoreMenu",function(){y.stream.openBoxMoreMenu(this)}).on("click","._box ._refresh",function(){(0,h.default)(this).closest("._box").box("refresh","new")}).on("click","._box ._options a, ._box ._options button",function(){y.box.messageOptionsButtonHandler(this,hs.currentMessage)}).on("click","._box ._deletePostComment",function(){if(confirm(E._("Are you sure you want to permanently delete this comment?"))){var i=(0,h.default)(this).closest("._comment"),e=i.attr("commentid"),t=i.closest("._box"),s=t.box("get","socialNetworkId");y.facebook.deleteComment(e,s,function(){var r=i.closest("._postComments").find("._commentCount");window.fadeSlideRemove(i,null,function(){if(r.length){var o=parseInt(r.html(),10);r.html(o-1+" comments")}})})}}).on("click","._tLocationInfo",function(){y.stream.openTwitterPreview(this)}).on("click","._response ._header",function(){window.assignment.toggleMessage(this)}).on("click","._box ._message ._imageToggle",function(){var i=(0,h.default)(this),e=i.closest("._box"),t=i.closest("._message"),s=t.find(".mediaGallery");e.find("._message ._close").trigger("click"),s.toggle(),i.text(E._((s.is(":visible")?"Hide image":"Show image")+(i.data("count")===1?"":"s")))}).on("click","._box ._message ._inlineMedia ._close",function(){var i=(0,h.default)(this).closest("._message");i.find("._postAttachment, ._mediaGallery").show().siblings("._inlineMediaContainer").remove()}).on("click","._box ._socialNetworkExpirationStream ._reconnectSocialNetwork",function(i){var e=(0,h.default)(i.target).data("snid"),t={socialNetworkId:e};dt.reconnect(t,null),hs.util.recordAction("reauthStreamReconnect")}).on("click","._box ._socialNetworkExpirationStream ._showExplanation",function(i){(0,h.default)(i.target).siblings("._reauthExplanation").toggle()}).on("click","._box ._deleteGroup",function(i){var e=(0,h.default)(this).data("snid"),t=(0,h.default)(this).data("tabid");ajaxCall({url:"/ajax/network/delete",data:{socialNetworkIds:e},success:function(){window.loadStreams(t,null,!0)}},"qm")}).on("click","._box ._message ._toggleMessageContent",function(){(0,h.default)(this).closest("._message").find("._collapsedMessageContent").toggle()}).on("click","._box ._loadOld",function(){return(0,h.default)(this).closest("._box").box("refresh","old"),!1}),re.default.on("message:retweetMessage",function(i){kp.showRetweetPopup(i.anchor,i.socialNetworkId,i.messageId,i.impressionId,i.fnOldRetweet,i.fnNewRetweet,i.fnTwitterQuote)}),re.default.on("streams:stream:refresh",function(i){(0,h.default)("#box"+i).box("refresh","new")})};y.onPostScheduledOrSent=function(){we.isFeatureEnabled("PGR_561_REFRESH_STREAMS_ON_MESSAGE_SUCCESS")&&hs.dashboardState==="streams"&&re.default.emit("streams:board:refresh")};y.onPostAmplifyCreateFromComposer=function(){hs.dashboardState==="streams"&&re.default.emit("streams:board:refresh")};y.onRefreshSocialNetwork=function(){if(hs.dashboardState==="streams"){var i=null;if(ri.path()==="/tabs"&&ri.queryString().match(/id=\d+/)){var e=ri.queryString().match(/id=(\d+)/);e=e[1],i=e}i?window.loadStreams(i,null,!0):window.address.reloadStreams()}(0,h.default)("#boxAddStream").length&&y.streamHelper.initSnDropdown(),(0,h.default)("#streamsContainer:visible").length&&Po(hs.memberId,function(t){var s=function(){var r=(0,h.default)("#dashboardTabs").find("._tab").last(),o=r&&r.attr("id")&&r.attr("id").replace("tab","");o&&hs.currentTabId!==o&&window.loadStreams(o,null,!0)};y.stream.refreshTabs(s)})};y.recoverBoxFromLocalStorage=function(){var i,e,t=["newAddStream=1"];Je.isSupported&&(e=Je.getItem("lastDeletedStream"),e&&(i=e.data,h.default.each(i,function(s,r){t.push(encodeURIComponent("box["+s+"]")+"="+encodeURIComponent(r.toString().replace(/%22/g,'"').replace(/%27/g,"'")))}),y.saveBox.saveBoxSubmit(t.join("&")),y.streamHelper.toggleOptionsOverlay(),Je.removeItem("lastDeletedStream")))};y.stream.openTwitterPreview=function(i,e){if(!!i){var t=(0,h.default)(i);t.is("._tLocationInfo")||(t=t.closest("._tLocationInfo"));var s=t.attr("rel"),r=function(){ajaxCall({type:"GET",url:"/ajax/twitter/location-info?locationData="+s,success:function(o){hs.bubblePopup.setContent(o.output),typeof o.latitude<"u"&&typeof o.longitude<"u"&&hs.util.showGoogleMap(o.latitude,o.longitude,"#map_canvas")}},"single")};e&&e>0?hs.bubblePopup.openWithDelay(t,null,null,r,e):hs.bubblePopup.open(t,null,null,r)}};y.stream.showPreviewPopup=function(i){var e=null;switch(i.type){case"image":i.clickUrl=i.clickUrl||"#",e=(0,h.default)('<a href="'+i.clickUrl+'" target="_blank"><img class="previewImage" src="'+hs.util.proxify(i.imgSrc)+'" alt="" title="'+E._("View on website")+'" /></a>').click(function(){s.dialog("close")});break;default:e=(0,h.default)("<span></span>");break}var t={minHeight:150,width:640,closeOnEscape:!0,draggable:!0,title:E._("Preview")+" "+i.type,position:["center",60]},s=h.default.dialogFactory.create("urlPreviewPopup",t);s.empty().append(e),y.stream.showPreviewPopup.center=function(){s.dialog("option","position",["center",60])}};y.stream.showGalleryPopup=function(i){var e=new pn(i);e.render()};y.stream.refreshTabs=function(i){var e=(0,h.default)("#editTabForm input[name='id']").val();ajaxCall({url:"/ajax/stream/refresh-tabs?activeTabId="+e,success:function(t){if(t.output){var s=(0,h.default)("#dashboardTabs"),r=s.find("._tab").length;s.empty().html(t.output),s.find("._addNewTabBtn").bind("click",function(o){y.stream.addNewTab()}),window.updateTabs(),t.tabCount&&r&&r<t.tabCount&&s.find("._tab:last").find("._load").click(),h.default.isFunction(i)&&i()}}},"q1")};window.initStream=function(i){let e=hs.currentTabId,t="streams",s="time_to_load_board_seconds",r="Time to load a board in Streams",o=[.25,.5,1,2,2.5,3,4,5,6,7,8,10,12.5,15,17.5,20],a=null,p=(0,h.default)("#streamsContainer").find("._box");p&&p.length&&e&&(a=(0,Lp.getPerformanceMetrics)(t).getHistogramTimer(s,r,o),a.start({id:e}));let f=(0,h.default)("#streamTabInfo"),C=f.find('input[name="streamSize"]').val();window.updateStreamSize(C),window.updateViewableColumns(),window.resizeColumns(),f.find("#editTabForm").bind("keypress",function(I){return window.disableEnterKey(I)}),y.stream.makeColumnsDroppable(),y.stream.makeAppColumnsDroppable(),we.isFeatureDisabled("NGE_19796_REACT_SORTABLE_STREAMS")&&(0,h.default)("#streamsScroll ._streamsScroll").sortable({forcePlaceholderSize:!0,handle:"._header ._handle",distance:3,axis:"x",cursor:"move",tolerance:"pointer",placeholder:"sortable-placeholder",start:function(I,T){T.placeholder.width(T.placeholder.width()-6),T.item.height(T.item.height()+30),T.item.children("._body").hide(),hs.timers.editTabTimer&&(clearTimeout(hs.timers.editTabTimer),delete hs.timers.editTabTimer)},stop:function(I,T){var P=T.item.children("._body");P.show(),window.editTabWithTimer();var q=P.find("iframe[pid]");if(q.length){var F=!1,b=q.attr("name");try{F=b.split("_")[1]}catch{hs.statusObj.update(E._("Cannot get member stream id (pid)"),"error",!0)}F&&ajaxCall({url:"/ajax/appdirectory/get-stream-url",data:{pid:F},type:"GET"},"qm").done(function(A){let L=document.createElement("form");L.setAttribute("action",A.url),L.setAttribute("method","post"),L.setAttribute("target",b),document.body.appendChild(L),D.default.defer(function(){L.submit(),L.remove()})}).fail(function(A){hs.statusObj.update(JSON.parse(A.responseText).error,"error",!0)})}}});var S=D.default.map(p,function(I){return new Promise(function(T){(0,h.default)(I).box("refresh",null,T)})});if(S.length!==0?Promise.all(S).then(function(){e&&(a.end({id:e}),re.default.emit("streams:board:refresh:done"))}):re.default.emit("streams:board:refresh:done"),window.startTabRefreshTimer(),window.startUserInactiveTimer(),we.isFeatureEnabled("NGE_17040_REACT_ADD_STREAM")){var k=i.isShowStreamHelper===0&&(0,h.default)("._box").length>0;ss("addStreamPane",{isHidden:k})}};window.initScrollAutoLoad=function(i){(0,h.default)(i).unbind("scroll.autoLoadStream").bind("scroll.autoLoadStream",function(e){var t=(0,h.default)(e.target),s=!1;if(!!t.find("._tweetMore").length){if(t.find("._messages").length)s=t.find("._tweetMore").position().top-t.height()<200;else{var r=t.find("._tweetMore").offset();if(r){var o=r.top;s=t.height()>o-200}}s&&t.find("._tweetMore").find("a").click().end().hide().swapClass("_tweetMore","_tweetMoreHidden")}})};y.stream.getMinTweetId=function(i){if(!i.count)return null;var e=i.viewData.messages,t=i.boxType,s="id";return t.match(/\b(f_|l_|m_)/i)&&(t.match(/\bf_/i)?s="created":t.match(/\bl_/i)?s="timestamp":s="postDate"),e[e.length-1][s]};window.refreshTab=function(i){if(i!==!0&&parseInt((0,h.default)("#editTabForm ._interval._active").attr("interval"),10)===0)return!1;let e=(0,h.default)("#streamTabInfo");e.find("._refresh").hide(),e.find("._refreshing").show();let t=window.refreshBoxes();return hs.checkTabRefreshStateTimesTried=0,hs.checkTabRefreshStateInterval=t,hs.checkTabRefreshStateMaxTries=Math.round(60/t),setTimeout(Op,hs.checkTabRefreshStateInterval*1e3),!1};y.stream.abortRefreshes=function(){try{(0,ho.default)("qstream").abort()}catch{}};window.refreshBoxes=function(){let i=[],e=(0,h.default)("#streamsContainer").find("._box");we.isFeatureEnabled("LPLAT_2324_FIX_STREAMS_ABORT_ERROR")?(0,Mp.abortStreamRefresh)():we.isFeatureEnabled("PUB_25645_ABORT_ERROR_FIX")?y.stream.abortRefreshes():(0,ho.default)("qstream").abort();let t=e.length;return t<1?0:(e.find("._header ._refresh").hide(),e.find("._header ._refreshing").show(),e.find("._body ._error").hide(),e.each(function(){var s=(0,h.default)(this);s.box("refresh","new"),i.push(s.data("boxid"))}),i.length&&(i.push("singlePostView"),at.default.getActions(We.MESSAGE_LIST).remove({exclude:i})),re.default.emit("streams:analytics:refresh",{boxIds:i}),t)};var Op=function(){hs.checkTabRefreshStateTimesTried++,hs.checkTabRefreshStateTimesTried>hs.checkTabRefreshStateMaxTries?Ip():(0,h.default)("#streamsContainer ._box ._header ._refreshing:visible").length>0?setTimeout(Op,hs.checkTabRefreshStateInterval*1e3):Ip()};window.refreshBoxesDone=function(){(0,h.default)("#streamsContainer ._box ._header ._refresh").show(),(0,h.default)("#streamsContainer ._box ._header ._refreshing").hide();var i=0,e=!1,t=(0,h.default)("#streamsScroll ._newCount");h.default.each(t,function(s,r){r=(0,h.default)(r),i+=r.html().replace(/\D/g,"")*1,e||(e=r.html().indexOf("+")>-1)}),i>0&&(hs.windowHasFocus=!1,qp(i+(e?"+":"")))};function Ip(){(0,h.default)("#streamTabInfo ._refresh").show(),(0,h.default)("#streamTabInfo ._refreshing").hide(),window.refreshBoxesDone();var i=new Date,e=i.getHours(),t=i.getMinutes(),s="AM";e==12?s="PM":e>12&&(e=e-12,s="PM"),t<10&&(t="0"+t),(0,h.default)("#streamTabInfo ._refresh").attr("title",E._("Refresh all | Last update: ")+e+":"+t+s)}y.stream.updateNewCount=function(i,e,t){e=parseInt(e,10);var s=(0,h.default)(i).find("._header ._newCount");!isNaN(e)&&e>0?(t&&(e=e+"+"),s.text(e).show("fast")):s.empty().hide("fast")};y.stream.addNewTab=function(i,e){i=i||E._("New Board");var t=(0,h.default)("#dashboardTabs");if(t.find("._tab").length>=20)return hs.statusObj.update(E._("You can only add up to 20 boards"),"warning",!0),!1;var s=(0,h.default)('<div class="_addNewTabDummy _tab tab animated fadeInUp active"><div class="text text-edit"><input type="text" maxlength="30" value="'+i+'" class="_newTabName" style="min-width: 200px;" /></div><button title="'+E._("Cancel adding new board")+'" class="_cancelAddTab -closeButton"><span class="icon-13 close">X</span></button></div>'),r=function(){var o=s.find("._newTabName").val();if(h.default.trim(o).length){if(o.length>30)return hs.statusObj.update(E._("Board name can not be over 30 characters"),"warning",!0),!1}else return hs.statusObj.update(E._("Board name can not be empty"),"warning",!0),!1;(0,h.default)("body").unbind("click.addNewTab"),hs.statusObj.update(E._("Adding new board..."),"info",!0),ajaxCall({url:"/ajax/stream/add-tab",data:"refreshInterval=10&title="+o,success:function(a){return a.tabId>0?window.address.go("/tabs?id="+a.tabId,e):hs.statusObj.update(E._("Adding new board failed. Please try again."),"error",!0),!1}},"q1")};return s.find("._cancelAddTab").click(function(o){o.preventDefault(),o.stopPropagation(),(0,h.default)("body").unbind("click.addNewTab"),s.remove(),window.address.reloadStreams()}),s.find("._newTabName").keyup(function(o){o.keyCode==13&&r()}),s.bind("finishAddingTab",function(){r()}),t.find("._tab").removeClass("active"),(0,h.default)("#tabExtras .dropdown-content > *").length?t.find("._tab").eq(0).before(s):t.find("#tabExtras").before(s),window.updateTabs(),(0,h.default)("#streamsScroll").empty().width("100%"),window.updateDashboardHeight(),(0,h.default)("body").bind("click.addNewTab",function(o){var a=(0,h.default)(o.target);a.is("_addNewTabDummy")||a.closest("._addNewTabDummy").length||a.is("addTab")||a.closest(".addTab").length||((0,h.default)("body").unbind("click.addNewTab"),r(),o.stopPropagation())}),t.find("._addNewTabDummy").trigger("finishAddingTab"),!1};window.editTabWithTimer=function(i){i||(i=hs.c.delayPrefsTab*1e3),hs.timers.editTabTimer&&(clearTimeout(hs.timers.editTabTimer),delete hs.timers.editTabTimer),hs.timers.editTabTimer=setTimeout(k_,i)};var k_=function(){var i=(0,h.default)("#streamTabInfo input[name='streamSize']").val()||hs.c.currentStreamSize;hs.c.numViewableCols=an.getNumViewableColsForStreamSize(i),(0,h.default)("#streamTabInfo input[name='visibleColumnCount']").val(hs.c.numViewableCols);var e=(0,h.default)("#streamTabInfo form"),t=e.serialize();if(!t)return!1;var s="";return(0,h.default)("#streamsContainer ._box").each(function(r){var o=(0,h.default)(this).attr("id").replace("box","");r===0?s=o:s+=","+o}),t+="&boxOrder="+encodeURIComponent(s),ajaxCall({url:"/ajax/stream/edit-tab",data:t},"qm"),!1};function qp(i){!hs.windowHasFocus&&hs.prefs.isNotifyNewTweet&&(document.title==="Hootsuite"?document.title=i+" "+E._("new tweets..."):document.title="Hootsuite",hs.timers.alertTitleUpdateTimer&&(clearTimeout(hs.timers.alertTitleUpdateTimer),delete hs.timers.alertTitleUpdateTimer),hs.timers.alertTitleUpdateTimer=setTimeout(function(){qp(i)},hs.c.delayUpdateTitleAlert*1e3))}D.default.bindAll(tr,"save");var Fp=D.default.debounce(tr.save,500);window.selectSocialNetworkPopup=function(i,e,t,s,r){s=typeof s=="string"?s:D.default.isArray(s)?s.join(" "):"TWITTER",r=r||!1;var o=[];D.default.each(s.split(" "),function(a){o=o.concat(D.default.values(hs.socialNetworksKeyedByType[a]))}),o.length==1&&!t?i(o[0].socialNetworkId):(dashboard.showTwitterProfileSelectorPopup(function(a){i(a),(0,h.default)("#socialNetworkSelectorPopup").dialog("close")},t,s,r),D.default.defer(function(){var a=(0,h.default)("#socialNetworkSelectorPopup");e?a.find("._title").html(e):a.find("._title").text(E._("Twitter network to apply the action to:"))}))};y.stream.openBoxMoreMenu=function(i){var e=(0,h.default)(i);if(!!e.length){e.is("._more")||(e=e.closest("._more"));var t=e.next("._moreMenu");if(t.is(":visible")){t.hide();return}t.show();var s=function(r){t.hide()};return D.default.defer(function(){(0,h.default)("body").one("click.closeBoxMoreMenu",s)}),!1}};y.stream.editTabName=function(i){var e=(0,h.default)(i),t=e.find("._edit input").val(),s=Se.cleanPage(t),r=function(a){var p=(0,h.default)(a.target),f=e.find("._edit input").val(),C=Se.cleanPage(f),S=e.attr("id").match(/\d+/)[0],k=!0;if(p.closest("._tab").length)if(!p.closest("._tab").is("#"+e.attr("id")))k=!1;else return;else if(!h.default.trim(f).length||f.length>30){var I=E._("Tab name can not be empty");f.length>30&&(I=E._("Tab name can not be over 30 characters")),hs.statusObj.update(I,"warning",!0),k=!1}else k=t!=f;e.find("._load").show(),e.find("._edit").hide(),window.updateTabs(),k?(e.find("._text").html(C),e.find("._text input").val(f),window.updateTabs(),ajaxCall({url:"/ajax/stream/edit-tab",data:"id="+S+"&title="+encodeURIComponent(f),error:function(){e.find("._text").html(s),e.find("._text input").val(t),window.updateTabs()}},"qm")):(e.find("._text").html(s),e.find("._edit input").val(t)),(0,h.default)("body").unbind("click.editTabName"),a.stopPropagation()},o=e.find("._load").width();e.find("._load").hide(),e.find("._edit").show().find("input").width(o).unbind("keydown.editTabName").bind("keydown.editTabName",function(a){a.keyCode===13&&(0,h.default)("body").trigger("click.editTabName")}),setTimeout(function(){e.find("._edit input").get(0).select()},1),window.updateTabs(),(0,h.default)("body").unbind("click.editTabName").bind("click.editTabName",r)};y.stream.resetFilter=function(i){var e=(0,h.default)("#box"+i),t=e.find("._boxFilter"),s=t.find("._values span:visible input"),r=e.find("._messages ._message");s.val("").focus(),s.trigger("keyup"),r.show()};y.stream.applyFilter=function(i){if(!!i){var e=(0,h.default)("#box"+i),t=e.find("._boxFilter");if(!!t.is(":visible")){var s=t.find("._values span:visible input"),r=t.find("._filters").val(),o=s.val(),a=e.find("._messages ._message"),p=!1,f;t.find("._clearInputValue").on("click",function(){y.stream.resetFilter(i)});var C=function(k){hs.trackEvent("stream","filter",k);var I=h.default.grep(["web.dashboard.streams.stream",e.box("get","socialNetworkType"),e.box("get","type")],function(T){return T&&T.length}).join(".").toLowerCase();pt.trackCustom(I,"filter_stream_"+k.toLowerCase(),{value:o})};switch(r){case"keyword":o.length&&(f={messageListId:i,keyword:o},re.default.emit("stream:filter",f),re.default.emit("streams:resize"),C("keyword"),a.filter(":not(:Contains("+o+"))").each(function(){(0,h.default)(this).hide().prev("._assignment, ._response").hide()}),p=!0);break;case"followers":if(o){var S={messageListId:i,followersCount:o};re.default.emit("stream:filter",S),re.default.emit("streams:resize"),y.stream.saveFilters(i),C("followers"),p=!0}break;default:break}p&&(e.find("._loadgap").hide().end().find("._tweetMore").hide().swapClass("_tweetMore","_tweetMoreHidden"),setTimeout(function(){y.stream.updateStreamOnScroll("#box"+i),e.find("._body").scrollTop(0)},500))}}};y.stream.removeFilter=function(i){!i||(at.default.getActions(We.MESSAGE_LIST).resetFilters(i),re.default.emit("streams:resize"))};y.stream.getFilters=function(i){var e=(0,h.default)("#box"+i),t=e.find("._boxFilter"),s=t.find("._values span:visible input"),r=t.find("._filters").val(),o=s.val(),a={};if(o)switch(r){case"keyword":a.keyword=o;break;case"followers":a.followers=parseInt(o);break;case"tag":a.tag=o;break;default:break}return a};y.stream.saveFilters=function(i){var e=(0,h.default)("#box"+i).box("get","type"),t=(0,h.default)("#streamTabInfo input[name='id']").val(),s=y.stream.getFilters(i);i&&e&&t&&Fp({box:{boxId:i,type:e,tabId:t,filters:D.default.isEmpty(s)?"":s}})};y.stream.getLayout=function(i){var e=(0,h.default)("#box"+i),t=e.box("get","layout");return D.default.isObject(t)||(t={}),t};y.stream.saveLayout=function(i,e){var t=(0,h.default)("#box"+i),s=t.box("get","type"),r=e||y.stream.getLayout(i),o=t.box("get","tabId");i&&s&&o&&Fp({box:{boxId:i,type:s,tabId:o,layout:r}})};y.stream.refreshAppBox=function(i){var e=(0,h.default)("#box"+i),t=e.find("._header ._refresh"),s=t.next("._refreshing"),r=e.find("._body iframe"),o=r.attr("apikey"),a=r.attr("pid");return Ji.refresh(o,a),window.appapi.callBackFunc.refresh(a),t.hide(),s.show(),setTimeout(function(){t.show(),s.hide()},700),!1};y.stream.initBox=function(i,e){var t=(0,h.default)("#box"+i);if(t.box(e),gn.canRenderReactStream(e.socialNetworkType,e.type)){var s=t.find("._messages");t.box("set","reactStream",!0),s.closest("._box").addClass("x-reactContext"),s.addClass("-reactContainer"),s.length&&Np({loadMessagesBetween:function(r,o){at.default.getActions(We.MESSAGE_LIST).trimMessagesBelowGap(r,o)},loadMessagesOlder:function(r){at.default.getActions(We.MESSAGE_LIST).fetch(r,"old").then(function(){re.default.emit("stream:refreshSuccess",r)})},loadUnreadMessages:function(r){at.default.getActions(We.MESSAGE_LIST).loadUnreadMessages(r)},setUnreadCaching:function(r,o){at.default.getActions(We.MESSAGE_LIST).setUnreadCaching(r,o)},messageListId:i,entitlements:window.stream?.entitlements},s[0])}};y.removeWelcomeTab=function(){return confirm(E._("Are you sure you want to remove the 'Getting Started' tab? Removing this tab cannot be undone."))&&ajaxCall({url:"/ajax/member/update-preference",data:"type=isShowTweetBoxInfo&value=0",beforeSend:function(){hs.statusObj.update(E._("Deleting tab..."),"info")},success:function(i){if(i.output=="SUCCESS"){var e=(0,h.default)("#tab0");e.find("._delete").remove(),e.animate({opacity:0,width:0},1e3,function(){if(e.hasClass("active")){var t=e.next("._tab"),s;t.length?s=function(){t.find("._load").click()}:s=window.address.reloadStreams,D.default.defer(s)}e.remove(),hs.statusObj.reset(),window.updateTabs()})}else hs.statusObj.update(E._("We are not able to delete the tab at this time, please try again later"),"error",!0)},error:function(){hs.statusObj.reset()},abort:function(){hs.statusObj.reset()}},"q1"),!1};y.stream.showStreamMessage=function(i,e,t,s){var r=(0,h.default)("#box"+i+" ._streamMessage");r.find("._content").html(e).end().show(),h.default.isFunction(s)&&r.bind("click",s).css({cursor:"pointer"}),t||setTimeout(function(){y.stream.hideStreamMessage(i)},5e3)};y.stream.hideStreamMessage=function(i){var e=(0,h.default)("#box"+i+" ._streamMessage");e.find("._content").empty().end().hide().unbind("click").css({cursor:"default"})};y.stream.deletePostGenerator=function(i){return function(e,t,s){return ajaxCall({url:"/ajax/"+i+"/delete-post",data:"postId="+e+"&socialNetworkId="+t,beforeSend:function(){hs.statusObj.update(E._("Deleting post..."),"info")},success:function(r){r.success==1?(s(),hs.statusObj.reset()):hs.statusObj.update(E._("Error deleting your post, you may not have permission to delete this post"),"error",!0)},error:function(){hs.statusObj.reset()},abort:function(){hs.statusObj.reset()}},"q1"),!1}};y.stream.deleteCommentGenerator=function(i){return function(e,t,s){return ajaxCall({url:"/ajax/"+i+"/delete-comment",data:"commentId="+e+"&socialNetworkId="+t,beforeSend:function(){return hs.statusObj.update(E._("Deleting comment..."),"info")},success:function(r){return r.success===1?(s(),hs.statusObj.reset()):hs.statusObj.update(E._("Error deleting your comment, you may not have permission to delete it"),"error",!0)},error:function(r){hs.util.keepErrorMessageVisible(r)},abort:function(){return hs.statusObj.reset()}},"q1"),!1}};y.stream.updateStreamOnScroll=function(i){var e=300,t=i.target?(0,h.default)(i.target).closest("._box"):(0,h.default)(i),s=t.attr("id"),r="timerLazyload_"+s,o=function(){if(hs.timers[r]){clearTimeout(hs.timers[r]);try{delete hs.timers[r]}catch{hs.timers[r]=void 0}}},a=function(){hs.stopMessageMenuEvent=!1;var p=t.find("._body"),f=300,C=p.offset().top,S=C+p.height();if(C-=f,S+=f,p.scrollTop()===0){var k=s.replace("box",""),I=y.unreadCache.get(k);if(I){D.default.defer(function(){I.render(),I.getCount()<hs.c.tweetPageSize&&p.scrollTop(0),y.stream.hideStreamMessage(k),y.unreadCache.remove(k)});return}}p.find("._tweetMore:visible").length&&p.find("._tweetMore").position().top-p.height()<300&&D.default.defer(function(){p.find("._tweetMore:visible a, ._tweetMore:visible button").click()}),p.find("._message").each(function(T,P){var q=(0,h.default)(P),F=q.offset().top,b=q.outerHeight(!0);C<F+b&&S>F&&y.stream.handleMessageLazyLoad(q)}),o()};o(),hs.timers[r]=setTimeout(a,e),hs.stopMessageMenuEvent=!0};y.stream.makeColumnsDroppable=function(i){i=i||"#streamsScroll ._box";var e=(0,h.default)(i).filter(function(){var t=(0,h.default)(this);return t.box("get","listOwnerSocialNetworkId")&&!t.attr("is-draggable")});e.droppable({activeClass:"droppable",tolerance:"pointer",accept:"._dragUser",over:function(t,s){s.helper.find("._icon").removeClass("denied").addClass("approved")},out:function(t,s){s.helper.find("._icon").removeClass("approved").addClass("denied")},drop:function(t,s){var r=s.draggable.attr("title"),o=(0,h.default)(this).box("get","id");y.twitter.dropUserToList(r,o)}}).attr("is-draggable",1)};y.stream.makeAppColumnsDroppable=function(i){i=i||"#streamsScroll ._box";var e=(0,h.default)(i).filter(function(){var t=(0,h.default)(this);return t.box("get","type")&&t.box("get","type").match(/^app_/i)&&!t.attr("is-draggable")});e.droppable({activeClass:"droppable",tolerance:"pointer",accept:"._dragUser",over:function(t,s){s.helper.find("._icon").removeClass("denied").addClass("approved")},out:function(t,s){s.helper.find("._icon").removeClass("approved").addClass("denied")},drop:function(t,s){var r=s.draggable.attr("title"),o=s.draggable.attr("postid"),a=(0,h.default)(this).find("._body iframe"),p=a.attr("apikey"),f=a.attr("pid");r&&p&&Ji.dropUser(p,f,r,o),f&&window.appapi.callBackFunc.dropUser(f,r,o)}}).attr("is-draggable",1)};y.stream.handleMessageLazyLoad=function(i){var e=(0,h.default)(i),t=e.find("img[lazysrc]");t.attr("src",function(){return(0,h.default)(this).attr("lazysrc")}),D.default.each(t,function(s){(0,h.default)(s).load(function(){if((0,h.default)(this).hasClass("_centerCrop")){var r=(0,h.default)(this).parent();(0,h.default)(this).width()/(0,h.default)(this).height()>=r.outerWidth()/r.outerHeight()?(0,h.default)(this).addClass("x-landscape"):(0,h.default)(this).addClass("x-portrait"),(0,h.default)(this).removeClass("_centerCrop"),(0,h.default)(this).addClass("x-centerCrop")}(0,h.default)(this).removeAttr("lazysrc").addClass("isLoaded")})}),e.find("[lazystyle]").attr("style",function(){return(0,h.default)(this).attr("lazystyle")}).removeAttr("lazystyle")};y.streamHelper={};y.streamHelper.initShareTeamsDropdown=function(){var i=(0,h.default)("#boxAddStream"),e=i.find("._sharedTeamsSelector");ajaxCall({url:"/ajax/stream/get-sharable-teams",success:function(t){var s=[];D.default.each(t.teams,function(r){s.push({id:r.teamId,orgId:r.organizationId,title:D.default.escape(r.name),img:hs.util.rootifyAvatar("team",r.logo)||hs.util.getDefaultAvatar("team")})}),s.length?(e.show().closest("._sharedTeams").find("._noTeam").hide(),e.hsDropdown({data:{items:s,withSearch:!0},change:function(r){e.find("._selectedAvatar").attr("src",r.img).end().find("._selectedName").html(D.default.escape(r.title)).end(),ajaxCall({url:"/ajax/stream/get-team-streams",data:{teamId:r.id},success:function(o){var a=Se.getEjs("stream/streamhelper/sharedstreamrow"),p=i.find("._sharedList");o.teamSharedBoxes&&D.default.values(o.teamSharedBoxes).length?(p.empty(),D.default.each(o.teamSharedBoxes,function(f){p.append(a.render({...f,u_escape:D.default.escape}))})):p.html(E._("This team has no shared streams."))}},"qm")}}),e.hsDropdown("selectElement",s[0].id)):e.hide().closest("._sharedTeams").find("._noTeam").show()}},"q1")};y.streamHelper.getSocialProfilesForStreams=function(){var i=Lo.getExcludedNetworkTypesForComponent("STREAMS","COMMON"),e=function(t){return D.default.some(i,function(s){return s===t.type})};return D.default.reject(hs.profileSelector.getSortedSocialNetworks(),e)};y.streamHelper.getDefaultSnAvatar=function(i){var e="https://assets.hootsuite.com/v2/images/dashboard/avatars/member-default-100.8e9a4075.png?ssl=1",t="https://i.hootsuite.com/assets/channel-integrations/default_avatar_ig_personal_square.svg",s=i.avatar;return i&&i.type==="INSTAGRAMBUSINESS"?s=e:i&&i.type==="INSTAGRAM"&&(s=t),s};y.streamHelper.initSnDropdown=function(){var i=(0,h.default)("#boxAddStream"),e=i.find("._snSelector"),t=[];D.default.each(this.getSocialProfilesForStreams(),function(s){t.push({title:D.default.escape(s.username),id:s.socialNetworkId,img:s.avatar||y.streamHelper.getDefaultSnAvatar(s),type:s.type,text:Ho(s.type)})}),t.length?(e.show().closest("._socialNetworks").find("._noSn").hide(),e.hsDropdown({withLazyLoading:!0,data:{items:t,withSearch:!0},change:function(s){e.find("._selectedAvatar").attr("src",s.img).end().find("._selectedName").html(D.default.escape(s.title)).end().find("._selectedType").text(s.text).end(),i.find("._streamType").hide().filter("._"+s.type.toLowerCase()).show();var r=i.find("._"+s.type.toLowerCase()+" .btn-select");r.hide();var o=D.default.map(r,function(a,p){return new Promise(function(f){setTimeout(function(){(0,h.default)(a).show(),f()},p*50)})});Promise.all(o).then(function(){re.default.emit(ut.STREAM_BUTTONS_TRANSITION_COMPLETE)}),re.default.emit(ut.STREAM_SN_CHANGED,{type:s.type,snId:s.id})}}),e.hsDropdown("selectElement",hs.pinnedSns.length&&hs.pinnedSns[0]in hs.socialNetworks?hs.pinnedSns[0]:t[0].id),e.hsDropdown("onclose",function(){re.default.emit(ut.STREAM_SN_CLOSED)})):e.hide().closest("._socialNetworks").find("._noSn").show()};y.streamHelper.initAppsSection=function(){var i=(0,h.default)("#boxAddStream"),e=i.find("._apps ._noApps"),t=i.find("._apps ._hasApps");ajaxCall({url:"/ajax/stream/get-apps-streams",success:function(s){var r;if(s.streams.length){t.show();var o=t.find("._installedList").empty();r=Se.getEjs("stream/streamhelper/appstreamrow"),D.default.each(s.streams,function(p){o.append(r.render({...p,u_escape:D.default.escape}))})}else{e.show(),t.hide();var a=e.find("._appButtons").empty();r=Se.getEjs("stream/streamhelper/appinstallicon"),D.default.each(s.featured,function(p){p._paid="",p.isPaid?p._paid="_paidApp":p._paid="_freeApp",a.append(r.render({...p,u_escape:D.default.escape}))})}}},"qm")};y.streamHelper.init=function(i){i=i||{};var e=(0,h.default)("#boxAddStream"),t=e.find("._optionsOverlay"),s=(0,h.default)("#stream-button-popover");y.streamHelper.initSnDropdown(),setTimeout(function(){y.streamHelper.initShareTeamsDropdown()},1e3),e.delegate("._tab","click",function(){var r=(0,h.default)(this).data("tab");if(r&&e.find("._tabSection._"+r).length&&!e.find("._tabSection._"+r).is(":visible")){var o=e.find("._optionsOverlay");o.is(":visible")&&o.find("._close").click(),e.find("._tabSection").hide().filter("._"+r).show(),e.find("._tab").removeClass("active").each(function(a){var p=(0,h.default)(this);if(p.data("tab")==r)return p.addClass("active"),!1}),r==="apps"&&y.streamHelper.initAppsSection()}}).find("._socialNetworks ._noSn ._connectTwitter").click(function(){dt.add({selectedSocialNetwork:"TWITTER"})}).end().find("._socialNetworks ._noSn ._connectFacebook").click(function(){dt.add({selectedSocialNetwork:"FACEBOOK"})}).end().find("._socialNetworks ._noSn ._connectLinkedIn").click(function(){dt.add({selectedSocialNetwork:"LINKEDIN"})}).end().find("._socialNetworks ._noSn ._connectOthers").click(function(){dt.add()}).end().find("._streamTypes").delegate(".btn-select","click",function(){var r=(0,h.default)(this),o=r.attr("class").match(/_\w+/);if(!!o){o=o[0].replace(/_/,"").toUpperCase();var a=!1,p={type:o};switch(o){case"ADVANCED_SEARCH":case"SEARCH":case"LIST":case"I_B_TOP_TAG_SEARCH":case"I_B_TAG_SEARCH":case"Y_SEARCH":case"Y_PLAYLIST":y.streamHelper.toggleOptionsOverlay(o,!0),a=!0;break;default:break}a||y.streamHelper.addStream(p)}}).end().find("._viewAllApps").click(function(){window.loadAppDirectory()}).end().delegate("._shared ._sharedList ._sharedRow","click",function(){y.streamHelper.addStream((0,h.default)(this).data("teamstreamid"),!0)}).delegate("._apps ._installedList ._appStreamRow","click",function(){var r=(0,h.default)(this).data();y.streamHelper.addStream({appStreamId:r.appstreamid,memberAppId:r.memberappid,title:"Application",type:"APP_DEFAULT"})}).on("click","._apps ._noApps ._freeApp",function(){window.appdirectory.installApp((0,h.default)(this).data("appid"))}).on("click","._apps ._noApps ._paidApp",function(){window.loadAppDirectory("app-details","appId="+(0,h.default)(this).data("appid"))}).on("click","._addSn ",function(){var r=(0,h.default)(this).data("type")||(0,h.default)(this).attr("type");dt.add({selectedSocialNetwork:r})}).on("mouseenter",".btn-select",function(){if(we.isFeatureEnabled("PGR_694_STEAMS_BUTTONS_HOVER_STATE")&&(0,h.default)(this).data("popoverCopy")){pt.trackCustom((0,h.default)(this).data("trackingOrigin"),"streams_user_hovers_add_stream_button",{buttonClickEvent:(0,h.default)(this).data("trackingAction")}),s.html((0,h.default)(this).data("popoverCopy"));var r=(0,h.default)(this).offset().top-s.outerHeight()-4,o=Math.max(r,e.offset().top),a=(0,h.default)(this).offset().left,p=Math.min(a,e.offset().left+e.outerWidth()-s.outerWidth());s.offset({top:o,left:p}),s.addClass("visible")}}).on("mouseleave",".btn-select",function(){we.isFeatureEnabled("PGR_694_STEAMS_BUTTONS_HOVER_STATE")&&s.removeClass("visible")}),we.isFeatureEnabled("NGE_17040_REACT_ADD_STREAM")||e.find("._minimize").click(function(){y.streamHelper.toggle(!0)}).end(),e.on("mousedown","._shared ._sharedList ._sharedRow ._remove",function(r){(0,h.default)(this).parents("._controls").addClass("onRemove")}).on("mouseup mouseout mouseover","._shared ._sharedList ._sharedRow ._remove",function(r){(0,h.default)(this).parents("._controls").removeClass("onRemove")}).on("click","._shared ._sharedList ._sharedRow ._remove",function(r){r.stopPropagation();var o=E._("Are you sure you want to delete this Shared stream from this list? (This will not remove any existing streams from any dashboards)"),a=window.confirm(o);if(a){var p=(0,h.default)(this).closest("._sharedRow");y.saveBox.removeTeamSharedStream(p.data("teamstreamid"))}}),t.find("._close").bind("click",function(){y.streamHelper.toggleOptionsOverlay()}).end().find("._section").delegate("._terms","keyup",function(r){var o=(0,h.default)(this).closest("._section");r.which==13&&o.find("._add").click()}).end(),hs.memberIsInOrganization||e.find('._tab[data-tab="shared"]').hide(),hs&&hs.entryPoints&&hs.entryPoints.canAccessAppDirectory||e.find('._tab[data-tab="apps"]').hide(),i.hidden&&y.streamHelper.toggle(!0,!0)};y.streamHelper.addStream=function(i,e){var t=["newAddStream=1"],s=(0,h.default)("#streamTabInfo input[name='id']").val(),r=(0,h.default)("#boxAddStream ._snSelector").hsDropdown("selectedElement").type,o=i.snId;if(!o){var a=(0,h.default)("#boxAddStream ._snSelector").hsDropdown("selectedElement");if(!a&&i.type!=="APP_DEFAULT"&&!e)return;o=a.id}if(!s){hs.statusObj.update(E._("You can only add new Stream to a Tab with columns."),"warning",!0);return}let p=r?r.toLowerCase():null;var f={source:i.source?i.source:"ADD_A_STREAM_PANE",socialNetworkType:p,socialNetworkId:o,streamType:i.type};if(i.type==="APP_DEFAULT"&&(f.socialNetworkType="hsapps",f.appStreamId=i.appStreamId,f.memberAppId=i.memberAppId),pt.trackCustom("web.dashboard.streams","stream_user_clicked_add_stream",f),i.source&&(i=D.default.omit(i,"source")),e)y.saveBox.addTeamSharedBox(i,s);else{var C=h.default.extend({tabId:s,socialNetworkId:o},i);C.type==="APP_DEFAULT"&&(C.socialNetworkId=null),h.default.each(C,function(S,k){t.push(encodeURIComponent("box["+S+"]")+"="+encodeURIComponent(k))}),y.saveBox.saveBoxSubmit(t.join("&")),y.streamHelper.toggleOptionsOverlay()}};y.streamHelper.toggleOptionsOverlay=function(i,e){var t=(0,h.default)("#boxAddStream"),s=t.find("._optionsOverlay");if(!e){s.hide();return}switch(s.show().find('input[type="text"]').val(""),s.find("._section").hide(),s.find(".controls").show(),i){default:break}re.default.emit(ut.STREAM_OPTIONS_OVERLAY_TOGGLED,{boxType:i,bShow:e})};y.streamHelper.toggle=function(i,e){var t=(0,h.default)("#boxAddStream"),s=i||t.is(":visible"),r=function(){ajaxCall({url:"/ajax/stream/save-stream-helper-state",data:{on:!s}},"qm")};if(t.show(),s&&(i||!t.is(":visible"))){let b="#newAddStreamButton";var o=(0,h.default)("<div class='streamHelperTransition'></div>"),a=(0,h.default)(b),p=t.outerWidth(),f=t.outerHeight(),C=t.offset().left,S=t.offset().top,k=a.outerWidth(),I=a.outerHeight(),T=a.offset().left,P=a.offset().top;o.css({height:f,width:p,top:S,left:C}),o.appendTo("body"),t.hide(),o.animate({height:I,width:k,top:P,left:T,opacity:.3},e?0:400,function(){(0,h.default)(this).remove()})}window.resizeColumns(),(!s||t.is(":visible"))&&D.default.defer(function(){(0,h.default)("#streamsContainer")[0].scrollLeft=(0,h.default)("#streamsScroll").outerWidth()});let q=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window}),F=document.getElementById("addStreamPaneProfileSelector");F&&F.dispatchEvent(q),r()};window.stream=y;var MC=y;No();var Rp=U(ii()),Dp=U(je()),M={},A_="composer.open";M.MSG_SEARCH_ERROR_TERMS=E._("There were no results for your search, please check your search terms");M.convertTweetIdString=function(i){return i.id_str&&(i.id=i.id_str),i.in_reply_to_status_id_str&&(i.in_reply_to_status_id=i.in_reply_to_status_id_str),i.retweeted_status&&(i.retweeted_status.id=i.retweeted_status.id_str,i.retweeted_status.in_reply_to_status_id_str&&(i.retweeted_status.in_reply_to_status_id=i.retweeted_status.in_reply_to_status_id_str),i.retweeted_status.in_reply_to_user_id_str&&(i.retweeted_status.in_reply_to_user_id=i.retweeted_status.in_reply_to_user_id_str)),i};M.editListPopup=function(i){var e={width:400,closeOnEscape:!0,draggable:!0,position:["center",80],title:E.c.LOADING,content:"<div class='large-loading'><img src='"+hs.util.rootifyImage("/dashboard/loaders/round-radial-lines-loader.gif")+"' /></div>",close:function(){}};return $.dialogFactory.create("editListPopup",e),M.getEditList(i),!1};M.getEditList=function(i,e,t){var s=e?"&cursor="+e:"",r=t?"&userToAdd="+encodeURIComponent(t)+"&isAddingUsername=1":"";ajaxCall({type:"POST",url:"/ajax/twitter/edit-list",data:"boxId="+i+s+r,success:function(o){var a=$("#editListPopup");if(a.dialog("option","title","Edit "+o.title),o.success)a.html(o.output),we.isFeatureEnabled("NGE_17489_EDIT_LIST_POPUP")&&ss("editListPopup",{}),ae.default.defer(function(){a.find("._closeEditListPopup").bind("click",function(f){f.preventDefault(),a.dialog("close"),$("#box"+i).box("refresh","default")}),hs.throbberMgrObj.remove("#editListPopup ._newListUserBtn"),M.initEditListPopup(o),o.addUserSuccess!=null&&(o.addUserSuccess==1?hs.statusObj.update("Added '"+escape(t)+"' to "+o.title,"success",!0):hs.statusObj.update(E._("Error adding")+" "+escape(t)+" "+E._("to list, please check the user exists"),"error",!0))});else{var p=E._("There was a problem retrieving members of")+" "+o.title+E._(". Please try again");o.errorMsg&&(p=o.errorMsg),hs.statusObj.update(p,"error",!0),a.html("")}}},"q1")};M.initEditListPopup=function(i){var e=$("#editListPopup");e.find("._listName").val(i.title),e.find("._removeListMember").click(function(){var r=$(this).closest("._listMember"),o=$("._screenName",r).text();if(confirm(E._("Remove")+" "+o+" "+E._("from this list?"))){hs.statusObj.update(E._("Removing")+" "+o+" "+E._("from list..."),"info");var a=$("._id",r).val();return M.removeUserFromList(i.listId,i.listSocialNetworkId,a,function(){hs.statusObj.update(o+" "+E._("was removed from the list"),"success",!0),window.fadeSlideRemove(r)}),!1}}),i.nextCursor&&e.find("._listMembersNext").click(function(){e.find("._listEditLoading").show(),M.getEditList(i.boxId,i.nextCursor)}),i.previousCursor&&e.find("._listMembersPrevious").click(function(){e.find("._listEditLoading").show(),M.getEditList(i.boxId,i.previousCursor)});var t=e.find("._newListUser"),s=e.find("._newListUserBtn");t.unbind().bind("keypress",function(r){if(r.keyCode==13)return r.preventDefault(),!1}),s.click(function(r){r.preventDefault();var o=$.trim(t.val().replace("@",""));if(o.length===0)return hs.statusObj.update(E._("Please enter the name of a Twitter user to add to")+" "+i.title,"warning",!0),!1;hs.throbberMgrObj.add("#editListPopup ._newListUserBtn"),M.getEditList(i.boxId,null,o)}),t.bind("keyup",function(r){var o=window.event?window.event.keyCode:r.which;o==13&&(t.trigger("unautocomplete"),s.click())}),t.focus().click()};M.removeUserFromList=function(i,e,t,s){ajaxCall({type:"POST",url:"/ajax/twitter/delete-list-member?sid="+e+"&list="+i+"&uid="+t,success:function(r){hs.statusObj.reset(),r.error.code==null&&$.isFunction(s)?s():hs.statusObj.update(r.error.message,"error",!0)},error:function(){hs.statusObj.reset()},abort:function(){hs.statusObj.reset()}},"q1")};M.bindAddUserToListFunctions=function(i,e){e.dialog("option","title",E._("Add To list")).find("._submitAddUserToList").bind("click",function(r){r.preventDefault(),M.submitAddUserToList(i)}).end().find("._close").bind("click",function(r){r.preventDefault(),e.dialog("close")});var t=e.find("._lists select option");t.each(function(){$(this).text($(this).text().replace("/lists/","/"))});var s=t.map(function(r,o){return{text:$(o).text(),value:o.value}}).get();s.sort(function(r,o){return r.text>o.text?1:r.text<o.text?-1:0}),t.each(function(r,o){$(o).val(s[r].value).text(s[r].text)})};M.addUserToListPopup=function(i){let e={resizable:!1,draggable:!0,closeOnEscape:!0,width:400,position:["center",150],title:E.c.LOADING,content:"<div class='large-loading'><img src='"+hs.util.rootifyImage("/dashboard/loaders/round-radial-lines-loader.gif")+"' /></div>"},t=$.dialogFactory.create("addUserToListPopup",e);return ajaxCall({type:"POST",url:"/ajax/twitter/add-to-list?user="+i,success:function(s){t.html(s.output),hs.isFeatureEnabled("NGE_18356_ADD_TO_LIST_POPUP_MIGRATION")?ss("addToListPopup",{hasManageableLists:s.hasManageableLists,lists:s.lists}).then(()=>{M.bindAddUserToListFunctions(i,t)}):M.bindAddUserToListFunctions(i,t)}},"q1"),!1};M.submitAddUserToList=function(i){var e=$("#addUserToListPopup"),t=e.find("._lists select option:selected").val();return hs.throbberMgrObj.add("._submitAddUserToList"),ajaxCall({type:"POST",url:"/ajax/twitter/add-to-list?user="+i+"&boxId="+t,success:function(s){s.success=="1"?hs.statusObj.update(E._("User has been added to list."),"success",!0):s.error?hs.statusObj.update(s.error.message,"error",!0):hs.statusObj.update(E._("An error occurred, please try again later"),"error",!0),e.dialog("close")},complete:function(){hs.throbberMgrObj.remove("._submitAddUserToList")}},"q1"),!1};M.dropUserToList=function(i,e){return ajaxCall({type:"POST",url:"/ajax/twitter/add-to-list?user="+i+"&boxId="+e,success:function(t){t.success=="1"?(hs.statusObj.update(E._("User has been added to list."),"success",!0),$("#box"+e).length&&$("#box"+e).box("refresh","default")):t.error?hs.statusObj.update(t.error.message,"error",!0):hs.statusObj.update(E._("An error occurred, please try again later"),"error",!0)}},"qm"),!1};M.deleteListMember=function(i,e,t,s){return ajaxCall({type:"POST",url:"/ajax/twitter/delete-list-member?uid="+i+"&list="+e+"&sid="+t,success:function(r){r.error&&r.error.message?hs.statusObj.update(r.error.message,"error",!0):(hs.statusObj.update(E._("User has been removed from list."),"success",!0),$.isFunction(s)&&s())}},"qm"),!1};M.muteAccount=function(i,e){if(!confirm(E._("Are you sure to want to mute %1$s?").replace("%1$s",i)))return!1;ajaxCall({type:"POST",url:"/ajax/twitter/mute-account?username="+i+"&socialNetworkId="+e,success:function(t){typeof t.error.code>"u"||t.error.code==null||t.error.code==200?(hs.statusObj.update(E._("You will no longer see Tweets from @%1$s in your timeline").replace("%1$s",i),"success",!0),Je.clear()):hs.statusObj.update(t.error.message,"warning",!0)}},"single")};M.blockUser=function(i,e){if(!confirm(E._("Are you sure to want to block")+" "+i+"?"))return!1;ajaxCall({type:"POST",url:"/ajax/twitter/block-user?username="+i+"&socialNetworkId="+e,success:function(t){typeof t.error.code>"u"||t.error.code==null||t.error.code==200?(hs.statusObj.update(E._("You will no longer see Tweets from @%1$s in your timeline").replace("%1$s",i),"success",!0),Je.clear()):hs.statusObj.update(t.error.message,"warning",!0)}},"single")};M.reportSpam=function(i,e){var t=isNaN(i*1)?i:"this user";if(!confirm(E._("Are you sure to want to report %1$s as a spammer?").replace("%1$s",t)))return!1;ajaxCall({type:"POST",url:"/ajax/twitter/report-spam?userId="+i+"&socialNetworkId="+e,success:function(s){typeof s.error.code>"u"||s.error.code==null||s.error.code==200?(hs.statusObj.update(E._("User has been reported as a spammer"),"success",!0),Je.clear()):hs.statusObj.update(s.error.message,"warning",!0)}},"single")};window.toggleFollow=function(i,e,t,s,r,o){var a=E._("Which Twitter network should follow this user?"),p=E._("Which Twitter network should unfollow this user?"),f=i?a:p;return f+=" (@"+e+")",window.selectSocialNetworkPopup(function(C){var S="on="+i+"&sid="+C+"&screenName="+e+"&userId="+t,k;return i==1?k=E._("Following..."):k=E._("Unfollowing..."),ajaxCall({url:"/ajax/twitter/toggle-follow"+(r?"?impressionId="+r:""),data:S,beforeSend:function(){hs.statusObj.update(k,"info")},success:function(I){var T="success";return I.success!=1?T="error":(o&&o.isFeaturedUserClick&&hs.track("/featuredUser/follow/"+e),$.isFunction(s)&&s(C)),hs.statusObj.update(I.msg,T,!0),!1},error:function(I){hs.util.keepErrorMessageVisible(I)},abort:function(){hs.statusObj.reset()}},"q1"),r&&hs.trackEvent("PromoTweets",i?"follow":"unfollow",(o&&o.fullname?o.fullname+" | @":"@")+e),o&&o.isFeaturedUserClick&&hs.track("/featuredUser/click/"+e),!1},f,!0),!1};window.deleteDMTweet=function(i,e){if(!(!i||!e))return ajaxCall({url:"/ajax/twitter/delete-dm-tweet?id="+window.stream.box.parseMessageId(i)+"&sid="+e,beforeSend:function(){hs.statusObj.update(E._("Deleting..."),"info")},success:function(t){if(t.success==1){hs.statusObj.reset();var s=$("#"+i);s.addClass("tweet-delete"),s.find("._tweetInfo").empty();var r=null;if(s.prev().is("._assignment, ._response")){var o=s.prev().attr("id");r=function(){window.fadeSlideRemove("#"+o,500)}}window.fadeSlideRemove("#"+i,500,r)}else hs.statusObj.update(t.error,"error",!0)},error:function(){hs.statusObj.reset()},abort:function(){hs.statusObj.reset()}},"q1"),!1};M.showRetweetPopup=function(i,e,t,s,r,o,a){if(!!i){var p=function(){$("body").unbind("click.closeRetweetPopup"),hs.bubblePopup.close()},f=function(){e&&e>0?(M.doRetweet(t,e,s),p()):(p(),window.selectSocialNetworkPopup(function(k){M.doRetweet(t,k,s)},E._("Which Twitter network should retweet this tweet?")))},C=$(i),S=function(){var k=$('<div id="retweetPopup" class="_retweetPrompt"><p>'+M.generateAvatarImgForRetweetPopup(e)+" "+E._("Retweet to your followers?")+'</p><div class="-actions"><button class="_sendRetweet btn-lite-sta">'+E._("Yes")+"</button>"+(hs.isFeatureEnabled("SCHEDULE_NATIVE_RETWEET")&&hs.isFeatureDisabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")?'<button class="_schedNewStyle btn-lite-sta">'+E._("Schedule")+"</button>":"")+'<button class="_quote btn-lite-sta">'+E._("Quote")+"</button>"+(hs.isFeatureDisabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")?'<button class="_oldStyle btn-lite-sta">'+E._("Edit")+"</button>":"")+'<button class="_cancel icon-19 close">X</button></div></div>');k.find("a[href=#]").click(function(I){I.preventDefault()}),k.find("._sendRetweet").click(function(){f()}),k.find("._oldStyle").click(function(){r(),p()}),k.find("._schedNewStyle").click(function(){o(t),$("._messageContainer ._messageTools ._showScheduler").click(),p()}),k.find("._quote").click(function(){a(),p()}),k.find("._cancel").click(function(){p()}),k.find("._chooseProfile").click(function(){p(),window.selectSocialNetworkPopup(function(I){M.doRetweet(t,I,s)},E._("Which Twitter profile should retweet this tweet?"))}),hs.bubblePopup.setContent(k),hs.bubblePopup.isOpen()&&$("body").bind("click.closeRetweetPopup",function(I){var T=$(I.target);T.is("._dialog")||T.closest("._dialog").length||T.is("._bubblePopup")||T.closest("._bubblePopup").length||T.is("#bubblePopPane")||T.closest("#bubblePopPane").length||(p(),I.stopPropagation())})};$("#tooltip").hide(),hs.bubblePopup.close(),hs.bubblePopup.openVertical(C,null,null,S,{autoclose:!1,pos:"up"})}};M.showRetweetPopupApp=function(i,e){var t=ae.default.find(ae.default.values(hs.socialNetworksKeyedByType.TWITTER),function(f){return f.type=="TWITTER"&&f.username==e}),s=t?t.socialNetworkId:void 0,r,o=function(){var f=s;if(!f){var C=ae.default.keys(hs.socialNetworksKeyedByType.TWITTER);if(C.length>0)f=hs.socialNetworksKeyedByType.TWITTER[C[0]].socialNetworkId;else{hs.statusObj.update(E._("No valid Twitter profiles to retweet from"),"error",!0);return}}var S="socialNetworkId="+f+"&messageId="+i;ajaxCall({type:"POST",url:"/ajax/network/get-message",data:S,success:function(k){if(k.success=="1"){let P=k.viewData.message;var I="RT @"+P.author.name+": "+P.text.replace(/<&#91;^>&#93;*>/g,"")+hs.memberAutoInitial+" ",T={socialNetworkId:s,messageText:I};Up.default.emit(A_,T),pt.trackCustom("web.dashboard.popup_composer.open_new_composer","popup_composer_opened_new_composer",{source:"APP_STREAM"})}else hs.statusObj.update(k.error,"error",!0)},error:function(){hs.statusObj.update(E.c.ERROR_GENERIC,"error",!0)}},"qm")},a=function(){s&&s>0?(M.doRetweet(i,s),r.dialog("close")):(r.dialog("close"),window.selectSocialNetworkPopup(function(f){M.doRetweet(i,f)},E._("Which Twitter network should retweet this tweet?")))},p=$('<div id="retweetPopup" class="_retweetPrompt">'+M.generateAvatarImgForRetweetPopup(s)+E._("Retweet to your followers?")+'&nbsp;&nbsp;<button class="_sendRetweet btn-lite-sta">'+E._("Yes")+"</button>&nbsp;&nbsp;"+(hs.isFeatureDisabled("NGE_19820_LEGACY_COMPOSE_DEPRECATION")?'<button class="_oldStyle btn-lite-sta">'+E._("Edit")+"</button>":"")+"</div>");p.find("a[href=#]").click(function(f){f.preventDefault()}),p.find("._sendRetweet").click(function(){a()}),p.find("._oldStyle").click(function(){o(),r.dialog("close")}),p.find("._chooseProfile").click(function(){r.dialog("close"),window.selectSocialNetworkPopup(function(f){M.doRetweet(i,f)},E._("Which Twitter profile should retweet this tweet?"))}),r=$.dialogFactory.create("appRetweetPopup",{height:"auto",width:342,title:E._("Retweet"),modal:!1,draggable:!0,closeOnEscape:!0,content:p})};M.generateAvatarImgForRetweetPopup=function(i){var e="";if(i&&i>0){var t=hs.socialNetworks[i].avatar;e='<img class="networkAvatar" src="'+t+'" />',ae.default.size(hs.socialNetworksKeyedByType.TWITTER)>1&&(e='<a href="#" class="_chooseProfile _jsTooltip" title="Click to choose a different Twitter network to send retweet">'+e+"</a>")}return e};M.doRetweet=function(i,e,t){var s=ae.default.find(ae.default.values(hs.socialNetworks),function(f){return f.socialNetworkId==e}),r=function(){var f={messageId:i,socialNetworkId:e};t&&(f.impressionId=t),Rp.default.getActions(Dp.MESSAGE).sendRetweet(f,"qm").then(function(C){if(C.success)hs.statusObj.update(E._("Tweet retweeted"),"success",!0);else{if(C.controllerPermissionRequest||C.socialNetworkReauthRequired)return;var S=E._("This tweet can not be retweeted, the user may be protected");C.error&&(S=C.error),hs.statusObj.update(S,"error",!0)}})};s.isSecurePost?ln([s],r):r();var o="web.dashboard.streams",a="streams_message_retweet",p={actionType:"retweet",streamStyle:"old"};pt.trackCustom(o,a,p)};M.viewUserTweets=function(i,e){ajaxCall({type:"GET",url:"/ajax/twitter/user-tweets?username="+i,success:function(t){var s=$(e);if(!!t)if(!e)window.stream.search.displaySearchResultsContent(),window.stream.search.displayTwitterSearchResults(t);else{if(!s.length)return;s.empty().html(window.stream.search.buildSearchResults(t.result))}}},"qm")};M.viewUserMentions=function(i,e){ajaxCall({type:"GET",url:"/ajax/twitter/user-mentions?username="+i,success:function(t){var s=$(e);!t||!s.length||s.empty().html(window.stream.search.buildSearchResults(t.result.statuses))}},"qm")};M.viewUserFavorites=function(i,e){ajaxCall({type:"GET",url:"/ajax/twitter/user-favorites?username="+i,success:function(t){var s=$(e);if(!!t)if(!e)window.stream.search.displaySearchResultsContent(),window.stream.search.displayTwitterSearchResults(t.result);else{if(!s.length)return;s.empty().html(window.stream.search.buildSearchResults(t.result))}}},"qm")};M.viewFollowers=function(i,e,t){ajaxCall({type:"GET",url:"/ajax/twitter/get-followers?userId="+e,success:function(s){var r=$(t);if(s){if(s.error){hs.statusObj.update(E._("An error has occurred. Please try again later."),"error",!0);return}}else return;r.empty().html(window.stream.search.buildFollowersResults(s.result.users));var o=s.result.next_cursor_str;o&&parseInt(o)>0&&M.appendLoadMoreButton(i,e,t,o)},error:function(s){hs.statusObj.update(E._("An error has occurred. Please try again later."),"error",!0)}},"qm")};M.viewMoreFollowers=function(i,e,t,s){ajaxCall({type:"GET",url:"/ajax/twitter/get-followers?userId="+e+"&cursor="+s,success:function(r){var o=$(t);if(r){if(r.error){hs.statusObj.update(E._("An error has occurred. Please try again later."),"error",!0);return}}else return;o.find("._getMoreFollowersContainer").remove(),o.append(window.stream.search.buildFollowersResults(r.result.users));var a=r.result.next_cursor_str;a&&parseInt(a)>0&&M.appendLoadMoreButton(i,e,t,a)},error:function(r){hs.statusObj.update(E._("An error has occurred. Please try again later."),"error",!0)}},"qm")};M.appendLoadMoreButton=function(i,e,t,s){var r=$(t);r.append('<div class="_getMoreFollowersContainer" style="text-align:center;"><div class="_getMoreFollowers -getMoreFollowers btn-sta" cursor="'+s+'">'+E._("Load more")+"</div></div>"),$("._getMoreFollowers",r).click(function(){M.viewMoreFollowers(i,e,t,s)})};M.hasNotes=function(i,e){ajaxCall({url:"/ajax/organization/get-member-organizations",success:function(t){if(ae.default.size(t.organizations)>0){var s={targetTwitterId:i};ae.default.each(t.organizations,function(r){ajaxCall({url:"/ajax/twitter/retrieve-notes",data:ae.default.extend({organizationId:r.organizationId},s),success:function(o){o.numNotes>0&&e(!0)}},"qm")})}}},"qm")};M.viewNotes=function(i,e){var t=function(){e.show();var I=e.find("._body");I.empty();var T=Se.getEjs("stream/twitter/interactionhistory/notes/addNote").render();I.append(T),$("._saveNoteBtn").addClass("disabled"),$("#organizationDd").addClass("disabled")},s=function(I){ajaxCall({url:"/ajax/organization/get-member-organizations",success:function(T){if(ae.default.size(T.organizations)>0){var P=[];ae.default.each(T.organizations,function(q){P.push({title:q.name,optId:q.organizationId})}),I.removeClass("disabled"),I.hsDropdown({data:{items:P},change:function(q){r(q.optId)}}).hsDropdown("selectFirstElement")}else I.hsDropdown({data:{items:[{title:E._("No organizations were found")}]}}).hsDropdown("selectFirstElement")}},"qm")},r=function(I){var T={organizationId:I,targetTwitterId:i};ajaxCall({url:"/ajax/twitter/retrieve-notes",data:T,success:function(P){var q=$(".displayNotes");q.empty(),ae.default.size(P.notes)>0?(q.show(),ae.default.each(P.notes,function(F){let b=Se.getEjs("stream/twitter/interactionhistory/notes/displayNote").render({note:F,formatDate:A=>zo(Bo(A))});$(".displayNotes").append(b)}),$("._deleteNote").bind("click",function(){confirm(E._("Are you sure you want to permanently delete this note?"))&&p(hs.currentMessageDivId)})):q.hide()}},"qm")},o=function(){var I={organizationId:C.hsDropdown("selectedElement").optId,targetTwitterId:i,noteText:$("._writeNoteArea").val()};ajaxCall({url:"/ajax/twitter/store-notes",data:I,success:function(T){T.success?(hs.statusObj.update(T.msg,"success",!0),f(),r(I.organizationId)):(hs.statusObj.update(T.error,"error",!0),f())}},"qm")},a=function(){k.bind("input propertychange",function(){this.value.length?(S.removeClass("disabled"),S.bind("click",function(){hs.throbberMgrObj.add(S),o()})):f()})},p=function(I){var T={noteId:I};ajaxCall({url:"/ajax/twitter/delete-note",data:T,success:function(P){if(P.success){var q=C.hsDropdown("selectedElement").optId;r(q)}}},"qm")},f=function(){hs.throbberMgrObj.removeAll(),S.addClass("disabled"),S.unbind(),k.val("")};t();var C=$("#organizationDd"),S=$("._saveNoteBtn"),k=$("._writeNoteArea");s(C),a()};M.search=function(i,e){"rpp"in i||(i.rpp=20),"query"in i&&ajaxCall({url:"/ajax/twitter/tweet-search",data:i,success:function(t){t=t.result||{};var s={};if(t&&t.statuses){var r=t.statuses;$.each(r,function(o){t.statuses[o]=M.convertTweetIdString(r[o])}),s={results:t.statuses},$.each(t.search_metadata,function(o,a){if(o==="statuses")return!0;s[o]=a})}e(s)}},"q1")};window.stream=window.stream||{};window.stream.twitter=M;var kp=M;export{ri as a,Ir as b,gc as c,ss as d,tr as e,ln as f,gn as g,MC as h};
//# sourceMappingURL=chunk-3PMCMRGN.js.map
