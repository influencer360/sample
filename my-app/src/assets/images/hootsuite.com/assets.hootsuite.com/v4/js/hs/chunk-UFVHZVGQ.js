import{a as j}from"./chunk-FRUME2CC.js";import{b as C}from"./chunk-SHTS4IQB.js";import{b as F}from"./chunk-INSRYSWJ.js";import{a as M}from"./chunk-RBJWJTV5.js";import{a as _}from"./chunk-5M6X2SDJ.js";import{c as b}from"./chunk-62VJZGPO.js";var R=b((W,d)=>{"use strict";var T=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function J(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var E=function(){function r(t){J(this,r),this.name="AbortionError",this.message=t||"Promise was manually aborted",this.stack=new Error().stack}return T(r,null,[{key:"fromError",value:function(e){return e instanceof Error?new r(e.message):new r(String(e))}},{key:"isAbortionError",value:function(e){return!!(e instanceof r||e&&e.name==="AbortionError")}}]),r}();E.prototype=Object.create(Error.prototype);d.exports=E});var w=b((Y,P)=>{"use strict";var I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},x=function(){function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();function G(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var A=_()._,H=R(),h={abortFunctionRequired:"Expected abortFn to be a function. You must provide a way to abort an AbortablePromise",allRequiresArray:"Illegal input to AbortablePromise.all - expected an array",allRequiresAbortablePromises:"Illegal input to AbortablePromise.all - expected an array of AbortablePromises"},g=function(){function r(t,e){var i=this;if(G(this,r),!e||!A.isFunction(e))throw new TypeError(h.abortFunctionRequired);var n=!1,u=function(c){return function(s){n||(n=!0,c(s))}};return this.es6Promise=new Promise(function(l,c){var s=u(l),o=u(function(f){if(f instanceof Error)c(f);else{var O=(typeof f>"u"?"undefined":I(f))==="object"?JSON.stringify(f):String(f),y=new Error(O);y.errorCause=f,c(y)}});i._abortAndReject=u(function(f){e(),c(H.fromError(f))}),i._abortAndResolve=u(function(f){e(),l(f)}),t(s,o)}),this.then=this.then.bind(this),this.catch=this.catch.bind(this),this.abortAndReject=this.abortAndReject.bind(this),this.abortAndResolve=this.abortAndResolve.bind(this),this}return x(r,[{key:"then",value:function(e,i){return this.es6Promise=this.es6Promise.then(e,i),this}},{key:"catch",value:function(e){return this.es6Promise=this.es6Promise.catch(e),this}},{key:"abortAndReject",value:function(e){if(A.isFunction(this._abortAndReject))this._abortAndReject(e);else throw new Error("Tried to abort a promise that was not started. abortAndReject should only be called on an instance of AbortablePromise")}},{key:"abortAndResolve",value:function(e){if(A.isFunction(this._abortAndResolve))this._abortAndResolve(e);else throw new Error("Tried to abort a promise that was not started. abortAndResolve should only be called on an instance of AbortablePromise")}},{key:"getPromise",value:function(){return this.es6Promise}}],[{key:"all",value:function(e){if(!Array.isArray(e))throw new TypeError(h.allRequiresArray);if(e.some(function(n){return!r.isPromiseAbortable(n)}))throw new TypeError(h.allRequiresAbortablePromises);var i=function(){return e.map(function(u){return u.abortAndReject("Aborted within an aborted AbortablePromise.all")})};return new r(function(n,u){Promise.all(e.map(function(l){return l.getPromise()})).then(n).catch(u)},i)}},{key:"resolve",value:function(e){return new r(function(i){return i(e)},function(){return""})}},{key:"reject",value:function(e){return new r(function(i,n){return n(e)},function(){return""})}},{key:"isPromiseAbortable",value:function(e){return!!(e instanceof r||e&&e.then&&e.abortAndReject&&e.abortAndResolve&&e.es6Promise)}}]),r}();g.ERROR_MESSAGE=h;P.exports=g});var S=b((z,k)=>{"use strict";var a=M();k.exports={LOADING:a._("Loading..."),SAVING:a._("Saving..."),ERROR_GENERIC:a._("An error occurred, please try again"),MONTH_NAMES_SHORT:[a._("Jan"),a._("Feb"),a._("Mar"),a._("Apr"),a._("May"),a._("Jun"),a._("Jul"),a._("Aug"),a._("Sep"),a._("Oct"),a._("Nov"),a._("Dec")],MONTH_NAMES:[a._("January"),a._("February"),a._("March"),a._("April"),a._("May"),a._("June"),a._("July"),a._("August"),a._("September"),a._("October"),a._("November"),a._("December")]}});var U=b((B,p)=>{"use strict";var m=_()._,q=C().ajaxCall,v=j(),N=F(),D=w(),L=S(),V=function(r,t,e){return new Promise(function(i,n){var u=function(l,c,s){s instanceof Error?n(s):n(Error(s))};q(r,t).then(function(l,c,s){var o=m.isFunction(r.detectError)?r.detectError(l):l.error;l.success===0||l.success==="0"||o?(o instanceof Error?u(s,c||o.code,o,l):(m.isString(o)?o=v({},e,{message:o}):o=v({},e,o),u(s,c||o.code,o.message,l)),o.message&&N.emit("status:error",{message:o.message,autoHide:!0})):i(l)},u)})};p.exports=function(r,t,e,i){var n={message:L.ERROR_GENERIC};if(t||(t="qm"),r.doNotUseAbortablePromise)return V(r,t,n);var u=q(r,t);return new D(function(l,c){u.then(function(s){var o=m.isFunction(r.detectError)?r.detectError(s):s.error;s.success===0||s.success==="0"||o?(o instanceof Error?c(o):(m.isString(o)?o=v({},n,{message:o}):o=v({},n,o),c(e?o:o.message)),i||o.message&&N.emit("status:error",{message:o.message,autoHide:!0})):l(s)},function(s){c(s)})},u.abort?u.abort.bind(u):function(){})}});export{R as a,S as b,U as c};
//# sourceMappingURL=chunk-UFVHZVGQ.js.map
