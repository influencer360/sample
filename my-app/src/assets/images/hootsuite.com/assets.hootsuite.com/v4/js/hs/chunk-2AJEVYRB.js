import{a as E,b as f}from"./chunk-WBPTDCVX.js";f();var e={};e.isSupported=E.supported();e.LOCAL_CACHE_NAMESPACE="localCache";e.KEY_EXPIRE="e";e.KEY_ACCESSED_DATE="lad";e.DAYS_TO_KEEP=1;e.v="v10";e.gcLock=!1;e.setItem=function(r,n,t){if(!e.isSupported||n===null||!r||e.gcLock===!0)return!1;r=e.v+"_"+r;var a=e.DAYS_TO_KEEP*(24*60*60);t=parseInt(t,10),t?t>a?t=a:t<=0&&(t=1):t=a;var l=e.getCurrentTime(),u={};u[e.KEY_EXPIRE]=l+t,u[e.KEY_ACCESSED_DATE]=l,u.data=n;try{var o=JSON.stringify(u);E.setItem(e.LOCAL_CACHE_NAMESPACE,r,o)}catch(C){return e.clear(),e.reportCacheFull(),(!C.name||!(C.name=="QUOTA_EXCEEDED_ERR"&&C.name=="NS_ERROR_DOM_QUOTA_REACHED"))&&(e.isSupported=!1),!1}return!0};e.getItem=function(r){if(!e.isSupported||!r)return null;r=e.v+"_"+r;var n=E.getItem(e.LOCAL_CACHE_NAMESPACE,r);if(n!=null)n=JSON.parse(n);else return null;if(e.isItemExpired(n))return E.removeItem(e.LOCAL_CACHE_NAMESPACE,r),null;n[e.KEY_ACCESSED_DATE]=e.getCurrentTime();var t=JSON.stringify(n);return E.setItem(e.LOCAL_CACHE_NAMESPACE,r,t),n.data};e.removeItem=function(r){return!e.isSupported||e.gcLock===!0?!1:(r=e.v+"_"+r,E.removeItem(e.LOCAL_CACHE_NAMESPACE,r),!0)};e.clear=function(){if(!e.isSupported||e.gcLock===!0)return!1;E.clear(e.LOCAL_CACHE_NAMESPACE)};e.isItemExpired=function(r){if(!Object.prototype.hasOwnProperty.call(r,e.KEY_EXPIRE))return!0;var n=e.getCurrentTime();return parseInt(r[e.KEY_EXPIRE],10)<n};e.removeByKeys=function(r){if(e.gcLock===!0)return!1;!$.isArray(r)||$.each(r,function(n,t){E.removeItem(e.LOCAL_CACHE_NAMESPACE,t)})};e.gc=function(){if(!!e.isSupported){e.gcLock=!0;var r=E.getKeys(e.LOCAL_CACHE_NAMESPACE),n=r.length,t=[],a=!1;try{for(var l=0;l<n;l++){var u=r[l];if(e.v!=u.substring(0,u.indexOf("_"))){t.push(u);continue}var o=r.getItem(e.LOCAL_CACHE_NAMESPACE,u);if(o!==null)o=JSON.parse(o);else continue;e.isItemExpired(o)&&t.push(u)}}catch{a=!0}e.gcLock=!1,a?e.clear():e.removeByKeys(t)}};e.reportCacheFull=function(){ajaxCall({type:"POST",url:"/ajax/index/html-cache-full",success:function(){},abort:function(){},error:function(){}},"qm")};e.getCurrentTime=function(){return Math.round(new Date().getTime()/1e3)};var c=e;export{c as a};
//# sourceMappingURL=chunk-2AJEVYRB.js.map
