import{a as vt}from"./chunk-BLZ2UTLS.js";import{c as u}from"./chunk-62VJZGPO.js";var F=u(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var k=typeof window>"u"?{}:window,V=function(){return k.__doNotUse=k.__doNotUse||{},k.__doNotUse};h.getSingleton=function(r){var t=V();return t[r]};h.registerSingleton=function(r,t){var e=V();return e[r]=t,h.getSingleton(r)}});var S=u(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.sendData=function(r,t){var e;try{var n=new Blob([t],{type:"application/x-www-form-urlencoded"});!((e=window?.hs)===null||e===void 0)&&e.isFeatureEnabled("FPLAT_698_NO_SEND_BEACON")?fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}):navigator.sendBeacon(r,n)}catch{}};l.mark=function(r){try{performance.mark(r)}catch{}};l.INVALID_RESULT=-1;l.getSecondsSinceMark=function(r){var t=r+"_MEASURE";try{performance.measure(t,r);var e=performance.getEntriesByName(t);return e.length?gt(e[0].duration):l.INVALID_RESULT}catch{return l.INVALID_RESULT}finally{ht(t)}};var ht=function(r){try{performance.clearMeasures(r)}catch{}},gt=function(r){return r/1e3}});var z=u(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});var Y=S(),_t=function(){function r(t,e){this.startMarks=new Set,this.name=t,this.histogram=e}return r.prototype.getStartMarkId=function(t){return t?this.name+"_"+t+"_START":this.name+"_START"},r.prototype.start=function(t){t===void 0&&(t={});var e=this.getStartMarkId(t.id);this.startMarks.has(e)||(Y.mark(e),this.startMarks.add(e))},r.prototype.end=function(t){t===void 0&&(t={});var e=this.getStartMarkId(t.id);if(!!this.startMarks.has(e)){this.startMarks.delete(e);var n=Y.getSecondsSinceMark(e);n<0||this.histogram.observe(n,t.labels)}},r}();j.HistogramTimer=_t});var C=u(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});function K(r){if(!r.labels||!Object.keys(r.labels).length)return"";var t=Object.entries(r.labels).map(function(e){var n=e[0],i=e[1];return n+'="'+i+'"'});return""+t.join(",")}function pt(r,t,e){e===void 0&&(e="le");var n="",i=K(t);return i.length>0?(n+=r+"_count{"+i+"} "+t.value.count+`
`,n+=r+"_sum{"+i+"} "+t.value.sum+`
`):(n+=r+"_count "+t.value.count+`
`,n+=r+"_sum "+t.value.sum+`
`),Object.entries(t.value.entries).forEach(function(o){var a=o[0],f=o[1];i.length>0?n+=r+"_bucket{"+e+'="'+a+'",'+i+"} "+f+`
`:n+=r+"_bucket{"+e+'="'+a+'"} '+f+`
`}),n}g.formatHistogramOrSummary=pt;function yt(r,t){return t===void 0&&(t=[]),r?t.find(function(e){return wt(e.labels,r)}):t[0]}g.findExistingMetric=yt;function mt(r,t){var e=" "+t.value.toString();if(t.labels==null||Object.keys(t.labels).length===0)return""+r+e+`
`;var n=K(t);return r+"{"+n+"}"+e+`
`}g.formatCounterOrGauge=mt;function wt(r,t){return!r||!t?!1:J(r).toString()===J(t).toString()}function J(r){return Object.keys(r).sort().map(function(t){return[t,r[t]]})}});var x=u(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});var Q=C(),bt=function(){function r(){this.data=[]}return r.prototype.get=function(t){return Q.findExistingMetric(t,this.data)},r.prototype.set=function(t,e){var n=Q.findExistingMetric(e,this.data);return n?n.value=t:this.data.push({labels:e,value:t}),this},r.prototype.collect=function(t){return this.data.filter(function(e){return Ot(e.labels,t)})},r.prototype.resetAll=function(){var t=this;return this.data.forEach(function(e){t.reset(e.labels)}),this},r}();N.Collector=bt;var Ot=function(r,t){return t?r?Object.keys(t).every(function(e){return t[e]===r[e]}):!1:!0}});var G=u(_=>{"use strict";var Mt=_&&_.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_,"__esModule",{value:!0});var Et=x(),Pt=function(r){Mt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.inc=function(e){return this.add(1,e),this},t.prototype.add=function(e,n){if(e<0)throw new Error("Expected increment amount to be greater than -1. Received: "+e);var i=this.get(n);return this.set(i?i.value+e:e,n),this},t.prototype.reset=function(e){this.set(0,e)},t}(Et.Collector);_.Counter=Pt});var W=u(p=>{"use strict";var kt=p&&p.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(p,"__esModule",{value:!0});var St=G(),jt=function(r){kt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.dec=function(e){var n=this.get(e);return this.set(n?n.value-1:0,e),this},t.prototype.sub=function(e,n){var i=this.get(n);return this.set(i?i.value-e:0,n),this},t}(St.Counter);p.Gauge=jt});var X=u(y=>{"use strict";var Ct=y&&y.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(y,"__esModule",{value:!0});var Nt=x();function xt(r,t){if(t<r[r.length-1]){for(var e=0;e<r.length;e+=1)if(t<=r[e])return e}}function I(r){var t=r.reduce(function(e,n){return e[n.toString()]=0,e},{"+Inf":0});return{entries:t,sum:0,count:0,raw:[]}}var Gt=function(r){Ct(t,r);function t(e){e===void 0&&(e=[]);var n=r.call(this)||this;return n.buckets=e.sort(function(i,o){return i>o?1:-1}),n.set(I(n.buckets)),n.observe=n.observe.bind(n),n}return t.prototype.observe=function(e,n){var i=this.get(n);i==null&&(i=this.set(I(this.buckets),n).get(n)),i.value.raw.push(e),i.value.entries["+Inf"]+=1;var o=xt(this.buckets,e);if(o!=null)for(var a=o;a<this.buckets.length;a+=1){var f=i.value.entries[this.buckets[a].toString()];i.value.entries[this.buckets[a].toString()]=f+1}return i.value.sum=i.value.raw.reduce(function(P,v){return P+v}),i.value.count+=1,this},t.prototype.reset=function(e){this.set(I(this.buckets),e)},t}(Nt.Collector);y.Histogram=Gt});var $=u(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var It=G(),Tt=W(),At=X(),Z=C(),Dt=function(){function r(){this.data={counter:{},gauge:{},histogram:{}}}return r.prototype.validateInput=function(t,e,n,i){var o,a;if(String(e)==="")throw new Error("Metric name cannot be empty");if(["counter","gauge","histogram"].indexOf(t)===-1)throw new Error("Unknown metric type "+t);if(typeof n!="string"&&n!=null)throw new Error("help must be string or undefined/null");if(!((a=(o=this.data)===null||o===void 0?void 0:o[t])===null||a===void 0)&&a[e])throw new Error("A metric with the name '"+e+"' already exists for type '"+t+"'");if(!Array.isArray(i)&&i!=null)throw new Error("buckets must be array or undefined/null")},r.prototype.create=function(t,e,n,i){n===void 0&&(n=""),i===void 0&&(i=[]),this.validateInput(t,e,n,i);var o;return t==="counter"?(o=new It.Counter,this.data.counter[e]={help:n,instance:o,type:t}):t==="gauge"?(o=new Tt.Gauge,this.data.gauge[e]={help:n,instance:o,type:t}):(o=new At.Histogram(i),this.data.histogram[e]={help:n,instance:o,type:t}),o},r.prototype.metrics=function(){return Object.entries(this.data).reduce(function(t,e){var n=e[0],i=e[1];return t+Object.keys(i).reduce(function(o,a){var f=i[a],P=f.instance.collect(),v=o;f.help.length>0&&(v+="# HELP "+a+" "+f.help+`
`),v+="# TYPE "+a+" "+n+`
`;var lt=P.map(function(M){return n==="histogram"?Z.formatHistogramOrSummary(a,M):Z.formatCounterOrGauge(a,M)});return v+=lt.reduce(function(M,dt){return M+dt},""),v},"")},"")},r.prototype.reset=function(){return Object.values(this.data).forEach(function(t){Object.values(t).forEach(function(e){var n=e.instance;n.resetAll()})}),this},r.prototype.clear=function(){return this.data={counter:{},gauge:{},histogram:{}},this},r.prototype.get=function(t,e){var n=t!=null?[this.data[t]]:Object.values(this.data),i=n.find(function(o){return Boolean(o[e])});return i?.[e].instance},r}();T.Registry=Dt});var tt=u(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var Ht=$();A.default=function(){return new Ht.Registry}});var et=u(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var Rt=function(){function r(t,e){e===void 0&&(e=function(){}),this.histogram=t,this.updateCb=e}return r.prototype.observe=function(t,e){this.histogram.observe(t,e),this.updateCb()},r}();D.ObservableHistogram=Rt});var rt=u(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});var qt=function(){function r(t,e){e===void 0&&(e=function(){}),this.counter=t,this.updateCb=e}return r.prototype.inc=function(t){this.counter.inc(t),this.updateCb()},r.prototype.add=function(t,e){this.counter.add(t,e),this.updateCb()},r}();H.ObservableCounter=qt});var nt=u(m=>{"use strict";var Bt=m&&m.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(m,"__esModule",{value:!0});var Ut=Bt(tt()),Lt=et(),Vt=rt(),Ft=function(){function r(t){t===void 0&&(t=function(){}),this.registry=Ut.default(),this.updateCb=t}return r.prototype.createHistogram=function(t,e,n){return zt(t,e,n),new Lt.ObservableHistogram(this.registry.create("histogram",t,e,n),this.updateCb)},r.prototype.createCounter=function(t,e){return Yt(t,e),new Vt.ObservableCounter(this.registry.create("counter",t,e),this.updateCb)},r.prototype.popMetrics=function(){var t=this.registry.metrics();return this.registry.reset(),t},r}();m.PrometheusRegistry=Ft;function Yt(r,t){E("Metric name",r),E("Metric help",t)}function zt(r,t,e){E("Metric name",r),E("Metric help",t),Jt("Histogram buckets",e)}function E(r,t){if(!t)throw new Error(r+" cannot be empty")}function Jt(r,t){if(!Array.isArray(t))throw new Error(r+" must be an array")}});var it=u(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var Kt=vt();R.debounce=Kt.debounce});var ot=u(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.PRODUCTION="production";s.STAGING="staging";s.DEV="dev";s.env=function(){var r=Wt(),t=String(Qt().env||r.TARGET||r.NODE_ENV).toLowerCase();return t.includes("dev")?s.DEV:t.includes("stag")?s.STAGING:s.PRODUCTION};var Qt=function(){return typeof hs<"u"?hs:{}},Wt=function(){return typeof process<"u"&&process.env?process.env:{}}});var U=u(c=>{"use strict";var at=c&&c.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),w,b,q;Object.defineProperty(c,"__esModule",{value:!0});var Xt=it(),d=ot(),Zt=S(),$t="https://agg-pushgw-external.dev.hootdev.com",te="https://agg-pushgw-external.staging.hootops.com",ee="https://agg-pushgw-external.prod.hootops.com",re="https://development-platform.hootsuite.com",ne="https://staging-platform.hootsuite.com",ie="https://platform.hootsuite.com",ut=!((q=window?.hs)===null||q===void 0)&&q.isFeatureEnabled("FPLAT_579_USE_PUBLIC_URL")?(w={},w[d.PRODUCTION]=ie,w[d.STAGING]=ne,w[d.DEV]=re,w):(b={},b[d.PRODUCTION]=ee,b[d.STAGING]=te,b[d.DEV]=$t,b),oe=ut[d.env()]||ut[d.DEV];c.DEBOUNCE_DELAY=500;var B=function(){function r(){}return r.prototype.setRegistry=function(t){this.registry=t},r}();c.MetricBackend=B;var ue=function(r){at(t,r);function t(){var e=r.call(this)||this;return e.send=Xt.debounce(e.send,c.DEBOUNCE_DELAY),e}return t.prototype.send=function(){Zt.sendData(oe+"/metrics/frontend",this.registry.popMetrics())},t}(B);c.ExternalGatewayBackend=ue;var ae=function(r){at(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.send=function(){console.debug(this.registry.popMetrics())},t}(B);c.DebugBackend=ae});var st=u(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var se=z(),ce=nt(),fe=U(),le=function(){function r(t,e){var n=this;this.timers={},this.histograms={},this.counters={},this.namespace=t,this.backend=e?.backend||new fe.ExternalGatewayBackend,this.registry=e?.registry||new ce.PrometheusRegistry(function(){return n.sendToBackend()}),this.backend.setRegistry(this.registry)}return r.prototype.getHistogramTimer=function(t,e,n){var i=this.getFullMetricName(t);return this.timers[i]||(this.timers[i]=new se.HistogramTimer(i,this.registry.createHistogram(i,e,n))),this.timers[i]},r.prototype.getHistogram=function(t,e,n){var i=this.getFullMetricName(t);return this.histograms[i]||(this.histograms[i]=this.registry.createHistogram(i,e,n)),this.histograms[i]},r.prototype.getCounter=function(t,e){var n=this.getFullMetricName(t);return this.counters[n]||(this.counters[n]=this.registry.createCounter(n,e)),this.counters[n]},r.prototype.sendToBackend=function(){this.backend.send()},r.prototype.getFullMetricName=function(t){return("fe_"+this.namespace+"_"+t).toLowerCase()},r}();L.PerformanceMetrics=le});var ve=u(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});var ct=F(),de=st(),ft=U();O.ExternalGatewayBackend=ft.ExternalGatewayBackend;O.DebugBackend=ft.DebugBackend;O.getPerformanceMetrics=function(r,t){var e="performanceMetrics_"+r.toUpperCase();return ct.getSingleton(e)||ct.registerSingleton(e,new de.PerformanceMetrics(r,t))}});export{ve as a};
//# sourceMappingURL=chunk-PGYGNGFN.js.map
