import{a as I}from"./chunk-JRESDEDW.js";import{b as O}from"./chunk-INSRYSWJ.js";import{a as Z}from"./chunk-GJN5ONR7.js";import{a as S,b as W}from"./chunk-5M6X2SDJ.js";import{b as Y,c as j,f as K}from"./chunk-62VJZGPO.js";var U=j((le,w)=>{"use strict";var s=I(),D={},g=function(e,r){return D[e]||(D[e]=new k(e,r)),D[e]};g.defaults={abort:s.noop,maxRequests:1,async:!0,abortOld:!1,preventDoubleRequests:!0,queue:!1};g.setDefaults=function(e){s.extend(g.defaults,e)};var ee=function(e,r,t,a,l,i){if(s.isFunction(r))r.call(e,t,a,l);else if(a!=="abort")throw a+" ( url: "+i.url+", error thrown: "+l+")"},C=function(e){var r=this;r.opts.queue&&s.dequeue(document,r.queueName),r.inProgress--,r.requests[e]=null,delete r.requests[e]},P=function(e,r,t){var a=this;if(!e&&!r)return!1;var l=!e||e.readyState===0||a.lastAbort===t.xhrID;return l},_=function(e,r){var t=this,a=e.xhrID,l=function(){var i=s.ajax(e);return t.inProgress++,e.async&&(t.requests[a]=i,r!=null&&i.done(r.resolve).fail(r.reject)),i};return l.xhrID=e.xhrID,l},re=function(e,r,t,a,l,i){var n=this;P.call(n,l,a,i)||(i.abortOld&&s.each(this.requests,function(c){if(c===i.xhrID)return!1;n.abort(c)}),r.call(e,t,a,l))},F=function(e,r,t,a,l,i){var n=this;P.call(n,t,a,i)&&(a="abort",i.abort.call(e,t,a,i)),r.call(e,t,a),C.call(n,l)},k=function(e,r){return this.requests={},this.inProgress=0,this.queueName=e,this.opts=s.extend({},g.defaults,r),this};k.prototype={destroy:function(){this.clear(!0),D[this.queueName]=null},add:function(e){e=s.extend({},this.opts,e);var r=this,t;t=typeof e.data=="string"||typeof FormData<"u"&&e.data instanceof FormData?e.data:s.param(e.data||{});var a=e.xhrID=e.type+e.url+t,l,i,n,c=e.beforeSend||s.noop;if(e.beforeSend=function(m,q){var d=c.call(this,m,q);return d===!1&&C.call(r,a),d},this.requests[a]&&e.preventDoubleRequests)return new s.Deferred().promise();var f=e.complete||s.noop;delete e.complete;var o=e.success||s.noop;delete e.success;var E=e.error;return delete e.error,e.queue==="clear"&&s(document).clearQueue(this.queueName),e.queue?(i=new s.Deferred,l=_.call(this,e,i),s.queue(document,this.queueName,l),this.inProgress<e.maxRequests&&s.dequeue(document,this.queueName),n=i.promise(),n.abort=function(){r.abort(a)}):(l=_.call(this,e),n=l()),n.done(function(m,q,d){var h=this;re.call(r,h,o,m,q,d,e),F.call(r,h,f,d,q,a,e)}).fail(function(m,q,d){var h=this;ee.call(r,h,E,m,q,d,e),F.call(r,h,f,m,q,a,e)}),n},getData:function(){return{requests:this.requests,queue:this.opts.queue?s(document).queue(this.queueName):[],inProgress:this.inProgress}},getXHRFor:function(e){if(!e)return!1;var r=this.requests[e];return!r&&this.opts.queue&&(r=s.grep(s(document).queue(this.queueName),function(t){return t.xhrID===e})[0]),r},abort:function(e){var r,t=this;e?(r=this.getXHRFor(e),r&&r.abort?(this.lastAbort=e,r.abort(),this.lastAbort=!1):s(document).queue(this.queueName,s.grep(s(document).queue(this.queueName),function(a){return a!==r}))):s.each(this.requests,function(a){t.abort(a)})},clear:function(){s(document).clearQueue(this.queueName),this.abort()}};w.exports=g});var Q=j((ie,X)=>{"use strict";var R=S()._,H=/(https?:\/\/([\w\d_\-=\/|+#~%]|[\.,:?!](?!\s|$|[\.,:?!]+)|(&amp;|&(?!amp;))(?!\s|$))+)/ig,M={appendParam:function(e,r,t){if(R.isString(e)){var a=/^(https?:\/\/|\/)/.test(e)&&e.indexOf("?")<0?"?":"&";return e+a+r+"="+encodeURIComponent(t)}else if(R.isObject(e)&&!R.isArray(e)){var l=R.extend({},e);return l[r]=t,l}else if(R.isUndefined(e))return r+"="+encodeURIComponent(t)},isValidUrl:function(e){var r=e.match(H)||[];return e.length<=2e3&&r.length===1&&r[0]===e}};M.URL_REGEX=H;X.exports=M});var z=j((ce,p)=>{"use strict";var ae=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],te=function(r){return Math.floor(Math.random()*r%r)};p.exports={nbitHexString:function(r){if(typeof r!="number"||r<0)return"";for(var t="";r>0;){var a=r>3?4:r;t+=ae[te(1<<a)],r-=a}return t}}});var V=j((fe,L)=>{"use strict";var T=I(),x=S()._,v=O(),u=U(),G=Q(),B=W(),ue=Z(),$=z(),b=1e3;u("abortOld",{abortOld:!0,maxRequests:1});u("q1",{queue:!0,maxRequests:1});u("q1NoAbort",{queue:!0,maxRequests:1});u("qm",{queue:!0,maxRequests:b});u("qmNoAbort",{queue:!0,maxRequests:b});u("single",{queue:!1,abortOld:!0,maxRequests:1});u("streamTab",{queue:!1,maxRequests:1});u("qstream",{queue:!0,maxRequests:b});u("organizationTab",{queue:!1,maxRequests:1});u("qstreamPostRefresh",{queue:!0,maxRequests:b});u("autosave",{queue:!1,maxRequests:1});u("unifiedMentions",{queue:!0,maxRequests:2});u("mediaStreamingService",{queue:!0,preventDoubleRequests:!1,maxRequests:1});u("appdirectoryQm",{queue:!0,preventDoubleRequests:!1,maxRequests:b});u("qmNoPreventDouble",{queue:!0,preventDoubleRequests:!1,maxRequests:b});var J,y,se=function(e,r){switch(r){case"q1":case"q1NoAbort":case"qm":case"qstream":case"qmNoAbort":case"qstreamPostRefresh":case"unifiedMentions":case"mediaStreamingService":case"appdirectoryQm":case"qmNoPreventDouble":break;case"abortOld":u("q1").clear(),u("qm").clear(),u("qmNoPreventDouble").clear(),u("single").clear(),u("streamTab").clear(),u("qstream").clear();break;case"single":u("single").clear();break;case"streamTab":u("single").clear(),u("streamTab").clear(),u("qstreamPostRefresh").clear();break;case"organizationTab":u("organizationTab").clear();break;case"autosave":u("autosave").clear();break;default:return v.emit("ajax:invalidManager"),!1}if(e.urlRoot?e.url=e.urlRoot+e.url:e.url=J+e.url,e.type!=="GET"){if(x.isObject(e.json)){if(x.isArray(e.json))throw new Error("The JSON payload cannot be an array, it must be a key-value object");if(e.json&&!x.isUndefined(e.data))throw new Error("You cannot define both a data and json attribute for an ajaxCall");e.contentType="application/json",e.data=JSON.stringify(e.json)}e.type==="DELETE"||x.isObject(e.json)||typeof FormData<"u"&&e.data instanceof FormData?e.url=G.appendParam(e.url,"csrfToken",y):e.data=G.appendParam(e.data,"csrfToken",y)}"abort"in e||(e.abort=T.noop);var t="success"in e?e.success:T.noop,a="error"in e?e.error:T.noop,l=function(n,c,f){if(v.emit("ajax:response",n,c,f,e),x.isObject(n))v.emit("ajax:response:success",n,c,f,e),t(n,c,f);else{var o="Expected object but got something else";v.emit("ajax:response:error",{exception:n},c,f,e,o),a(f,c,o)}return this},i=function(n,c,f){var o;try{o=JSON.parse(n.responseText)}catch{o={exception:n.responseText}}v.emit("ajax:response",o,c,n,e),v.emit("ajax:response:error",o,c,n,e,f),a(n,c,f,o)};return e.success=l,e.error=i,e.jwt&&(e.jwt===!0?e.xhrFields={withCredentials:!0}:(e.headers||(e.headers={}),e.headers.Authorization="Bearer "+e.jwt),ue.isFeatureEnabled("DISTRIBUTED_TRACING_VIA_FACADE")&&(e.headers||(e.headers={}),e.headers["x-b3-traceid"]=$.nbitHexString(64),e.headers["x-b3-spanid"]=$.nbitHexString(128),e.headers["x-b3-sampled"]=1)),u(r).add(e)},A=B.getSingleton("ajax");typeof A>"u"&&(A={ajaxCall:se,ajaxCallSetup:function(e){J=e.urlRoot||"",y=e.csrfToken||"",T.ajaxSetup({timeout:e.ajaxTimeout||0,cache:!1,type:"POST"})}},B.registerSingleton("ajax",A));L.exports=A});var N,ne=Y(()=>{N=K(V());N.default.ajaxCallSetup({urlRoot:hs.util.getUrlRoot(),csrfToken:hs.csrfToken,ajaxTimeout:hs.c.ajaxTimeout});window.ajaxCall=N.default.ajaxCall});export{U as a,V as b,ne as c};
//# sourceMappingURL=chunk-SHTS4IQB.js.map
